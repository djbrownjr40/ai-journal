{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/**\n * Trumbowyg v2.28.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link https://alex-d.github.io/Trumbowyg/\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\n\njQuery.trumbowyg = {\n  langs: {\n    en: {\n      viewHTML: 'View HTML',\n      undo: 'Undo',\n      redo: 'Redo',\n      formatting: 'Formatting',\n      p: 'Paragraph',\n      blockquote: 'Quote',\n      code: 'Code',\n      header: 'Header',\n      bold: 'Bold',\n      italic: 'Italic',\n      strikethrough: 'Strikethrough',\n      underline: 'Underline',\n      strong: 'Strong',\n      em: 'Emphasis',\n      del: 'Deleted',\n      superscript: 'Superscript',\n      subscript: 'Subscript',\n      unorderedList: 'Unordered list',\n      orderedList: 'Ordered list',\n      insertImage: 'Insert Image',\n      link: 'Link',\n      createLink: 'Insert link',\n      unlink: 'Remove link',\n      _self: 'Same tab (default)',\n      _blank: 'New tab',\n      justifyLeft: 'Align Left',\n      justifyCenter: 'Align Center',\n      justifyRight: 'Align Right',\n      justifyFull: 'Align Justify',\n      horizontalRule: 'Insert horizontal rule',\n      removeformat: 'Remove format',\n      fullscreen: 'Fullscreen',\n      close: 'Close',\n      submit: 'Confirm',\n      reset: 'Cancel',\n      required: 'Required',\n      description: 'Description',\n      title: 'Title',\n      text: 'Text',\n      target: 'Target',\n      width: 'Width'\n    }\n  },\n  // Plugins\n  plugins: {},\n  // SVG Path globally\n  svgPath: null,\n  svgAbsoluteUseHref: false,\n  hideButtonTexts: null\n};\n\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n  value: {\n    lang: 'en',\n    fixedBtnPane: false,\n    fixedFullWidth: false,\n    autogrow: false,\n    autogrowOnEnter: false,\n    imageWidthModalEdit: false,\n    hideButtonTexts: null,\n    prefix: 'trumbowyg-',\n    tagClasses: {},\n    semantic: true,\n    semanticKeepAttributes: false,\n    resetCss: false,\n    removeformatPasted: false,\n    tabToIndent: false,\n    tagsToRemove: [],\n    tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n    btns: [['viewHTML'], ['undo', 'redo'],\n    // Only supported in Blink browsers\n    ['formatting'], ['strong', 'em', 'del'], ['superscript', 'subscript'], ['link'], ['insertImage'], ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'], ['unorderedList', 'orderedList'], ['horizontalRule'], ['removeformat'], ['fullscreen']],\n    // For custom button definitions\n    btnsDef: {},\n    changeActiveDropdownIcon: false,\n    inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n    pasteHandlers: [],\n    // imgDblClickHandler: default is defined in constructor\n\n    plugins: {},\n    urlProtocol: false,\n    minimalLinks: false,\n    linkTargets: ['_self', '_blank'],\n    svgPath: null\n  },\n  writable: false,\n  enumerable: true,\n  configurable: false\n});\n(function (navigator, window, document, $) {\n  'use strict';\n\n  var CONFIRM_EVENT = 'tbwconfirm',\n    CANCEL_EVENT = 'tbwcancel';\n  $.fn.trumbowyg = function (options, params) {\n    var trumbowygDataName = 'trumbowyg';\n    if (options === Object(options) || !options) {\n      return this.each(function () {\n        if (!$(this).data(trumbowygDataName)) {\n          $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n        }\n      });\n    }\n    if (this.length === 1) {\n      try {\n        var t = $(this).data(trumbowygDataName);\n        switch (options) {\n          // Exec command\n          case 'execCmd':\n            return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n\n          // Modal box\n          case 'openModal':\n            return t.openModal(params.title, params.content);\n          case 'closeModal':\n            return t.closeModal();\n          case 'openModalInsert':\n            return t.openModalInsert(params.title, params.fields, params.callback);\n\n          // Range\n          case 'saveRange':\n            return t.saveRange();\n          case 'getRange':\n            return t.range;\n          case 'getRangeText':\n            return t.getRangeText();\n          case 'restoreRange':\n            return t.restoreRange();\n\n          // Enable/disable\n          case 'enable':\n            return t.setDisabled(false);\n          case 'disable':\n            return t.setDisabled(true);\n\n          // Toggle\n          case 'toggle':\n            return t.toggle();\n\n          // Destroy\n          case 'destroy':\n            return t.destroy();\n\n          // Empty\n          case 'empty':\n            return t.empty();\n\n          // HTML\n          case 'html':\n            return t.html(params);\n        }\n      } catch (c) {}\n    }\n    return false;\n  };\n\n  // @param: editorElem is the DOM element\n  var Trumbowyg = function (editorElem, options) {\n    var t = this,\n      trumbowygIconsId = 'trumbowyg-icons',\n      $trumbowyg = $.trumbowyg;\n\n    // Get the document of the element. It use to makes the plugin\n    // compatible on iframes.\n    t.doc = editorElem.ownerDocument || document;\n\n    // jQuery object of the editor\n    t.$ta = $(editorElem); // $ta : Textarea\n    t.$c = $(editorElem); // $c : creator\n\n    options = options || {};\n\n    // Localization management\n    if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n      t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n    } else {\n      t.lang = $trumbowyg.langs.en;\n    }\n    t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n\n    // SVG path\n    var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n    t.hasSvg = svgPathOption !== false;\n    if (svgPathOption !== false && ($trumbowyg.svgAbsoluteUseHref || $('#' + trumbowygIconsId, t.doc).length === 0)) {\n      if (svgPathOption == null) {\n        // Hack to get svgPathOption based on trumbowyg.js path\n        var $scriptElements = $('script[src]');\n        $scriptElements.each(function (i, scriptElement) {\n          var source = scriptElement.src;\n          var matches = source.match('trumbowyg(\\.min)?\\.js');\n          if (matches != null) {\n            svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n          }\n        });\n      }\n\n      // Do not merge with previous if block: svgPathOption can be redefined in it.\n      // Here we are checking that we find a match\n      if (svgPathOption == null) {\n        console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n      } else if (!$trumbowyg.svgAbsoluteUseHref) {\n        var div = t.doc.createElement('div');\n        div.id = trumbowygIconsId;\n        t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n        fetch(svgPathOption, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n          }\n        }).then(response => {\n          response.text().then(svg => {\n            div.innerHTML = svg;\n          });\n        });\n      }\n    }\n    var baseHref = !!t.doc.querySelector('base') ? window.location.href.replace(window.location.hash, '') : '';\n    t.svgPath = $trumbowyg.svgAbsoluteUseHref ? svgPathOption : baseHref;\n\n    /**\n     * When the button is associated to a empty object\n     * fn and title attributes are defined from the button key value\n     *\n     * For example\n     *      foo: {}\n     * is equivalent to :\n     *      foo: {\n     *          fn: 'foo',\n     *          title: this.lang.foo\n     *      }\n     */\n    var h = t.lang.header,\n      // Header translation\n      isBlinkFunction = function () {\n        return (window.chrome || window.Intl && Intl.v8BreakIterator) && 'CSS' in window;\n      };\n    t.btnsDef = {\n      viewHTML: {\n        fn: 'toggle',\n        class: 'trumbowyg-not-disable'\n      },\n      undo: {\n        isSupported: isBlinkFunction,\n        key: 'Z'\n      },\n      redo: {\n        isSupported: isBlinkFunction,\n        key: 'Y'\n      },\n      p: {\n        fn: 'formatBlock'\n      },\n      blockquote: {\n        fn: 'formatBlock'\n      },\n      h1: {\n        fn: 'formatBlock',\n        title: h + ' 1'\n      },\n      h2: {\n        fn: 'formatBlock',\n        title: h + ' 2'\n      },\n      h3: {\n        fn: 'formatBlock',\n        title: h + ' 3'\n      },\n      h4: {\n        fn: 'formatBlock',\n        title: h + ' 4'\n      },\n      h5: {\n        fn: 'formatBlock',\n        title: h + ' 5'\n      },\n      h6: {\n        fn: 'formatBlock',\n        title: h + ' 6'\n      },\n      subscript: {\n        tag: 'sub'\n      },\n      superscript: {\n        tag: 'sup'\n      },\n      bold: {\n        key: 'B',\n        tag: 'b'\n      },\n      italic: {\n        key: 'I',\n        tag: 'i'\n      },\n      underline: {\n        tag: 'u'\n      },\n      strikethrough: {\n        tag: 'strike'\n      },\n      strong: {\n        fn: 'bold',\n        key: 'B'\n      },\n      em: {\n        fn: 'italic',\n        key: 'I'\n      },\n      del: {\n        fn: 'strikethrough'\n      },\n      createLink: {\n        key: 'K',\n        tag: 'a'\n      },\n      unlink: {},\n      insertImage: {},\n      justifyLeft: {\n        tag: 'left',\n        forceCss: true\n      },\n      justifyCenter: {\n        tag: 'center',\n        forceCss: true\n      },\n      justifyRight: {\n        tag: 'right',\n        forceCss: true\n      },\n      justifyFull: {\n        tag: 'justify',\n        forceCss: true\n      },\n      unorderedList: {\n        fn: 'insertUnorderedList',\n        tag: 'ul'\n      },\n      orderedList: {\n        fn: 'insertOrderedList',\n        tag: 'ol'\n      },\n      horizontalRule: {\n        fn: 'insertHorizontalRule'\n      },\n      removeformat: {},\n      fullscreen: {\n        class: 'trumbowyg-not-disable'\n      },\n      close: {\n        fn: 'destroy',\n        class: 'trumbowyg-not-disable'\n      },\n      // Dropdowns\n      formatting: {\n        dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n        ico: 'p'\n      },\n      link: {\n        dropdown: ['createLink', 'unlink']\n      }\n    };\n\n    // Default Options\n    t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n    if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n      t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n    }\n    t.urlPrefix = t.setupUrlPrefix();\n    t.disabled = t.o.disabled || editorElem.nodeName === 'TEXTAREA' && editorElem.disabled;\n    if (options.btns) {\n      t.o.btns = options.btns;\n    } else if (!t.o.semantic) {\n      t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n    }\n    $.each(t.o.btnsDef, function (btnName, btnDef) {\n      t.addBtnDef(btnName, btnDef);\n    });\n\n    // put this here in the event it would be merged in with options\n    t.eventNamespace = 'trumbowyg-event';\n\n    // Keyboard shortcuts are load in this array\n    t.keys = [];\n\n    // Tag to button dynamically hydrated\n    t.tagToButton = {};\n    t.tagHandlers = [];\n\n    // Admit multiple paste handlers\n    t.pasteHandlers = [].concat(t.o.pasteHandlers);\n\n    // Check if browser is IE\n    t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n\n    // Check if we are on macOs\n    t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n    t.init();\n  };\n  Trumbowyg.prototype = {\n    DEFAULT_SEMANTIC_MAP: {\n      'b': 'strong',\n      'i': 'em',\n      's': 'del',\n      'strike': 'del',\n      'div': 'p'\n    },\n    init: function () {\n      var t = this;\n      t.height = t.$ta.outerHeight() - 39; // Remove button pane height\n\n      t.initPlugins();\n      try {\n        // Disable image resize, try-catch for old IE\n        t.doc.execCommand('enableObjectResizing', false, false);\n        t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n      } catch (e) {}\n      t.buildEditor();\n      t.buildBtnPane();\n      t.fixedBtnPaneEvents();\n      t.buildOverlay();\n      setTimeout(function () {\n        if (t.disabled) {\n          t.setDisabled(true);\n        }\n        t.$c.trigger('tbwinit');\n      });\n    },\n    addBtnDef: function (btnName, btnDef) {\n      this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n    },\n    setupUrlPrefix: function () {\n      var protocol = this.o.urlProtocol;\n      if (!protocol) {\n        return;\n      }\n      if (typeof protocol !== 'string') {\n        return 'https://';\n      }\n      return protocol.replace('://', '') + '://';\n    },\n    buildEditor: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        html = '';\n      t.$box = $('<div/>', {\n        class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n      });\n      t.$edBox = $('<div/>', {\n        class: prefix + 'editor-box'\n      });\n\n      // $ta = Textarea\n      // $ed = Editor\n      t.isTextarea = t.$ta.is('textarea');\n      if (t.isTextarea) {\n        html = t.$ta.val();\n        t.$ed = $('<div/>').appendTo(t.$edBox);\n        t.$box.insertAfter(t.$ta).append(t.$edBox, t.$ta);\n      } else {\n        t.$ed = t.$ta;\n        html = t.$ed.html();\n        t.$ta = $('<textarea/>', {\n          name: t.$ta.attr('id'),\n          height: t.height\n        }).val(html);\n        t.$box.insertAfter(t.$ed).append(t.$ta, t.$edBox);\n        t.$edBox.append(t.$ed);\n        t.syncCode();\n      }\n      t.$ta.addClass(prefix + 'textarea').attr('tabindex', -1);\n      t.$ed.addClass(prefix + 'editor').attr({\n        contenteditable: true,\n        dir: t.lang._dir || 'ltr'\n      }).html(html);\n      if (t.o.tabindex) {\n        t.$ed.attr('tabindex', t.o.tabindex);\n      }\n      if (t.$c.is('[placeholder]')) {\n        t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n      }\n      if (t.$c.is('[spellcheck]')) {\n        t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n      }\n      if (t.o.resetCss) {\n        t.$ed.addClass(prefix + 'reset-css');\n      }\n      t.semanticCode();\n      if (t.o.autogrowOnEnter) {\n        t.$ed.addClass(prefix + 'autogrow-on-enter');\n      }\n      var ctrl = false,\n        composition = false,\n        debounceButtonPaneStatus;\n      t.$ed.on('dblclick', 'img', t.o.imgDblClickHandler).on('keydown', function (e) {\n        // append flags to differentiate Chrome spans\n        var keyCode = e.which;\n        if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n          t.toggleSpan(true);\n        }\n        if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n          ctrl = true;\n          var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n          try {\n            t.execCmd(key.fn, key.param);\n            return false;\n          } catch (c) {}\n        } else {\n          if (t.o.tabToIndent && e.key === 'Tab') {\n            try {\n              if (e.shiftKey) {\n                t.execCmd('outdent', true, null);\n              } else {\n                t.execCmd('indent', true, null);\n              }\n              return false;\n            } catch (c) {}\n          }\n        }\n      }).on('compositionstart compositionupdate', function () {\n        composition = true;\n      }).on('keyup compositionend', function (e) {\n        if (e.type === 'compositionend') {\n          composition = false;\n        } else if (composition) {\n          return;\n        }\n        var keyCode = e.which;\n        if (keyCode >= 37 && keyCode <= 40) {\n          return;\n        }\n\n        // remove Chrome generated span tags\n        if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n          t.toggleSpan();\n        }\n        if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n          t.semanticCode(false, true);\n          t.$c.trigger('tbwchange');\n        } else if (!ctrl && keyCode !== 16 && keyCode !== 17) {\n          var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n          t.semanticCode(false, compositionEndIE && keyCode === 13);\n          t.$c.trigger('tbwchange');\n        } else if (typeof e.which === 'undefined') {\n          t.semanticCode(false, false, true);\n        }\n        setTimeout(function () {\n          ctrl = false;\n        }, 50);\n      }).on('input', function (e) {\n        // Trigger change event when spelling fixes applied\n        var event = e.originalEvent;\n        if (typeof event === 'object' && (event.inputType === 'insertReplacementText' || event.inputType === 'insertText' && event.data === null)) {\n          t.$c.trigger('tbwchange');\n        }\n      }).on('mouseup keydown keyup', function (e) {\n        if (!e.ctrlKey && !e.metaKey || e.altKey) {\n          setTimeout(function () {\n            // \"hold on\" to the ctrl key for 50ms\n            ctrl = false;\n          }, 50);\n        }\n        clearTimeout(debounceButtonPaneStatus);\n        debounceButtonPaneStatus = setTimeout(function () {\n          t.updateButtonPaneStatus();\n        }, 50);\n      }).on('focus blur', function (e) {\n        if (e.type === 'blur') {\n          t.clearButtonPaneStatus();\n        }\n        t.$c.trigger('tbw' + e.type);\n        if (t.o.autogrowOnEnter) {\n          if (t.autogrowOnEnterDontClose) {\n            return;\n          }\n          if (e.type === 'focus') {\n            t.autogrowOnEnterWasFocused = true;\n            t.autogrowEditorOnEnter();\n          } else if (!t.o.autogrow) {\n            t.$edBox.css({\n              height: t.$edBox.css('min-height')\n            });\n            t.$c.trigger('tbwresize');\n          }\n        }\n      }).on('keyup focus', function () {\n        if (!t.$ta.val().match(/<.*>/) && !t.$ed.html().match(/<.*>/)) {\n          setTimeout(function () {\n            var block = t.isIE ? '<p>' : 'p';\n            t.doc.execCommand('formatBlock', false, block);\n            t.syncCode();\n          }, 0);\n        }\n      }).on('cut drop', function () {\n        setTimeout(function () {\n          t.semanticCode(false, true);\n          t.$c.trigger('tbwchange');\n        }, 0);\n      }).on('paste', function (e) {\n        if (t.o.removeformatPasted) {\n          e.preventDefault();\n          if (window.getSelection && window.getSelection().deleteFromDocument) {\n            window.getSelection().deleteFromDocument();\n          }\n          try {\n            // IE\n            var text = window.clipboardData.getData('Text');\n            try {\n              // <= IE10\n              t.doc.selection.createRange().pasteHTML(text);\n            } catch (c) {\n              // IE 11\n              t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n            }\n            t.$c.trigger('tbwchange', e);\n          } catch (d) {\n            // Not IE\n            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n          }\n        }\n\n        // Call pasteHandlers\n        $.each(t.pasteHandlers, function (i, pasteHandler) {\n          pasteHandler(e);\n        });\n        setTimeout(function () {\n          t.semanticCode(false, true);\n          t.$c.trigger('tbwpaste', e);\n          t.$c.trigger('tbwchange');\n        }, 0);\n      });\n      t.$ta.on('keyup', function () {\n        t.$c.trigger('tbwchange');\n      }).on('paste', function () {\n        setTimeout(function () {\n          t.$c.trigger('tbwchange');\n        }, 0);\n      });\n      $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n        if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n          t.closeModal();\n          return false;\n        }\n      });\n    },\n    //autogrow when entering logic\n    autogrowEditorOnEnter: function () {\n      var t = this;\n      t.$ed.removeClass('autogrow-on-enter');\n      var oldHeight = t.$ed[0].clientHeight;\n      t.$edBox.height('auto');\n      var totalHeight = t.$ed[0].scrollHeight;\n      t.$ed.addClass('autogrow-on-enter');\n      if (oldHeight !== totalHeight) {\n        t.$edBox.height(oldHeight);\n        setTimeout(function () {\n          t.$edBox.css({\n            height: totalHeight\n          });\n          t.$c.trigger('tbwresize');\n        }, 0);\n      }\n    },\n    // Build button pane, use o.btns option\n    buildBtnPane: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      var $btnPane = t.$btnPane = $('<div/>', {\n        class: prefix + 'button-pane'\n      });\n      $.each(t.o.btns, function (i, btnGrp) {\n        if (!Array.isArray(btnGrp)) {\n          btnGrp = [btnGrp];\n        }\n        var $btnGroup = $('<div/>', {\n          class: prefix + 'button-group ' + (btnGrp.indexOf('fullscreen') >= 0 ? prefix + 'right' : '')\n        });\n        $.each(btnGrp, function (i, btn) {\n          try {\n            // Prevent buildBtn error\n            if (t.isSupportedBtn(btn)) {\n              // It's a supported button\n              $btnGroup.append(t.buildBtn(btn));\n            }\n          } catch (c) {}\n        });\n        if ($btnGroup.html().trim().length > 0) {\n          $btnPane.append($btnGroup);\n        }\n      });\n      t.$box.prepend($btnPane);\n    },\n    // Build a button and his action\n    buildBtn: function (btnName) {\n      // btnName is name of the button\n      var t = this,\n        prefix = t.o.prefix,\n        btn = t.btnsDef[btnName],\n        isDropdown = btn.dropdown,\n        hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n        textDef = t.lang[btnName] || btnName,\n        $btn = $('<button/>', {\n          type: 'button',\n          class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n          html: t.hasSvg && hasIcon ? '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' : t.hideButtonTexts ? '' : btn.text || btn.title || t.lang[btnName] || btnName,\n          title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n          tabindex: -1,\n          mousedown: function () {\n            if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n              $('body', t.doc).trigger('mousedown');\n            }\n            if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) && !$(this).hasClass(prefix + 'active') && !$(this).hasClass(prefix + 'not-disable')) {\n              return false;\n            }\n            t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n            return false;\n          }\n        });\n      if (isDropdown) {\n        $btn.addClass(prefix + 'open-dropdown');\n        var dropdownPrefix = prefix + 'dropdown',\n          dropdownOptions = {\n            // the dropdown\n            class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n          };\n        dropdownOptions['data-' + dropdownPrefix] = btnName;\n        var $dropdown = $('<div/>', dropdownOptions);\n        $.each(isDropdown, function (i, def) {\n          if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n            $dropdown.append(t.buildSubBtn(def));\n          }\n        });\n        t.$box.append($dropdown.hide());\n      } else if (btn.key) {\n        t.keys[btn.key] = {\n          fn: btn.fn || btnName,\n          param: btn.param || btnName\n        };\n      }\n      if (!isDropdown) {\n        t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n      }\n      return $btn;\n    },\n    // Build a button for dropdown menu\n    // @param n : name of the subbutton\n    buildSubBtn: function (btnName) {\n      var t = this,\n        prefix = t.o.prefix,\n        btn = t.btnsDef[btnName],\n        hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n      if (btn.key) {\n        t.keys[btn.key] = {\n          fn: btn.fn || btnName,\n          param: btn.param || btnName\n        };\n      }\n      t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n      return $('<button/>', {\n        type: 'button',\n        class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n        html: t.hasSvg && hasIcon ? '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) : btn.text || btn.title || t.lang[btnName] || btnName,\n        title: btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null,\n        style: btn.style || null,\n        mousedown: function () {\n          $('body', t.doc).trigger('mousedown');\n          t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n          return false;\n        }\n      });\n    },\n    // Check if button is supported\n    isSupportedBtn: function (btnName) {\n      try {\n        return this.btnsDef[btnName].isSupported();\n      } catch (e) {}\n      return true;\n    },\n    // Build overlay for modal box\n    buildOverlay: function () {\n      var t = this;\n      t.$overlay = $('<div/>', {\n        class: t.o.prefix + 'overlay'\n      }).appendTo(t.$box);\n      return t.$overlay;\n    },\n    showOverlay: function () {\n      var t = this;\n      $(window).trigger('scroll');\n      t.$overlay.fadeIn(200);\n      t.$box.addClass(t.o.prefix + 'box-blur');\n    },\n    hideOverlay: function () {\n      var t = this;\n      t.$overlay.fadeOut(50);\n      t.$box.removeClass(t.o.prefix + 'box-blur');\n    },\n    // Management of fixed button pane\n    fixedBtnPaneEvents: function () {\n      var t = this,\n        fixedFullWidth = t.o.fixedFullWidth,\n        $box = t.$box;\n      if (!t.o.fixedBtnPane) {\n        return;\n      }\n      t.isFixed = false;\n      $(window).on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n        if (!$box) {\n          return;\n        }\n        t.syncCode();\n        var scrollTop = $(window).scrollTop(),\n          offset = $box.offset().top + 1,\n          $buttonPane = t.$btnPane,\n          buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n        if (scrollTop - offset > 0 && scrollTop - offset - t.height < 0) {\n          if (!t.isFixed) {\n            t.isFixed = true;\n            $buttonPane.css({\n              position: 'fixed',\n              top: 0,\n              left: fixedFullWidth ? 0 : 'auto',\n              zIndex: 7\n            });\n            t.$box.css({\n              paddingTop: $buttonPane.height()\n            });\n          }\n          $buttonPane.css({\n            width: fixedFullWidth ? '100%' : $box.width() - 1\n          });\n          $('.' + t.o.prefix + 'fixed-top', $box).css({\n            position: fixedFullWidth ? 'fixed' : 'absolute',\n            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n            zIndex: 15\n          });\n        } else if (t.isFixed) {\n          t.isFixed = false;\n          $buttonPane.removeAttr('style');\n          t.$box.css({\n            paddingTop: 0\n          });\n          $('.' + t.o.prefix + 'fixed-top', $box).css({\n            position: 'absolute',\n            top: buttonPaneOuterHeight\n          });\n        }\n      });\n    },\n    // Disable editor\n    setDisabled: function (disable) {\n      var t = this,\n        prefix = t.o.prefix;\n      t.disabled = disable;\n      if (disable) {\n        t.$ta.attr('disabled', true);\n      } else {\n        t.$ta.removeAttr('disabled');\n      }\n      t.$box.toggleClass(prefix + 'disabled', disable);\n      t.$ed.attr('contenteditable', !disable);\n    },\n    // Destroy the editor\n    destroy: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      if (t.isTextarea) {\n        t.$box.after(t.$ta.css({\n          height: ''\n        }).val(t.html()).removeClass(prefix + 'textarea').show());\n      } else {\n        t.$box.after(t.$edBox.css({\n          height: ''\n        }).removeClass(prefix + 'editor').removeAttr('contenteditable').removeAttr('dir').html(t.html()).show());\n      }\n      t.$ed.off('dblclick', 'img');\n      t.destroyPlugins();\n      t.$box.remove();\n      t.$c.removeData('trumbowyg');\n      $('body').removeClass(prefix + 'body-fullscreen');\n      t.$c.trigger('tbwclose');\n      $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n      $(t.doc.body).off('keydown.' + t.eventNamespace);\n    },\n    // Empty the editor\n    empty: function () {\n      this.doc.execCommand('insertHTML', false, '');\n      this.$ta.val('');\n      this.syncCode(true);\n    },\n    // Function call when click on viewHTML button\n    toggle: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      if (t.o.autogrowOnEnter) {\n        t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n      }\n      t.semanticCode(false, true);\n      t.$c.trigger('tbwchange');\n      setTimeout(function () {\n        t.doc.activeElement.blur();\n        t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n        t.$btnPane.toggleClass(prefix + 'disable');\n        $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n        if (t.$box.hasClass(prefix + 'editor-visible')) {\n          t.$ta.attr('tabindex', -1);\n        } else {\n          t.$ta.removeAttr('tabindex');\n        }\n        if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n          t.autogrowEditorOnEnter();\n        }\n      }, 0);\n    },\n    // Remove or add flags to span tags to remove Chrome generated spans\n    toggleSpan: function (addFlag) {\n      var t = this;\n      t.$ed.find('span').each(function () {\n        if (addFlag === true) {\n          $(this).attr('data-tbw-flag', true);\n        } else {\n          if ($(this).attr('data-tbw-flag')) {\n            $(this).removeAttr('data-tbw-flag');\n          } else {\n            $(this).contents().unwrap();\n          }\n        }\n      });\n    },\n    // Open dropdown when click on a button which open that\n    dropdown: function (name) {\n      var t = this,\n        $body = $('body', t.doc),\n        prefix = t.o.prefix,\n        $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n        $btn = $('.' + prefix + name + '-button', t.$btnPane),\n        show = $dropdown.is(':hidden');\n      $body.trigger('mousedown');\n      if (show) {\n        var btnOffsetLeft = $btn.offset().left;\n        $btn.addClass(prefix + 'active');\n        $dropdown.css({\n          position: 'absolute',\n          top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n          left: t.o.fixedFullWidth && t.isFixed ? btnOffsetLeft : btnOffsetLeft - t.$btnPane.offset().left\n        }).show();\n        $(window).trigger('scroll');\n        $body.on('mousedown.' + t.eventNamespace, function (e) {\n          if (!$dropdown.is(e.target)) {\n            $('.' + prefix + 'dropdown', t.$box).hide();\n            $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n            $body.off('mousedown.' + t.eventNamespace);\n          }\n        });\n      }\n    },\n    // HTML Code management\n    html: function (html) {\n      var t = this;\n      if (html != null) {\n        t.$ta.val(html);\n        t.syncCode(true);\n        t.$c.trigger('tbwchange');\n        return t;\n      }\n      return t.$ta.val();\n    },\n    syncTextarea: function () {\n      var t = this;\n      t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n    },\n    syncCode: function (force) {\n      var t = this;\n      if (!force && t.$ed.is(':visible')) {\n        t.syncTextarea();\n      } else {\n        // wrap the content in a div it's easier to get the inner html\n        var html = $('<div>').html(t.$ta.val());\n        // scrub the html before loading into the doc\n        var safe = $('<div>').append(html);\n        $(t.o.tagsToRemove.join(','), safe).remove();\n        t.$ed.html(safe.contents().html());\n      }\n      if (t.o.autogrow) {\n        t.height = t.$edBox.height();\n        if (t.height !== t.$ta.css('height')) {\n          t.$ta.css({\n            height: t.height\n          });\n          t.$c.trigger('tbwresize');\n        }\n      }\n      if (t.o.autogrowOnEnter) {\n        t.$edBox.height('auto');\n        var totalHeight = t.autogrowOnEnterWasFocused ? t.$edBox[0].scrollHeight : t.$edBox.css('min-height');\n        if (totalHeight !== t.$ta.css('height')) {\n          t.$edBox.css({\n            height: totalHeight\n          });\n          t.$c.trigger('tbwresize');\n        }\n      }\n    },\n    // Analyse and update to semantic code\n    // @param force : force to sync code from textarea\n    // @param full  : wrap text nodes in <p>\n    // @param keepRange  : leave selection range as it is\n    semanticCode: function (force, full, keepRange) {\n      var t = this;\n      t.saveRange();\n      t.syncCode(force);\n      var restoreRange = true;\n      if (t.range && t.range.collapsed) {\n        restoreRange = false;\n      }\n      if (t.o.semantic) {\n        t.semanticTag('b', t.o.semanticKeepAttributes);\n        t.semanticTag('i', t.o.semanticKeepAttributes);\n        t.semanticTag('s', t.o.semanticKeepAttributes);\n        t.semanticTag('strike', t.o.semanticKeepAttributes);\n        if (full) {\n          var inlineElementsSelector = t.o.inlineElementsSelector,\n            blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n\n          // Wrap text nodes in span for easier processing\n          t.$ed.contents().filter(function () {\n            return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n          }).wrap('<span data-tbw/>');\n\n          // Wrap groups of inline elements in paragraphs (recursive)\n          var wrapInlinesInParagraphsFrom = function ($from) {\n            if ($from.length !== 0) {\n              var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n              $finalParagraph.next('br').remove();\n              wrapInlinesInParagraphsFrom($nextElement);\n            }\n          };\n          wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n          t.semanticTag('div', true);\n\n          // Get rid of temporary span's\n          $('[data-tbw]', t.$ed).contents().unwrap();\n\n          // Remove empty <p>\n          t.$ed.find('p:empty').remove();\n        }\n        if (!keepRange && restoreRange) {\n          t.restoreRange();\n        }\n        t.syncTextarea();\n      }\n    },\n    semanticTag: function (oldTag, copyAttributes, revert) {\n      var newTag,\n        t = this;\n      var tmpTag = oldTag;\n      if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n        newTag = this.o.semantic[oldTag];\n      } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n        newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n      } else {\n        return;\n      }\n      if (revert) {\n        oldTag = newTag;\n        newTag = tmpTag;\n      }\n      $(oldTag, this.$ed).each(function () {\n        var resetRange = false;\n        var $oldTag = $(this);\n        if ($oldTag.contents().length === 0) {\n          return false;\n        }\n        if (t.range && t.range.startContainer.parentNode === this) {\n          resetRange = true;\n        }\n        var $newTag = $('<' + newTag + '/>');\n        $newTag.insertBefore($oldTag);\n        if (copyAttributes) {\n          $.each($oldTag.prop('attributes'), function () {\n            $newTag.attr(this.name, this.value);\n          });\n        }\n        $newTag.html($oldTag.html());\n        $oldTag.remove();\n        if (resetRange === true) {\n          t.range.selectNodeContents($newTag.get(0));\n          t.range.collapse(false);\n        }\n      });\n    },\n    // Function call when user click on \"Insert Link\"\n    createLink: function () {\n      var t = this,\n        documentSelection = t.doc.getSelection(),\n        selectedRange = documentSelection.getRangeAt(0),\n        node = documentSelection.focusNode,\n        text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n        url,\n        title,\n        target,\n        linkDefaultTarget = t.o.linkTargets[0];\n      while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n        node = node.parentNode;\n      }\n      if (node && node.nodeName === 'A') {\n        var $a = $(node);\n        text = $a.text();\n        url = $a.attr('href');\n        if (!t.o.minimalLinks) {\n          title = $a.attr('title');\n          target = $a.attr('target') || linkDefaultTarget;\n        }\n        var range = t.doc.createRange();\n        range.selectNode(node);\n        documentSelection.removeAllRanges();\n        documentSelection.addRange(range);\n      }\n      t.saveRange();\n      var options = {\n        url: {\n          label: t.lang.linkUrl || 'URL',\n          required: true,\n          value: url\n        },\n        text: {\n          label: t.lang.text,\n          value: text\n        }\n      };\n      if (!t.o.minimalLinks) {\n        var targetOptions = t.o.linkTargets.reduce(function (options, optionValue) {\n          options[optionValue] = t.lang[optionValue];\n          return options;\n        }, {});\n        $.extend(options, {\n          title: {\n            label: t.lang.title,\n            value: title\n          },\n          target: {\n            label: t.lang.target,\n            value: target,\n            options: targetOptions\n          }\n        });\n      }\n      t.openModalInsert(t.lang.createLink, options, function (v) {\n        // v is value\n        var url = t.prependUrlPrefix(v.url);\n        if (!url.length) {\n          return false;\n        }\n        var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n        if (v.title) {\n          link.attr('title', v.title);\n        }\n        if (v.target || linkDefaultTarget) {\n          link.attr('target', v.target || linkDefaultTarget);\n        }\n        t.range.deleteContents();\n        t.range.insertNode(link[0]);\n        t.syncCode();\n        t.$c.trigger('tbwchange');\n        return true;\n      });\n    },\n    prependUrlPrefix: function (url) {\n      var t = this;\n      if (!t.urlPrefix) {\n        return url;\n      }\n      var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n      if (VALID_LINK_PREFIX.test(url)) {\n        return url;\n      }\n      var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (SIMPLE_EMAIL_REGEX.test(url)) {\n        return 'mailto:' + url;\n      }\n      return t.urlPrefix + url;\n    },\n    unlink: function () {\n      var t = this,\n        documentSelection = t.doc.getSelection(),\n        node = documentSelection.focusNode;\n      if (documentSelection.isCollapsed) {\n        while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n          node = node.parentNode;\n        }\n        if (node && node.nodeName === 'A') {\n          var range = t.doc.createRange();\n          range.selectNode(node);\n          documentSelection.removeAllRanges();\n          documentSelection.addRange(range);\n        }\n      }\n      t.execCmd('unlink', undefined, undefined, true);\n    },\n    insertImage: function () {\n      var t = this;\n      t.saveRange();\n      var options = {\n        url: {\n          label: 'URL',\n          required: true\n        },\n        alt: {\n          label: t.lang.description,\n          value: t.getRangeText()\n        }\n      };\n      if (t.o.imageWidthModalEdit) {\n        options.width = {};\n      }\n      t.openModalInsert(t.lang.insertImage, options, function (v) {\n        // v are values\n        t.execCmd('insertImage', v.url, false, true);\n        var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n        $img.attr('alt', v.alt);\n        if (t.o.imageWidthModalEdit) {\n          $img.attr({\n            width: v.width\n          });\n        }\n        t.syncCode();\n        t.$c.trigger('tbwchange');\n        return true;\n      });\n    },\n    fullscreen: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        fullscreenCssClass = prefix + 'fullscreen',\n        fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n        isFullscreen,\n        editorHeight = t.$box.outerHeight();\n      t.$box.toggleClass(fullscreenCssClass);\n      isFullscreen = t.$box.hasClass(fullscreenCssClass);\n      if (isFullscreen) {\n        t.$box.before($('<div/>', {\n          class: fullscreenPlaceholderClass\n        }).css({\n          height: editorHeight\n        }));\n      } else {\n        $('.' + fullscreenPlaceholderClass).remove();\n      }\n      $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n      $(window).trigger('scroll');\n      t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n    },\n    /*\n     * Call method of trumbowyg if exist\n     * else try to call anonymous function\n     * and finally native execCommand\n     */\n    execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n      var t = this;\n      skipTrumbowyg = !!skipTrumbowyg || '';\n      if (cmd !== 'dropdown') {\n        t.$ed.focus();\n      }\n      if (cmd === 'strikethrough' && t.o.semantic) {\n        t.semanticTag('strike', t.o.semanticKeepAttributes, true); // browsers cannot undo e.g. <del> as they expect <strike>\n      }\n      try {\n        t.doc.execCommand('styleWithCSS', false, forceCss || false);\n      } catch (c) {}\n      try {\n        t[cmd + skipTrumbowyg](param);\n      } catch (c) {\n        try {\n          cmd(param);\n        } catch (e2) {\n          if (cmd === 'insertHorizontalRule') {\n            param = undefined;\n          } else if (cmd === 'formatBlock' && t.isIE) {\n            param = '<' + param + '>';\n          }\n          t.doc.execCommand(cmd, false, param);\n          t.syncCode();\n          t.semanticCode(false, true);\n          try {\n            var listId = window.getSelection().focusNode;\n            if (!$(window.getSelection().focusNode.parentNode).hasClass('trumbowyg-editor')) {\n              listId = window.getSelection().focusNode.parentNode;\n            }\n            var classes = t.o.tagClasses[param];\n            if (classes) {\n              $(listId).addClass(classes);\n            }\n          } catch (e) {}\n        }\n        if (cmd !== 'dropdown') {\n          t.updateButtonPaneStatus();\n          t.$c.trigger('tbwchange');\n        }\n      }\n    },\n    // Open a modal box\n    openModal: function (title, content, buildForm) {\n      var t = this,\n        prefix = t.o.prefix;\n      buildForm = buildForm !== false;\n\n      // No open a modal box when exist other modal box\n      if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n        return false;\n      }\n      if (t.o.autogrowOnEnter) {\n        t.autogrowOnEnterDontClose = true;\n      }\n      t.saveRange();\n      t.showOverlay();\n\n      // Disable all btnPane btns\n      t.$btnPane.addClass(prefix + 'disable');\n\n      // Build out of ModalBox, it's the mask for animations\n      var $modal = $('<div/>', {\n        class: prefix + 'modal ' + prefix + 'fixed-top'\n      }).css({\n        top: t.$box.offset().top + t.$btnPane.height(),\n        zIndex: 99999\n      }).appendTo($(t.doc.body));\n      var darkClass = prefix + 'dark';\n      if (t.$c.parents('.' + darkClass).length !== 0) {\n        $modal.addClass(darkClass);\n      }\n\n      // Click on overlay close modal by cancelling them\n      t.$overlay.one('click', function () {\n        $modal.trigger(CANCEL_EVENT);\n        return false;\n      });\n\n      // Build the form\n      var formOrContent;\n      if (buildForm) {\n        formOrContent = $('<form/>', {\n          action: '',\n          html: content\n        }).on('submit', function () {\n          $modal.trigger(CONFIRM_EVENT);\n          return false;\n        }).on('reset', function () {\n          $modal.trigger(CANCEL_EVENT);\n          return false;\n        }).on('submit reset', function () {\n          if (t.o.autogrowOnEnter) {\n            t.autogrowOnEnterDontClose = false;\n          }\n        });\n      } else {\n        formOrContent = content;\n      }\n\n      // Build ModalBox and animate to show them\n      var $box = $('<div/>', {\n        class: prefix + 'modal-box',\n        html: formOrContent\n      }).css({\n        top: '-' + t.$btnPane.outerHeight(),\n        opacity: 0,\n        paddingBottom: buildForm ? null : '5%'\n      }).appendTo($modal).animate({\n        top: 0,\n        opacity: 1\n      }, 100);\n\n      // Append title\n      if (title) {\n        $('<span/>', {\n          text: title,\n          class: prefix + 'modal-title'\n        }).prependTo($box);\n      }\n      if (buildForm) {\n        // Focus in modal box\n        $(':input:first', $box).focus();\n\n        // Append Confirm and Cancel buttons\n        t.buildModalBtn('submit', $box);\n        t.buildModalBtn('reset', $box);\n        $modal.height($box.outerHeight() + 10);\n      }\n      $(window).trigger('scroll');\n      t.$c.trigger('tbwmodalopen');\n      return $modal;\n    },\n    // @param n is name of modal\n    buildModalBtn: function (n, $modal) {\n      var t = this,\n        prefix = t.o.prefix;\n      return $('<button/>', {\n        class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n        type: n,\n        text: t.lang[n] || n\n      }).appendTo($('form', $modal));\n    },\n    // close current modal box\n    closeModal: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      t.$btnPane.removeClass(prefix + 'disable');\n      t.$overlay.off();\n\n      // Find the modal box\n      var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n      $modalBox.animate({\n        top: '-' + $modalBox.height()\n      }, 100, function () {\n        $modalBox.parent().remove();\n        t.hideOverlay();\n        t.$c.trigger('tbwmodalclose');\n      });\n      t.restoreRange();\n    },\n    // Pre-formatted build and management modal\n    openModalInsert: function (title, fields, cmd) {\n      var t = this,\n        prefix = t.o.prefix,\n        lg = t.lang,\n        html = '',\n        idPrefix = prefix + 'form-' + Date.now() + '-';\n      $.each(fields, function (fieldName, field) {\n        var l = field.label || fieldName,\n          n = field.name || fieldName,\n          a = field.attributes || {},\n          fieldId = idPrefix + fieldName;\n        var attr = Object.keys(a).map(function (prop) {\n          return prop + '=\"' + a[prop] + '\"';\n        }).join(' ');\n        if (typeof field.type === 'function') {\n          if (!field.name) {\n            field.name = n;\n          }\n          html += field.type(field, fieldId, prefix, lg);\n          return;\n        }\n        html += '<div class=\"' + prefix + 'input-row\">';\n        html += '<div class=\"' + prefix + 'input-infos\"><label for=\"' + fieldId + '\"><span>' + (lg[l] ? lg[l] : l) + '</span></label></div>';\n        html += '<div class=\"' + prefix + 'input-html\">';\n        if ($.isPlainObject(field.options)) {\n          html += '<select name=\"target\">';\n          html += Object.keys(field.options).map(optionValue => {\n            return '<option value=\"' + optionValue + '\" ' + (optionValue === field.value ? 'selected' : '') + '>' + field.options[optionValue] + '</option>';\n          }).join('');\n          html += '</select>';\n        } else {\n          html += '<input id=\"' + fieldId + '\" type=\"' + (field.type || 'text') + '\" name=\"' + n + '\" ' + attr;\n          html += (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : '') + ' value=\"' + (field.value || '').replace(/\"/g, '&quot;') + '\">';\n        }\n        html += '</div></div>';\n      });\n      return t.openModal(title, html).on(CONFIRM_EVENT, function () {\n        var $form = $('form', $(this)),\n          valid = true,\n          values = {};\n        $.each(fields, function (fieldName, field) {\n          var n = field.name || fieldName;\n          var $field = $(':input[name=\"' + n + '\"]', $form),\n            inputType = $field[0].type;\n          switch (inputType.toLowerCase()) {\n            case 'checkbox':\n              values[n] = $field.is(':checked');\n              break;\n            case 'radio':\n              values[n] = $field.filter(':checked').val();\n              break;\n            default:\n              values[n] = $field.val().trim();\n              break;\n          }\n          // Validate value\n          if (field.required && values[n] === '') {\n            valid = false;\n            t.addErrorOnModalField($field, t.lang.required);\n          } else if (field.pattern && !field.pattern.test(values[n])) {\n            valid = false;\n            t.addErrorOnModalField($field, field.patternError);\n          }\n        });\n        if (valid) {\n          t.restoreRange();\n          if (cmd(values, fields)) {\n            t.syncCode();\n            t.$c.trigger('tbwchange');\n            t.closeModal();\n            $(this).off(CONFIRM_EVENT);\n          }\n        }\n      }).one(CANCEL_EVENT, function () {\n        $(this).off(CONFIRM_EVENT);\n        t.closeModal();\n      });\n    },\n    addErrorOnModalField: function ($field, err) {\n      var prefix = this.o.prefix,\n        spanErrorClass = prefix + 'msg-error',\n        $row = $field.closest('.' + prefix + 'input-row');\n      $field.one('change keyup', function () {\n        $row.removeClass(prefix + 'input-error');\n      });\n      $row.find('.' + spanErrorClass).remove();\n      $row.addClass(prefix + 'input-error').find('.' + prefix + 'input-infos label').append($('<span/>', {\n        class: spanErrorClass,\n        text: err\n      }));\n    },\n    getDefaultImgDblClickHandler: function () {\n      var t = this;\n      return function () {\n        var $img = $(this),\n          src = $img.attr('src'),\n          base64 = '(Base64)';\n        if (src.indexOf('data:image') === 0) {\n          src = base64;\n        }\n        var options = {\n          url: {\n            label: 'URL',\n            value: src,\n            required: true\n          },\n          alt: {\n            label: t.lang.description,\n            value: $img.attr('alt')\n          }\n        };\n        if (t.o.imageWidthModalEdit) {\n          options.width = {\n            value: $img.attr('width') ? $img.attr('width') : ''\n          };\n        }\n        t.openModalInsert(t.lang.insertImage, options, function (v) {\n          if (v.url !== base64) {\n            $img.attr({\n              src: v.url\n            });\n          }\n          $img.attr({\n            alt: v.alt\n          });\n          if (t.o.imageWidthModalEdit) {\n            if (parseInt(v.width) > 0) {\n              $img.attr({\n                width: v.width\n              });\n            } else {\n              $img.removeAttr('width');\n            }\n          }\n          return true;\n        });\n        return false;\n      };\n    },\n    // Range management\n    saveRange: function () {\n      var t = this,\n        documentSelection = t.doc.getSelection();\n      t.range = null;\n      if (!documentSelection || !documentSelection.rangeCount) {\n        return;\n      }\n      var savedRange = t.range = documentSelection.getRangeAt(0),\n        range = t.doc.createRange(),\n        rangeStart;\n      range.selectNodeContents(t.$ed[0]);\n      range.setEnd(savedRange.startContainer, savedRange.startOffset);\n      rangeStart = (range + '').length;\n      t.metaRange = {\n        start: rangeStart,\n        end: rangeStart + (savedRange + '').length\n      };\n    },\n    restoreRange: function () {\n      var t = this,\n        metaRange = t.metaRange,\n        savedRange = t.range,\n        documentSelection = t.doc.getSelection(),\n        range;\n      if (!savedRange) {\n        return;\n      }\n      if (metaRange && metaRange.start !== metaRange.end) {\n        // Algorithm from http://jsfiddle.net/WeWy7/3/\n        var charIndex = 0,\n          nodeStack = [t.$ed[0]],\n          node,\n          foundStart = false,\n          stop = false;\n        range = t.doc.createRange();\n        while (!stop && (node = nodeStack.pop())) {\n          if (node.nodeType === 3) {\n            var nextCharIndex = charIndex + node.length;\n            if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n              range.setStart(node, metaRange.start - charIndex);\n              foundStart = true;\n            }\n            if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n              range.setEnd(node, metaRange.end - charIndex);\n              stop = true;\n            }\n            charIndex = nextCharIndex;\n          } else {\n            var cn = node.childNodes,\n              i = cn.length;\n            while (i > 0) {\n              i -= 1;\n              nodeStack.push(cn[i]);\n            }\n          }\n        }\n      }\n\n      // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n      // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n      try {\n        documentSelection.removeAllRanges();\n      } catch (e) {}\n      documentSelection.addRange(range || savedRange);\n    },\n    getRangeText: function () {\n      return this.range + '';\n    },\n    clearButtonPaneStatus: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        activeClasses = prefix + 'active-button ' + prefix + 'active',\n        originalIconClass = prefix + 'original-icon';\n\n      // Reset all buttons and dropdown state\n      $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n      $('.' + originalIconClass, t.$btnPane).each(function () {\n        $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n      });\n    },\n    updateButtonPaneStatus: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        activeClasses = prefix + 'active-button ' + prefix + 'active',\n        originalIconClass = prefix + 'original-icon',\n        tags = t.getTagsRecursive(t.doc.getSelection().anchorNode);\n      t.clearButtonPaneStatus();\n      $.each(tags, function (i, tag) {\n        var btnName = t.tagToButton[tag.toLowerCase()],\n          $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n        if ($btn.length > 0) {\n          $btn.addClass(activeClasses);\n        } else {\n          try {\n            $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n            var $btnSvgUse = $btn.find('svg use'),\n              dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n              $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n              $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n\n            // Highlight the dropdown button\n            $dropdownBtn.addClass(activeClasses);\n\n            // Switch dropdown icon to the active sub-icon one\n            if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n              // Save original icon\n              $dropdownBtn.addClass(originalIconClass).data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n\n              // Put the active sub-button's icon\n              $dropdownBtnSvgUse.attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n            }\n          } catch (e) {}\n        }\n      });\n    },\n    getTagsRecursive: function (element, tags) {\n      var t = this;\n      tags = tags || (element && element.tagName ? [element.tagName] : []);\n      if (element && element.parentNode) {\n        if (element.nodeType !== Node.ELEMENT_NODE) {\n          element = element.parentNode;\n        }\n      } else {\n        return tags;\n      }\n      var tag = element.tagName;\n      if (tag === 'DIV') {\n        return tags;\n      }\n      if (tag === 'P' && element.style.textAlign !== '') {\n        tags.push(element.style.textAlign);\n      }\n      $.each(t.tagHandlers, function (i, tagHandler) {\n        tags = tags.concat(tagHandler(element, t));\n      });\n      tags.push(tag);\n      return t.getTagsRecursive(element.parentNode, tags).filter(function (tag) {\n        return tag != null;\n      });\n    },\n    // Plugins\n    initPlugins: function () {\n      var t = this;\n      t.loadedPlugins = [];\n      $.each($.trumbowyg.plugins, function (name, plugin) {\n        if (!plugin.shouldInit || plugin.shouldInit(t)) {\n          plugin.init(t);\n          if (plugin.tagHandler) {\n            t.tagHandlers.push(plugin.tagHandler);\n          }\n          t.loadedPlugins.push(plugin);\n        }\n      });\n    },\n    destroyPlugins: function () {\n      var t = this;\n      $.each(this.loadedPlugins, function (i, plugin) {\n        if (plugin.destroy) {\n          plugin.destroy(t);\n        }\n      });\n    }\n  };\n})(navigator, window, document, jQuery);","map":{"version":3,"names":["jQuery","trumbowyg","langs","en","viewHTML","undo","redo","formatting","p","blockquote","code","header","bold","italic","strikethrough","underline","strong","em","del","superscript","subscript","unorderedList","orderedList","insertImage","link","createLink","unlink","_self","_blank","justifyLeft","justifyCenter","justifyRight","justifyFull","horizontalRule","removeformat","fullscreen","close","submit","reset","required","description","title","text","target","width","plugins","svgPath","svgAbsoluteUseHref","hideButtonTexts","Object","defineProperty","value","lang","fixedBtnPane","fixedFullWidth","autogrow","autogrowOnEnter","imageWidthModalEdit","prefix","tagClasses","semantic","semanticKeepAttributes","resetCss","removeformatPasted","tabToIndent","tagsToRemove","tagsToKeep","btns","btnsDef","changeActiveDropdownIcon","inlineElementsSelector","pasteHandlers","urlProtocol","minimalLinks","linkTargets","writable","enumerable","configurable","navigator","window","document","$","CONFIRM_EVENT","CANCEL_EVENT","fn","options","params","trumbowygDataName","each","data","Trumbowyg","length","t","execCmd","cmd","param","forceCss","skipTrumbowyg","openModal","content","closeModal","openModalInsert","fields","callback","saveRange","range","getRangeText","restoreRange","setDisabled","toggle","destroy","empty","html","c","editorElem","trumbowygIconsId","$trumbowyg","doc","ownerDocument","$ta","$c","extend","svgPathOption","hasSvg","$scriptElements","i","scriptElement","source","src","matches","match","substring","indexOf","console","warn","div","createElement","id","body","insertBefore","childNodes","fetch","method","headers","then","response","svg","innerHTML","baseHref","querySelector","location","href","replace","hash","h","isBlinkFunction","chrome","Intl","v8BreakIterator","class","isSupported","key","h1","h2","h3","h4","h5","h6","tag","dropdown","ico","o","defaultOptions","hasOwnProperty","imgDblClickHandler","getDefaultImgDblClickHandler","urlPrefix","setupUrlPrefix","disabled","nodeName","btnName","btnDef","addBtnDef","eventNamespace","keys","tagToButton","tagHandlers","concat","isIE","userAgent","appVersion","isMac","platform","toUpperCase","init","prototype","DEFAULT_SEMANTIC_MAP","height","outerHeight","initPlugins","execCommand","e","buildEditor","buildBtnPane","fixedBtnPaneEvents","buildOverlay","setTimeout","trigger","protocol","$box","$edBox","isTextarea","is","val","$ed","appendTo","insertAfter","append","name","attr","syncCode","addClass","contenteditable","dir","_dir","tabindex","semanticCode","ctrl","composition","debounceButtonPaneStatus","on","keyCode","which","toggleSpan","ctrlKey","metaKey","altKey","String","fromCharCode","shiftKey","type","compositionEndIE","event","originalEvent","inputType","clearTimeout","updateButtonPaneStatus","clearButtonPaneStatus","autogrowOnEnterDontClose","autogrowOnEnterWasFocused","autogrowEditorOnEnter","css","block","preventDefault","getSelection","deleteFromDocument","clipboardData","getData","selection","createRange","pasteHTML","getRangeAt","insertNode","createTextNode","d","pasteHandler","removeClass","oldHeight","clientHeight","totalHeight","scrollHeight","$btnPane","btnGrp","Array","isArray","$btnGroup","btn","isSupportedBtn","buildBtn","trim","prepend","isDropdown","hasIcon","textDef","$btn","toLowerCase","mousedown","hasClass","dropdownPrefix","dropdownOptions","dropdownClass","$dropdown","def","buildSubBtn","hide","style","$overlay","showOverlay","fadeIn","hideOverlay","fadeOut","isFixed","scrollTop","offset","top","$buttonPane","buttonPaneOuterHeight","position","left","zIndex","paddingTop","removeAttr","disable","toggleClass","after","show","off","destroyPlugins","remove","removeData","activeElement","blur","addFlag","find","contents","unwrap","$body","btnOffsetLeft","syncTextarea","join","force","safe","full","keepRange","collapsed","semanticTag","blockElementsSelector","filter","nodeType","nodeValue","wrap","wrapInlinesInParagraphsFrom","$from","$finalParagraph","nextUntil","addBack","wrapAll","parent","$nextElement","nextAll","first","next","children","oldTag","copyAttributes","revert","newTag","tmpTag","resetRange","$oldTag","startContainer","parentNode","$newTag","prop","selectNodeContents","get","collapse","documentSelection","selectedRange","node","focusNode","XMLSerializer","serializeToString","cloneContents","url","linkDefaultTarget","$a","selectNode","removeAllRanges","addRange","label","linkUrl","targetOptions","reduce","optionValue","v","prependUrlPrefix","deleteContents","VALID_LINK_PREFIX","test","SIMPLE_EMAIL_REGEX","isCollapsed","undefined","alt","$img","fullscreenCssClass","fullscreenPlaceholderClass","isFullscreen","editorHeight","before","focus","e2","listId","classes","buildForm","$modal","darkClass","parents","one","formOrContent","action","opacity","paddingBottom","animate","prependTo","buildModalBtn","n","$modalBox","lg","idPrefix","Date","now","fieldName","field","l","a","attributes","fieldId","map","isPlainObject","$form","valid","values","$field","addErrorOnModalField","pattern","patternError","err","spanErrorClass","$row","closest","base64","parseInt","rangeCount","savedRange","rangeStart","setEnd","startOffset","metaRange","start","end","charIndex","nodeStack","foundStart","stop","pop","nextCharIndex","setStart","cn","push","activeClasses","originalIconClass","tags","getTagsRecursive","anchorNode","$btnSvgUse","dropdownBtnName","$dropdownBtn","$dropdownBtnSvgUse","element","tagName","Node","ELEMENT_NODE","textAlign","tagHandler","loadedPlugins","plugin","shouldInit"],"sources":["C:/Users/d.Brown/Desktop/d.brown/portfolio/node_modules/trumbowyg/dist/trumbowyg.js"],"sourcesContent":["/**\n * Trumbowyg v2.28.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link https://alex-d.github.io/Trumbowyg/\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\n\njQuery.trumbowyg = {\n    langs: {\n        en: {\n            viewHTML: 'View HTML',\n\n            undo: 'Undo',\n            redo: 'Redo',\n\n            formatting: 'Formatting',\n            p: 'Paragraph',\n            blockquote: 'Quote',\n            code: 'Code',\n            header: 'Header',\n\n            bold: 'Bold',\n            italic: 'Italic',\n            strikethrough: 'Strikethrough',\n            underline: 'Underline',\n\n            strong: 'Strong',\n            em: 'Emphasis',\n            del: 'Deleted',\n\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n\n            unorderedList: 'Unordered list',\n            orderedList: 'Ordered list',\n\n            insertImage: 'Insert Image',\n            link: 'Link',\n            createLink: 'Insert link',\n            unlink: 'Remove link',\n\n            _self: 'Same tab (default)',\n            _blank: 'New tab',\n\n            justifyLeft: 'Align Left',\n            justifyCenter: 'Align Center',\n            justifyRight: 'Align Right',\n            justifyFull: 'Align Justify',\n\n            horizontalRule: 'Insert horizontal rule',\n            removeformat: 'Remove format',\n\n            fullscreen: 'Fullscreen',\n\n            close: 'Close',\n\n            submit: 'Confirm',\n            reset: 'Cancel',\n\n            required: 'Required',\n            description: 'Description',\n            title: 'Title',\n            text: 'Text',\n            target: 'Target',\n            width: 'Width'\n        }\n    },\n\n    // Plugins\n    plugins: {},\n\n    // SVG Path globally\n    svgPath: null,\n    svgAbsoluteUseHref: false,\n\n    hideButtonTexts: null\n};\n\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n    value: {\n        lang: 'en',\n\n        fixedBtnPane: false,\n        fixedFullWidth: false,\n        autogrow: false,\n        autogrowOnEnter: false,\n        imageWidthModalEdit: false,\n        hideButtonTexts: null,\n\n        prefix: 'trumbowyg-',\n        tagClasses: {},\n        semantic: true,\n        semanticKeepAttributes: false,\n        resetCss: false,\n        removeformatPasted: false,\n        tabToIndent: false,\n        tagsToRemove: [],\n        tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n        btns: [\n            ['viewHTML'],\n            ['undo', 'redo'], // Only supported in Blink browsers\n            ['formatting'],\n            ['strong', 'em', 'del'],\n            ['superscript', 'subscript'],\n            ['link'],\n            ['insertImage'],\n            ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            ['unorderedList', 'orderedList'],\n            ['horizontalRule'],\n            ['removeformat'],\n            ['fullscreen']\n        ],\n        // For custom button definitions\n        btnsDef: {},\n        changeActiveDropdownIcon: false,\n\n        inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n\n        pasteHandlers: [],\n\n        // imgDblClickHandler: default is defined in constructor\n\n        plugins: {},\n\n        urlProtocol: false,\n        minimalLinks: false,\n        linkTargets: ['_self', '_blank'],\n\n        svgPath: null\n    },\n    writable: false,\n    enumerable: true,\n    configurable: false\n});\n\n(function (navigator, window, document, $) {\n    'use strict';\n\n    var CONFIRM_EVENT = 'tbwconfirm',\n        CANCEL_EVENT = 'tbwcancel';\n\n    $.fn.trumbowyg = function (options, params) {\n        var trumbowygDataName = 'trumbowyg';\n        if (options === Object(options) || !options) {\n            return this.each(function () {\n                if (!$(this).data(trumbowygDataName)) {\n                    $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n                }\n            });\n        }\n        if (this.length === 1) {\n            try {\n                var t = $(this).data(trumbowygDataName);\n                switch (options) {\n                    // Exec command\n                    case 'execCmd':\n                        return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n\n                    // Modal box\n                    case 'openModal':\n                        return t.openModal(params.title, params.content);\n                    case 'closeModal':\n                        return t.closeModal();\n                    case 'openModalInsert':\n                        return t.openModalInsert(params.title, params.fields, params.callback);\n\n                    // Range\n                    case 'saveRange':\n                        return t.saveRange();\n                    case 'getRange':\n                        return t.range;\n                    case 'getRangeText':\n                        return t.getRangeText();\n                    case 'restoreRange':\n                        return t.restoreRange();\n\n                    // Enable/disable\n                    case 'enable':\n                        return t.setDisabled(false);\n                    case 'disable':\n                        return t.setDisabled(true);\n\n                    // Toggle\n                    case 'toggle':\n                        return t.toggle();\n\n                    // Destroy\n                    case 'destroy':\n                        return t.destroy();\n\n                    // Empty\n                    case 'empty':\n                        return t.empty();\n\n                    // HTML\n                    case 'html':\n                        return t.html(params);\n                }\n            } catch (c) {\n            }\n        }\n\n        return false;\n    };\n\n    // @param: editorElem is the DOM element\n    var Trumbowyg = function (editorElem, options) {\n        var t = this,\n            trumbowygIconsId = 'trumbowyg-icons',\n            $trumbowyg = $.trumbowyg;\n\n        // Get the document of the element. It use to makes the plugin\n        // compatible on iframes.\n        t.doc = editorElem.ownerDocument || document;\n\n        // jQuery object of the editor\n        t.$ta = $(editorElem); // $ta : Textarea\n        t.$c = $(editorElem); // $c : creator\n\n        options = options || {};\n\n        // Localization management\n        if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n            t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n        } else {\n            t.lang = $trumbowyg.langs.en;\n        }\n\n        t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n\n        // SVG path\n        var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n        t.hasSvg = svgPathOption !== false;\n\n        if (svgPathOption !== false && ($trumbowyg.svgAbsoluteUseHref || $('#' + trumbowygIconsId, t.doc).length === 0)) {\n            if (svgPathOption == null) {\n                // Hack to get svgPathOption based on trumbowyg.js path\n                var $scriptElements = $('script[src]');\n                $scriptElements.each(function (i, scriptElement) {\n                    var source = scriptElement.src;\n                    var matches = source.match('trumbowyg(\\.min)?\\.js');\n                    if (matches != null) {\n                        svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n                    }\n                });\n            }\n\n            // Do not merge with previous if block: svgPathOption can be redefined in it.\n            // Here we are checking that we find a match\n            if (svgPathOption == null) {\n                console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n            } else if (!$trumbowyg.svgAbsoluteUseHref) {\n                var div = t.doc.createElement('div');\n                div.id = trumbowygIconsId;\n                t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n                fetch(svgPathOption, {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n                    }\n                }).then((response) => {\n                    response.text()\n                        .then((svg) => {\n                            div.innerHTML = svg;\n                        });\n                });\n            }\n        }\n\n        var baseHref = !!t.doc.querySelector('base') ? window.location.href.replace(window.location.hash, '') : '';\n        t.svgPath = $trumbowyg.svgAbsoluteUseHref ? svgPathOption : baseHref;\n\n\n        /**\n         * When the button is associated to a empty object\n         * fn and title attributes are defined from the button key value\n         *\n         * For example\n         *      foo: {}\n         * is equivalent to :\n         *      foo: {\n         *          fn: 'foo',\n         *          title: this.lang.foo\n         *      }\n         */\n        var h = t.lang.header, // Header translation\n            isBlinkFunction = function () {\n                return (window.chrome || (window.Intl && Intl.v8BreakIterator)) && 'CSS' in window;\n            };\n        t.btnsDef = {\n            viewHTML: {\n                fn: 'toggle',\n                class: 'trumbowyg-not-disable',\n            },\n\n            undo: {\n                isSupported: isBlinkFunction,\n                key: 'Z'\n            },\n            redo: {\n                isSupported: isBlinkFunction,\n                key: 'Y'\n            },\n\n            p: {\n                fn: 'formatBlock'\n            },\n            blockquote: {\n                fn: 'formatBlock'\n            },\n            h1: {\n                fn: 'formatBlock',\n                title: h + ' 1'\n            },\n            h2: {\n                fn: 'formatBlock',\n                title: h + ' 2'\n            },\n            h3: {\n                fn: 'formatBlock',\n                title: h + ' 3'\n            },\n            h4: {\n                fn: 'formatBlock',\n                title: h + ' 4'\n            },\n            h5: {\n                fn: 'formatBlock',\n                title: h + ' 5'\n            },\n            h6: {\n                fn: 'formatBlock',\n                title: h + ' 6'\n            },\n            subscript: {\n                tag: 'sub'\n            },\n            superscript: {\n                tag: 'sup'\n            },\n\n            bold: {\n                key: 'B',\n                tag: 'b'\n            },\n            italic: {\n                key: 'I',\n                tag: 'i'\n            },\n            underline: {\n                tag: 'u'\n            },\n            strikethrough: {\n                tag: 'strike'\n            },\n\n            strong: {\n                fn: 'bold',\n                key: 'B'\n            },\n            em: {\n                fn: 'italic',\n                key: 'I'\n            },\n            del: {\n                fn: 'strikethrough'\n            },\n\n            createLink: {\n                key: 'K',\n                tag: 'a'\n            },\n            unlink: {},\n\n            insertImage: {},\n\n            justifyLeft: {\n                tag: 'left',\n                forceCss: true\n            },\n            justifyCenter: {\n                tag: 'center',\n                forceCss: true\n            },\n            justifyRight: {\n                tag: 'right',\n                forceCss: true\n            },\n            justifyFull: {\n                tag: 'justify',\n                forceCss: true\n            },\n\n            unorderedList: {\n                fn: 'insertUnorderedList',\n                tag: 'ul'\n            },\n            orderedList: {\n                fn: 'insertOrderedList',\n                tag: 'ol'\n            },\n\n            horizontalRule: {\n                fn: 'insertHorizontalRule'\n            },\n\n            removeformat: {},\n\n            fullscreen: {\n                class: 'trumbowyg-not-disable'\n            },\n            close: {\n                fn: 'destroy',\n                class: 'trumbowyg-not-disable'\n            },\n\n            // Dropdowns\n            formatting: {\n                dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n                ico: 'p'\n            },\n            link: {\n                dropdown: ['createLink', 'unlink']\n            }\n        };\n\n        // Default Options\n        t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n        if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n            t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n        }\n\n        t.urlPrefix = t.setupUrlPrefix();\n\n        t.disabled = t.o.disabled || (editorElem.nodeName === 'TEXTAREA' && editorElem.disabled);\n\n        if (options.btns) {\n            t.o.btns = options.btns;\n        } else if (!t.o.semantic) {\n            t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n        }\n\n        $.each(t.o.btnsDef, function (btnName, btnDef) {\n            t.addBtnDef(btnName, btnDef);\n        });\n\n        // put this here in the event it would be merged in with options\n        t.eventNamespace = 'trumbowyg-event';\n\n        // Keyboard shortcuts are load in this array\n        t.keys = [];\n\n        // Tag to button dynamically hydrated\n        t.tagToButton = {};\n        t.tagHandlers = [];\n\n        // Admit multiple paste handlers\n        t.pasteHandlers = [].concat(t.o.pasteHandlers);\n\n        // Check if browser is IE\n        t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n\n        // Check if we are on macOs\n        t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n\n        t.init();\n    };\n\n    Trumbowyg.prototype = {\n        DEFAULT_SEMANTIC_MAP: {\n            'b': 'strong',\n            'i': 'em',\n            's': 'del',\n            'strike': 'del',\n            'div': 'p'\n        },\n\n        init: function () {\n            var t = this;\n            t.height = t.$ta.outerHeight() - 39; // Remove button pane height\n\n            t.initPlugins();\n\n            try {\n                // Disable image resize, try-catch for old IE\n                t.doc.execCommand('enableObjectResizing', false, false);\n                t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n            } catch (e) {\n            }\n\n            t.buildEditor();\n            t.buildBtnPane();\n\n            t.fixedBtnPaneEvents();\n\n            t.buildOverlay();\n\n            setTimeout(function () {\n                if (t.disabled) {\n                    t.setDisabled(true);\n                }\n                t.$c.trigger('tbwinit');\n            });\n        },\n\n        addBtnDef: function (btnName, btnDef) {\n            this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n        },\n\n        setupUrlPrefix: function () {\n            var protocol = this.o.urlProtocol;\n            if (!protocol) {\n                return;\n            }\n\n            if (typeof (protocol) !== 'string') {\n                return 'https://';\n            }\n            return protocol.replace('://', '') + '://';\n        },\n\n        buildEditor: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                html = '';\n\n            t.$box = $('<div/>', {\n                class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n            });\n\n            t.$edBox = $('<div/>', {\n                class: prefix + 'editor-box',\n            });\n\n            // $ta = Textarea\n            // $ed = Editor\n            t.isTextarea = t.$ta.is('textarea');\n            if (t.isTextarea) {\n                html = t.$ta.val();\n                t.$ed = $('<div/>')\n                    .appendTo(t.$edBox);\n                t.$box\n                    .insertAfter(t.$ta)\n                    .append(t.$edBox, t.$ta);\n            } else {\n                t.$ed = t.$ta;\n                html = t.$ed.html();\n\n                t.$ta = $('<textarea/>', {\n                    name: t.$ta.attr('id'),\n                    height: t.height\n                }).val(html);\n\n                t.$box\n                    .insertAfter(t.$ed)\n                    .append(t.$ta, t.$edBox);\n                t.$edBox.append(t.$ed);\n                t.syncCode();\n            }\n\n            t.$ta\n                .addClass(prefix + 'textarea')\n                .attr('tabindex', -1)\n            ;\n\n            t.$ed\n                .addClass(prefix + 'editor')\n                .attr({\n                    contenteditable: true,\n                    dir: t.lang._dir || 'ltr'\n                })\n                .html(html)\n            ;\n\n            if (t.o.tabindex) {\n                t.$ed.attr('tabindex', t.o.tabindex);\n            }\n\n            if (t.$c.is('[placeholder]')) {\n                t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n            }\n\n            if (t.$c.is('[spellcheck]')) {\n                t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n            }\n\n            if (t.o.resetCss) {\n                t.$ed.addClass(prefix + 'reset-css');\n            }\n\n            t.semanticCode();\n\n            if (t.o.autogrowOnEnter) {\n                t.$ed.addClass(prefix + 'autogrow-on-enter');\n            }\n\n            var ctrl = false,\n                composition = false,\n                debounceButtonPaneStatus;\n\n            t.$ed\n                .on('dblclick', 'img', t.o.imgDblClickHandler)\n                .on('keydown', function (e) {\n                    // append flags to differentiate Chrome spans\n                    var keyCode = e.which;\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan(true);\n                    }\n                    if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                        ctrl = true;\n                        var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n\n                        try {\n                            t.execCmd(key.fn, key.param);\n                            return false;\n                        } catch (c) {\n                        }\n                    } else {\n                        if (t.o.tabToIndent && e.key === 'Tab') {\n                            try {\n                                if (e.shiftKey) {\n                                    t.execCmd('outdent', true, null);\n                                } else {\n                                    t.execCmd('indent', true, null);\n                                }\n                                return false;\n                            } catch (c) {\n                            }\n                        }\n                    }\n                })\n                .on('compositionstart compositionupdate', function () {\n                    composition = true;\n                })\n                .on('keyup compositionend', function (e) {\n                    if (e.type === 'compositionend') {\n                        composition = false;\n                    } else if (composition) {\n                        return;\n                    }\n\n                    var keyCode = e.which;\n\n                    if (keyCode >= 37 && keyCode <= 40) {\n                        return;\n                    }\n\n                    // remove Chrome generated span tags\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan();\n                    }\n\n                    if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    } else if (!ctrl && keyCode !== 16 && keyCode !== 17) {\n                        var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n                        t.semanticCode(false, compositionEndIE && keyCode === 13);\n                        t.$c.trigger('tbwchange');\n                    } else if (typeof e.which === 'undefined') {\n                        t.semanticCode(false, false, true);\n                    }\n\n                    setTimeout(function () {\n                        ctrl = false;\n                    }, 50);\n                })\n                .on('input', function (e) {\n                    // Trigger change event when spelling fixes applied\n                    var event = e.originalEvent;\n                    if (typeof event === 'object' && (event.inputType === 'insertReplacementText' ||\n                        (event.inputType === 'insertText' && event.data === null))) {\n                        t.$c.trigger('tbwchange');\n                    }\n                })\n                .on('mouseup keydown keyup', function (e) {\n                    if ((!e.ctrlKey && !e.metaKey) || e.altKey) {\n                        setTimeout(function () { // \"hold on\" to the ctrl key for 50ms\n                            ctrl = false;\n                        }, 50);\n                    }\n                    clearTimeout(debounceButtonPaneStatus);\n                    debounceButtonPaneStatus = setTimeout(function () {\n                        t.updateButtonPaneStatus();\n                    }, 50);\n                })\n                .on('focus blur', function (e) {\n                    if (e.type === 'blur') {\n                        t.clearButtonPaneStatus();\n                    }\n                    t.$c.trigger('tbw' + e.type);\n                    if (t.o.autogrowOnEnter) {\n                        if (t.autogrowOnEnterDontClose) {\n                            return;\n                        }\n                        if (e.type === 'focus') {\n                            t.autogrowOnEnterWasFocused = true;\n                            t.autogrowEditorOnEnter();\n                        } else if (!t.o.autogrow) {\n                            t.$edBox.css({height: t.$edBox.css('min-height')});\n                            t.$c.trigger('tbwresize');\n                        }\n                    }\n                })\n                .on('keyup focus', function () {\n                  if (!t.$ta.val().match(/<.*>/) && !t.$ed.html().match(/<.*>/)) {\n                        setTimeout(function () {\n                            var block = t.isIE ? '<p>' : 'p';\n                            t.doc.execCommand('formatBlock', false, block);\n                            t.syncCode();\n                        }, 0);\n                    }\n                })\n                .on('cut drop', function () {\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                })\n                .on('paste', function (e) {\n                    if (t.o.removeformatPasted) {\n                        e.preventDefault();\n\n                        if (window.getSelection && window.getSelection().deleteFromDocument) {\n                            window.getSelection().deleteFromDocument();\n                        }\n\n                        try {\n                            // IE\n                            var text = window.clipboardData.getData('Text');\n\n                            try {\n                                // <= IE10\n                                t.doc.selection.createRange().pasteHTML(text);\n                            } catch (c) {\n                                // IE 11\n                                t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n                            }\n                            t.$c.trigger('tbwchange', e);\n                        } catch (d) {\n                            // Not IE\n                            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n                        }\n                    }\n\n                    // Call pasteHandlers\n                    $.each(t.pasteHandlers, function (i, pasteHandler) {\n                        pasteHandler(e);\n                    });\n\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwpaste', e);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            t.$ta\n                .on('keyup', function () {\n                    t.$c.trigger('tbwchange');\n                })\n                .on('paste', function () {\n                    setTimeout(function () {\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n                if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n                    t.closeModal();\n                    return false;\n                }\n            });\n        },\n\n        //autogrow when entering logic\n        autogrowEditorOnEnter: function () {\n            var t = this;\n            t.$ed.removeClass('autogrow-on-enter');\n            var oldHeight = t.$ed[0].clientHeight;\n            t.$edBox.height('auto');\n            var totalHeight = t.$ed[0].scrollHeight;\n            t.$ed.addClass('autogrow-on-enter');\n            if (oldHeight !== totalHeight) {\n                t.$edBox.height(oldHeight);\n                setTimeout(function () {\n                    t.$edBox.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }, 0);\n            }\n        },\n\n\n        // Build button pane, use o.btns option\n        buildBtnPane: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            var $btnPane = t.$btnPane = $('<div/>', {\n                class: prefix + 'button-pane'\n            });\n\n            $.each(t.o.btns, function (i, btnGrp) {\n                if (!Array.isArray(btnGrp)) {\n                    btnGrp = [btnGrp];\n                }\n\n                var $btnGroup = $('<div/>', {\n                    class: prefix + 'button-group ' + ((btnGrp.indexOf('fullscreen') >= 0) ? prefix + 'right' : '')\n                });\n                $.each(btnGrp, function (i, btn) {\n                    try { // Prevent buildBtn error\n                        if (t.isSupportedBtn(btn)) { // It's a supported button\n                            $btnGroup.append(t.buildBtn(btn));\n                        }\n                    } catch (c) {\n                    }\n                });\n\n                if ($btnGroup.html().trim().length > 0) {\n                    $btnPane.append($btnGroup);\n                }\n            });\n\n            t.$box.prepend($btnPane);\n        },\n\n\n        // Build a button and his action\n        buildBtn: function (btnName) { // btnName is name of the button\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                isDropdown = btn.dropdown,\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n                textDef = t.lang[btnName] || btnName,\n\n                $btn = $('<button/>', {\n                    type: 'button',\n                    class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n                    html: t.hasSvg && hasIcon ?\n                        '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' :\n                        t.hideButtonTexts ? '' : (btn.text || btn.title || t.lang[btnName] || btnName),\n                    title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n                    tabindex: -1,\n                    mousedown: function () {\n                        if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n                            $('body', t.doc).trigger('mousedown');\n                        }\n\n                        if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) &&\n                            !$(this).hasClass(prefix + 'active') &&\n                            !$(this).hasClass(prefix + 'not-disable')) {\n                            return false;\n                        }\n\n                        t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                        return false;\n                    }\n                });\n\n            if (isDropdown) {\n                $btn.addClass(prefix + 'open-dropdown');\n                var dropdownPrefix = prefix + 'dropdown',\n                    dropdownOptions = { // the dropdown\n                        class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n                    };\n                dropdownOptions['data-' + dropdownPrefix] = btnName;\n                var $dropdown = $('<div/>', dropdownOptions);\n                $.each(isDropdown, function (i, def) {\n                    if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n                        $dropdown.append(t.buildSubBtn(def));\n                    }\n                });\n                t.$box.append($dropdown.hide());\n            } else if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            if (!isDropdown) {\n                t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n            }\n\n            return $btn;\n        },\n        // Build a button for dropdown menu\n        // @param n : name of the subbutton\n        buildSubBtn: function (btnName) {\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n\n            if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n\n            return $('<button/>', {\n                type: 'button',\n                class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n                html: t.hasSvg && hasIcon ?\n                    '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) :\n                    (btn.text || btn.title || t.lang[btnName] || btnName),\n                title: (btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null),\n                style: btn.style || null,\n                mousedown: function () {\n                    $('body', t.doc).trigger('mousedown');\n\n                    t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                    return false;\n                }\n            });\n        },\n        // Check if button is supported\n        isSupportedBtn: function (btnName) {\n            try {\n                return this.btnsDef[btnName].isSupported();\n            } catch (e) {\n            }\n            return true;\n        },\n\n        // Build overlay for modal box\n        buildOverlay: function () {\n            var t = this;\n            t.$overlay = $('<div/>', {\n                class: t.o.prefix + 'overlay'\n            }).appendTo(t.$box);\n            return t.$overlay;\n        },\n        showOverlay: function () {\n            var t = this;\n            $(window).trigger('scroll');\n            t.$overlay.fadeIn(200);\n            t.$box.addClass(t.o.prefix + 'box-blur');\n        },\n        hideOverlay: function () {\n            var t = this;\n            t.$overlay.fadeOut(50);\n            t.$box.removeClass(t.o.prefix + 'box-blur');\n        },\n\n        // Management of fixed button pane\n        fixedBtnPaneEvents: function () {\n            var t = this,\n                fixedFullWidth = t.o.fixedFullWidth,\n                $box = t.$box;\n\n            if (!t.o.fixedBtnPane) {\n                return;\n            }\n\n            t.isFixed = false;\n\n            $(window)\n                .on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n                    if (!$box) {\n                        return;\n                    }\n\n                    t.syncCode();\n\n                    var scrollTop = $(window).scrollTop(),\n                        offset = $box.offset().top + 1,\n                        $buttonPane = t.$btnPane,\n                        buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n\n                    if ((scrollTop - offset > 0) && ((scrollTop - offset - t.height) < 0)) {\n                        if (!t.isFixed) {\n                            t.isFixed = true;\n                            $buttonPane.css({\n                                position: 'fixed',\n                                top: 0,\n                                left: fixedFullWidth ? 0 : 'auto',\n                                zIndex: 7\n                            });\n                            t.$box.css({paddingTop: $buttonPane.height()});\n                        }\n                        $buttonPane.css({\n                            width: fixedFullWidth ? '100%' : (($box.width() - 1))\n                        });\n\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: fixedFullWidth ? 'fixed' : 'absolute',\n                            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n                            zIndex: 15\n                        });\n                    } else if (t.isFixed) {\n                        t.isFixed = false;\n                        $buttonPane.removeAttr('style');\n                        t.$box.css({paddingTop: 0});\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: 'absolute',\n                            top: buttonPaneOuterHeight\n                        });\n                    }\n                });\n        },\n\n        // Disable editor\n        setDisabled: function (disable) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.disabled = disable;\n\n            if (disable) {\n                t.$ta.attr('disabled', true);\n            } else {\n                t.$ta.removeAttr('disabled');\n            }\n            t.$box.toggleClass(prefix + 'disabled', disable);\n            t.$ed.attr('contenteditable', !disable);\n        },\n\n        // Destroy the editor\n        destroy: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.isTextarea) {\n                t.$box.after(\n                    t.$ta\n                        .css({height: ''})\n                        .val(t.html())\n                        .removeClass(prefix + 'textarea')\n                        .show()\n                );\n            } else {\n                t.$box.after(\n                    t.$edBox\n                        .css({height: ''})\n                        .removeClass(prefix + 'editor')\n                        .removeAttr('contenteditable')\n                        .removeAttr('dir')\n                        .html(t.html())\n                        .show()\n                );\n            }\n\n            t.$ed.off('dblclick', 'img');\n\n            t.destroyPlugins();\n\n            t.$box.remove();\n            t.$c.removeData('trumbowyg');\n            $('body').removeClass(prefix + 'body-fullscreen');\n            t.$c.trigger('tbwclose');\n            $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n            $(t.doc.body).off('keydown.' + t.eventNamespace);\n        },\n\n\n        // Empty the editor\n        empty: function () {\n            this.doc.execCommand('insertHTML', false, '');\n            this.$ta.val('');\n            this.syncCode(true);\n        },\n\n\n        // Function call when click on viewHTML button\n        toggle: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n            }\n\n            t.semanticCode(false, true);\n            t.$c.trigger('tbwchange');\n\n            setTimeout(function () {\n                t.doc.activeElement.blur();\n                t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                t.$btnPane.toggleClass(prefix + 'disable');\n                $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n                if (t.$box.hasClass(prefix + 'editor-visible')) {\n                    t.$ta.attr('tabindex', -1);\n                } else {\n                    t.$ta.removeAttr('tabindex');\n                }\n\n                if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n                    t.autogrowEditorOnEnter();\n                }\n            }, 0);\n        },\n\n        // Remove or add flags to span tags to remove Chrome generated spans\n        toggleSpan: function (addFlag) {\n            var t = this;\n            t.$ed.find('span').each(function () {\n                if (addFlag === true) {\n                    $(this).attr('data-tbw-flag', true);\n                } else {\n                    if ($(this).attr('data-tbw-flag')) {\n                        $(this).removeAttr('data-tbw-flag');\n                    } else {\n                        $(this).contents().unwrap();\n                    }\n                }\n            });\n        },\n\n        // Open dropdown when click on a button which open that\n        dropdown: function (name) {\n            var t = this,\n                $body = $('body', t.doc),\n                prefix = t.o.prefix,\n                $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n                $btn = $('.' + prefix + name + '-button', t.$btnPane),\n                show = $dropdown.is(':hidden');\n\n            $body.trigger('mousedown');\n\n            if (show) {\n                var btnOffsetLeft = $btn.offset().left;\n                $btn.addClass(prefix + 'active');\n\n                $dropdown.css({\n                    position: 'absolute',\n                    top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n                    left: (t.o.fixedFullWidth && t.isFixed) ? btnOffsetLeft : (btnOffsetLeft - t.$btnPane.offset().left)\n                }).show();\n\n                $(window).trigger('scroll');\n\n                $body.on('mousedown.' + t.eventNamespace, function (e) {\n                    if (!$dropdown.is(e.target)) {\n                        $('.' + prefix + 'dropdown', t.$box).hide();\n                        $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n                        $body.off('mousedown.' + t.eventNamespace);\n                    }\n                });\n            }\n        },\n\n\n        // HTML Code management\n        html: function (html) {\n            var t = this;\n\n            if (html != null) {\n                t.$ta.val(html);\n                t.syncCode(true);\n                t.$c.trigger('tbwchange');\n                return t;\n            }\n\n            return t.$ta.val();\n        },\n        syncTextarea: function () {\n            var t = this;\n            t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n        },\n        syncCode: function (force) {\n            var t = this;\n            if (!force && t.$ed.is(':visible')) {\n                t.syncTextarea();\n            } else {\n                // wrap the content in a div it's easier to get the inner html\n                var html = $('<div>').html(t.$ta.val());\n                // scrub the html before loading into the doc\n                var safe = $('<div>').append(html);\n                $(t.o.tagsToRemove.join(','), safe).remove();\n                t.$ed.html(safe.contents().html());\n            }\n\n            if (t.o.autogrow) {\n                t.height = t.$edBox.height();\n                if (t.height !== t.$ta.css('height')) {\n                    t.$ta.css({height: t.height});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n            if (t.o.autogrowOnEnter) {\n                t.$edBox.height('auto');\n                var totalHeight = t.autogrowOnEnterWasFocused ? t.$edBox[0].scrollHeight : t.$edBox.css('min-height');\n                if (totalHeight !== t.$ta.css('height')) {\n                    t.$edBox.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n        },\n\n        // Analyse and update to semantic code\n        // @param force : force to sync code from textarea\n        // @param full  : wrap text nodes in <p>\n        // @param keepRange  : leave selection range as it is\n        semanticCode: function (force, full, keepRange) {\n            var t = this;\n            t.saveRange();\n            t.syncCode(force);\n\n            var restoreRange = true;\n            if (t.range && t.range.collapsed) {\n                restoreRange = false;\n            }\n\n            if (t.o.semantic) {\n                t.semanticTag('b', t.o.semanticKeepAttributes);\n                t.semanticTag('i', t.o.semanticKeepAttributes);\n                t.semanticTag('s', t.o.semanticKeepAttributes);\n                t.semanticTag('strike', t.o.semanticKeepAttributes);\n\n                if (full) {\n                    var inlineElementsSelector = t.o.inlineElementsSelector,\n                        blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n\n                    // Wrap text nodes in span for easier processing\n                    t.$ed.contents().filter(function () {\n                        return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n                    }).wrap('<span data-tbw/>');\n\n                    // Wrap groups of inline elements in paragraphs (recursive)\n                    var wrapInlinesInParagraphsFrom = function ($from) {\n                        if ($from.length !== 0) {\n                            var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n                            $finalParagraph.next('br').remove();\n                            wrapInlinesInParagraphsFrom($nextElement);\n                        }\n                    };\n                    wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n\n                    t.semanticTag('div', true);\n\n                    // Get rid of temporary span's\n                    $('[data-tbw]', t.$ed).contents().unwrap();\n\n                    // Remove empty <p>\n                    t.$ed.find('p:empty').remove();\n                }\n\n                if (!keepRange && restoreRange) {\n                    t.restoreRange();\n                }\n\n                t.syncTextarea();\n            }\n        },\n\n        semanticTag: function (oldTag, copyAttributes, revert) {\n            var newTag, t = this;\n            var tmpTag = oldTag;\n\n            if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n                newTag = this.o.semantic[oldTag];\n            } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n                newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n            } else {\n                return;\n            }\n\n            if(revert) {\n                oldTag = newTag;\n                newTag = tmpTag;\n            }\n\n            $(oldTag, this.$ed).each(function () {\n                var resetRange = false;\n                var $oldTag = $(this);\n                if ($oldTag.contents().length === 0) {\n                    return false;\n                }\n\n                if (t.range && t.range.startContainer.parentNode === this) {\n                    resetRange = true;\n                }\n                var $newTag = $('<' + newTag + '/>');\n                $newTag.insertBefore($oldTag);\n                if (copyAttributes) {\n                    $.each($oldTag.prop('attributes'), function () {\n                        $newTag.attr(this.name, this.value);\n                    });\n                }\n                $newTag.html($oldTag.html());\n                $oldTag.remove();\n                if(resetRange === true) {\n                    t.range.selectNodeContents($newTag.get(0));\n                    t.range.collapse(false);\n                }\n            });\n        },\n\n        // Function call when user click on \"Insert Link\"\n        createLink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                selectedRange = documentSelection.getRangeAt(0),\n                node = documentSelection.focusNode,\n                text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n                url,\n                title,\n                target,\n                linkDefaultTarget = t.o.linkTargets[0];\n\n            while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                node = node.parentNode;\n            }\n\n            if (node && node.nodeName === 'A') {\n                var $a = $(node);\n                text = $a.text();\n                url = $a.attr('href');\n                if (!t.o.minimalLinks) {\n                    title = $a.attr('title');\n                    target = $a.attr('target') || linkDefaultTarget;\n                }\n                var range = t.doc.createRange();\n                range.selectNode(node);\n                documentSelection.removeAllRanges();\n                documentSelection.addRange(range);\n            }\n\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: t.lang.linkUrl || 'URL',\n                    required: true,\n                    value: url\n                },\n                text: {\n                    label: t.lang.text,\n                    value: text\n                }\n            };\n            if (!t.o.minimalLinks) {\n                var targetOptions = t.o.linkTargets.reduce(function (options, optionValue) {\n                    options[optionValue] = t.lang[optionValue];\n\n                    return options;\n                }, {});\n\n                $.extend(options, {\n                    title: {\n                        label: t.lang.title,\n                        value: title\n                    },\n                    target: {\n                        label: t.lang.target,\n                        value: target,\n                        options: targetOptions\n                    }\n                });\n            }\n\n            t.openModalInsert(t.lang.createLink, options, function (v) { // v is value\n                var url = t.prependUrlPrefix(v.url);\n                if (!url.length) {\n                    return false;\n                }\n\n                var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n\n                if (v.title) {\n                    link.attr('title', v.title);\n                }\n                if (v.target || linkDefaultTarget) {\n                    link.attr('target', v.target || linkDefaultTarget);\n                }\n                t.range.deleteContents();\n                t.range.insertNode(link[0]);\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n                return true;\n            });\n        },\n        prependUrlPrefix: function (url) {\n            var t = this;\n            if (!t.urlPrefix) {\n                return url;\n            }\n\n            var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n            if (VALID_LINK_PREFIX.test(url)) {\n                return url;\n            }\n\n            var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (SIMPLE_EMAIL_REGEX.test(url)) {\n                return 'mailto:' + url;\n            }\n\n            return t.urlPrefix + url;\n        },\n        unlink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                node = documentSelection.focusNode;\n\n            if (documentSelection.isCollapsed) {\n                while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                    node = node.parentNode;\n                }\n\n                if (node && node.nodeName === 'A') {\n                    var range = t.doc.createRange();\n                    range.selectNode(node);\n                    documentSelection.removeAllRanges();\n                    documentSelection.addRange(range);\n                }\n            }\n            t.execCmd('unlink', undefined, undefined, true);\n        },\n        insertImage: function () {\n            var t = this;\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: 'URL',\n                    required: true\n                },\n                alt: {\n                    label: t.lang.description,\n                    value: t.getRangeText()\n                }\n            };\n\n            if (t.o.imageWidthModalEdit) {\n                options.width = {};\n            }\n\n            t.openModalInsert(t.lang.insertImage, options, function (v) { // v are values\n                t.execCmd('insertImage', v.url, false, true);\n                var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n                $img.attr('alt', v.alt);\n\n                if (t.o.imageWidthModalEdit) {\n                    $img.attr({\n                        width: v.width\n                    });\n                }\n\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n\n                return true;\n            });\n        },\n        fullscreen: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                fullscreenCssClass = prefix + 'fullscreen',\n                fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n                isFullscreen,\n                editorHeight = t.$box.outerHeight();\n\n            t.$box.toggleClass(fullscreenCssClass);\n            isFullscreen = t.$box.hasClass(fullscreenCssClass);\n\n            if (isFullscreen) {\n                t.$box.before(\n                    $('<div/>', {\n                        class: fullscreenPlaceholderClass\n                    }).css({\n                        height: editorHeight\n                    })\n                );\n            } else {\n                $('.' + fullscreenPlaceholderClass).remove();\n            }\n\n            $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n            $(window).trigger('scroll');\n            t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n        },\n\n\n        /*\n         * Call method of trumbowyg if exist\n         * else try to call anonymous function\n         * and finally native execCommand\n         */\n        execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n            var t = this;\n            skipTrumbowyg = !!skipTrumbowyg || '';\n\n            if (cmd !== 'dropdown') {\n                t.$ed.focus();\n            }\n\n            if(cmd === 'strikethrough' && t.o.semantic) {\n                t.semanticTag('strike', t.o.semanticKeepAttributes, true); // browsers cannot undo e.g. <del> as they expect <strike>\n            }\n\n            try {\n                t.doc.execCommand('styleWithCSS', false, forceCss || false);\n            } catch (c) {\n            }\n\n            try {\n                t[cmd + skipTrumbowyg](param);\n            } catch (c) {\n                try {\n                    cmd(param);\n                } catch (e2) {\n                    if (cmd === 'insertHorizontalRule') {\n                        param = undefined;\n                    } else if (cmd === 'formatBlock' && t.isIE) {\n                        param = '<' + param + '>';\n                    }\n\n                    t.doc.execCommand(cmd, false, param);\n\n                    t.syncCode();\n                    t.semanticCode(false, true);\n                    try {\n                        var listId = window.getSelection().focusNode;\n                        if(!$(window.getSelection().focusNode.parentNode).hasClass('trumbowyg-editor')){\n                            listId = window.getSelection().focusNode.parentNode;\n                        }\n                        var classes = t.o.tagClasses[param];\n                        if (classes) {\n                            $(listId).addClass(classes);\n                        }\n                    } catch (e) {\n\n                    }\n\n                }\n\n                if (cmd !== 'dropdown') {\n                    t.updateButtonPaneStatus();\n                    t.$c.trigger('tbwchange');\n                }\n            }\n        },\n\n\n        // Open a modal box\n        openModal: function (title, content, buildForm) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            buildForm = buildForm !== false;\n\n            // No open a modal box when exist other modal box\n            if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n                return false;\n            }\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = true;\n            }\n\n            t.saveRange();\n            t.showOverlay();\n\n            // Disable all btnPane btns\n            t.$btnPane.addClass(prefix + 'disable');\n\n            // Build out of ModalBox, it's the mask for animations\n            var $modal = $('<div/>', {\n                class: prefix + 'modal ' + prefix + 'fixed-top'\n            }).css({\n                top: t.$box.offset().top + t.$btnPane.height(),\n                zIndex: 99999\n            }).appendTo($(t.doc.body));\n\n            var darkClass = prefix + 'dark';\n            if (t.$c.parents('.' + darkClass).length !== 0) {\n                $modal.addClass(darkClass);\n            }\n\n            // Click on overlay close modal by cancelling them\n            t.$overlay.one('click', function () {\n                $modal.trigger(CANCEL_EVENT);\n                return false;\n            });\n\n            // Build the form\n            var formOrContent;\n            if (buildForm) {\n                formOrContent = $('<form/>', {\n                    action: '',\n                    html: content\n                })\n                    .on('submit', function () {\n                        $modal.trigger(CONFIRM_EVENT);\n                        return false;\n                    })\n                    .on('reset', function () {\n                        $modal.trigger(CANCEL_EVENT);\n                        return false;\n                    })\n                    .on('submit reset', function () {\n                        if (t.o.autogrowOnEnter) {\n                            t.autogrowOnEnterDontClose = false;\n                        }\n                    });\n            } else {\n                formOrContent = content;\n            }\n\n\n            // Build ModalBox and animate to show them\n            var $box = $('<div/>', {\n                class: prefix + 'modal-box',\n                html: formOrContent\n            })\n                .css({\n                    top: '-' + t.$btnPane.outerHeight(),\n                    opacity: 0,\n                    paddingBottom: buildForm ? null : '5%',\n                })\n                .appendTo($modal)\n                .animate({\n                    top: 0,\n                    opacity: 1\n                }, 100);\n\n\n            // Append title\n            if (title) {\n                $('<span/>', {\n                    text: title,\n                    class: prefix + 'modal-title'\n                }).prependTo($box);\n            }\n\n            if (buildForm) {\n                // Focus in modal box\n                $(':input:first', $box).focus();\n\n                // Append Confirm and Cancel buttons\n                t.buildModalBtn('submit', $box);\n                t.buildModalBtn('reset', $box);\n\n                $modal.height($box.outerHeight() + 10);\n            }\n\n            $(window).trigger('scroll');\n            t.$c.trigger('tbwmodalopen');\n\n            return $modal;\n        },\n        // @param n is name of modal\n        buildModalBtn: function (n, $modal) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            return $('<button/>', {\n                class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n                type: n,\n                text: t.lang[n] || n\n            }).appendTo($('form', $modal));\n        },\n        // close current modal box\n        closeModal: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.$btnPane.removeClass(prefix + 'disable');\n            t.$overlay.off();\n\n            // Find the modal box\n            var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n\n            $modalBox.animate({\n                top: '-' + $modalBox.height()\n            }, 100, function () {\n                $modalBox.parent().remove();\n                t.hideOverlay();\n                t.$c.trigger('tbwmodalclose');\n            });\n\n            t.restoreRange();\n        },\n        // Pre-formatted build and management modal\n        openModalInsert: function (title, fields, cmd) {\n            var t = this,\n                prefix = t.o.prefix,\n                lg = t.lang,\n                html = '',\n                idPrefix = prefix + 'form-' + Date.now() + '-';\n\n            $.each(fields, function (fieldName, field) {\n                var l = field.label || fieldName,\n                    n = field.name || fieldName,\n                    a = field.attributes || {},\n                    fieldId = idPrefix + fieldName;\n\n                var attr = Object.keys(a).map(function (prop) {\n                    return prop + '=\"' + a[prop] + '\"';\n                }).join(' ');\n\n                if (typeof field.type === 'function') {\n                  if (!field.name) {\n                    field.name = n;\n                  }\n\n                  html += field.type(field, fieldId, prefix, lg);\n\n                  return;\n                }\n\n                html += '<div class=\"' + prefix + 'input-row\">';\n                html += '<div class=\"' + prefix + 'input-infos\"><label for=\"' + fieldId + '\"><span>' + (lg[l] ? lg[l] : l) + '</span></label></div>';\n                html += '<div class=\"' + prefix + 'input-html\">';\n\n                if ($.isPlainObject(field.options)) {\n                    html += '<select name=\"target\">';\n                    html += Object.keys(field.options).map((optionValue) => {\n                        return '<option value=\"' + optionValue + '\" ' + (optionValue === field.value ? 'selected' : '') + '>' + field.options[optionValue] + '</option>';\n                    }).join('');\n                    html += '</select>';\n                } else {\n                    html += '<input id=\"' + fieldId + '\" type=\"' + (field.type || 'text') + '\" name=\"' + n + '\" ' + attr;\n                    html += (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : '') + ' value=\"' + (field.value || '').replace(/\"/g, '&quot;') + '\">';\n                }\n\n                html += '</div></div>';\n            });\n\n            return t.openModal(title, html)\n                .on(CONFIRM_EVENT, function () {\n                    var $form = $('form', $(this)),\n                        valid = true,\n                        values = {};\n\n                    $.each(fields, function (fieldName, field) {\n                        var n = field.name || fieldName;\n\n                        var $field = $(':input[name=\"' + n + '\"]', $form),\n                            inputType = $field[0].type;\n\n                        switch (inputType.toLowerCase()) {\n                            case 'checkbox':\n                                values[n] = $field.is(':checked');\n                                break;\n                            case 'radio':\n                                values[n] = $field.filter(':checked').val();\n                                break;\n                            default:\n                                values[n] = $field.val().trim();\n                                break;\n                        }\n                        // Validate value\n                        if (field.required && values[n] === '') {\n                            valid = false;\n                            t.addErrorOnModalField($field, t.lang.required);\n                        } else if (field.pattern && !field.pattern.test(values[n])) {\n                            valid = false;\n                            t.addErrorOnModalField($field, field.patternError);\n                        }\n                    });\n\n                    if (valid) {\n                        t.restoreRange();\n\n                        if (cmd(values, fields)) {\n                            t.syncCode();\n                            t.$c.trigger('tbwchange');\n                            t.closeModal();\n                            $(this).off(CONFIRM_EVENT);\n                        }\n                    }\n                })\n                .one(CANCEL_EVENT, function () {\n                    $(this).off(CONFIRM_EVENT);\n                    t.closeModal();\n                });\n        },\n        addErrorOnModalField: function ($field, err) {\n            var prefix = this.o.prefix,\n                spanErrorClass = prefix + 'msg-error',\n                $row = $field.closest('.' + prefix + 'input-row');\n\n            $field\n                .one('change keyup', function () {\n                    $row.removeClass(prefix + 'input-error');\n                });\n\n            $row.find('.' + spanErrorClass).remove();\n            $row\n                .addClass(prefix + 'input-error')\n                .find('.' + prefix + 'input-infos label')\n                .append(\n                    $('<span/>', {\n                        class: spanErrorClass,\n                        text: err\n                    })\n                );\n        },\n\n        getDefaultImgDblClickHandler: function () {\n            var t = this;\n\n            return function () {\n                var $img = $(this),\n                    src = $img.attr('src'),\n                    base64 = '(Base64)';\n\n                if (src.indexOf('data:image') === 0) {\n                    src = base64;\n                }\n\n                var options = {\n                    url: {\n                        label: 'URL',\n                        value: src,\n                        required: true\n                    },\n                    alt: {\n                        label: t.lang.description,\n                        value: $img.attr('alt')\n                    }\n                };\n\n                if (t.o.imageWidthModalEdit) {\n                    options.width = {\n                        value: $img.attr('width') ? $img.attr('width') : ''\n                    };\n                }\n\n                t.openModalInsert(t.lang.insertImage, options, function (v) {\n                    if (v.url !== base64) {\n                        $img.attr({\n                            src: v.url\n                        });\n                    }\n                    $img.attr({\n                        alt: v.alt\n                    });\n\n                    if (t.o.imageWidthModalEdit) {\n                        if (parseInt(v.width) > 0) {\n                            $img.attr({\n                                width: v.width\n                            });\n                        } else {\n                            $img.removeAttr('width');\n                        }\n                    }\n\n                    return true;\n                });\n                return false;\n            };\n        },\n\n        // Range management\n        saveRange: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection();\n\n            t.range = null;\n\n            if (!documentSelection || !documentSelection.rangeCount) {\n                return;\n            }\n\n            var savedRange = t.range = documentSelection.getRangeAt(0),\n                range = t.doc.createRange(),\n                rangeStart;\n            range.selectNodeContents(t.$ed[0]);\n            range.setEnd(savedRange.startContainer, savedRange.startOffset);\n            rangeStart = (range + '').length;\n            t.metaRange = {\n                start: rangeStart,\n                end: rangeStart + (savedRange + '').length\n            };\n        },\n        restoreRange: function () {\n            var t = this,\n                metaRange = t.metaRange,\n                savedRange = t.range,\n                documentSelection = t.doc.getSelection(),\n                range;\n\n            if (!savedRange) {\n                return;\n            }\n\n            if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n                var charIndex = 0,\n                    nodeStack = [t.$ed[0]],\n                    node,\n                    foundStart = false,\n                    stop = false;\n\n                range = t.doc.createRange();\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType === 3) {\n                        var nextCharIndex = charIndex + node.length;\n                        if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                            range.setStart(node, metaRange.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                            range.setEnd(node, metaRange.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        var cn = node.childNodes,\n                            i = cn.length;\n\n                        while (i > 0) {\n                            i -= 1;\n                            nodeStack.push(cn[i]);\n                        }\n                    }\n                }\n            }\n\n            // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n            // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n            try {\n                documentSelection.removeAllRanges();\n            } catch (e) {\n            }\n\n            documentSelection.addRange(range || savedRange);\n        },\n        getRangeText: function () {\n            return this.range + '';\n        },\n\n        clearButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon';\n\n            // Reset all buttons and dropdown state\n            $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n            $('.' + originalIconClass, t.$btnPane).each(function () {\n                $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n            });\n        },\n        updateButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon',\n                tags = t.getTagsRecursive(t.doc.getSelection().anchorNode);\n\n            t.clearButtonPaneStatus();\n\n            $.each(tags, function (i, tag) {\n                var btnName = t.tagToButton[tag.toLowerCase()],\n                    $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n\n                if ($btn.length > 0) {\n                    $btn.addClass(activeClasses);\n                } else {\n                    try {\n                        $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n                        var $btnSvgUse = $btn.find('svg use'),\n                            dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n                            $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n                            $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n\n                        // Highlight the dropdown button\n                        $dropdownBtn.addClass(activeClasses);\n\n                        // Switch dropdown icon to the active sub-icon one\n                        if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n                            // Save original icon\n                            $dropdownBtn\n                                .addClass(originalIconClass)\n                                .data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n\n                            // Put the active sub-button's icon\n                            $dropdownBtnSvgUse\n                                .attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n                        }\n                    } catch (e) {\n                    }\n                }\n            });\n        },\n        getTagsRecursive: function (element, tags) {\n            var t = this;\n            tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n            if (element && element.parentNode) {\n                if (element.nodeType !== Node.ELEMENT_NODE) {\n                    element = element.parentNode;\n                }\n            } else {\n                return tags;\n            }\n\n            var tag = element.tagName;\n            if (tag === 'DIV') {\n                return tags;\n            }\n            if (tag === 'P' && element.style.textAlign !== '') {\n                tags.push(element.style.textAlign);\n            }\n\n            $.each(t.tagHandlers, function (i, tagHandler) {\n                tags = tags.concat(tagHandler(element, t));\n            });\n\n            tags.push(tag);\n\n            return t.getTagsRecursive(element.parentNode, tags).filter(function (tag) {\n                return tag != null;\n            });\n        },\n\n        // Plugins\n        initPlugins: function () {\n            var t = this;\n            t.loadedPlugins = [];\n            $.each($.trumbowyg.plugins, function (name, plugin) {\n                if (!plugin.shouldInit || plugin.shouldInit(t)) {\n                    plugin.init(t);\n                    if (plugin.tagHandler) {\n                        t.tagHandlers.push(plugin.tagHandler);\n                    }\n                    t.loadedPlugins.push(plugin);\n                }\n            });\n        },\n        destroyPlugins: function () {\n            var t = this;\n            $.each(this.loadedPlugins, function (i, plugin) {\n                if (plugin.destroy) {\n                    plugin.destroy(t);\n                }\n            });\n        }\n    };\n})(navigator, window, document, jQuery);\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,MAAM,CAACC,SAAS,GAAG;EACfC,KAAK,EAAE;IACHC,EAAE,EAAE;MACAC,QAAQ,EAAE,WAAW;MAErBC,IAAI,EAAE,MAAM;MACZC,IAAI,EAAE,MAAM;MAEZC,UAAU,EAAE,YAAY;MACxBC,CAAC,EAAE,WAAW;MACdC,UAAU,EAAE,OAAO;MACnBC,IAAI,EAAE,MAAM;MACZC,MAAM,EAAE,QAAQ;MAEhBC,IAAI,EAAE,MAAM;MACZC,MAAM,EAAE,QAAQ;MAChBC,aAAa,EAAE,eAAe;MAC9BC,SAAS,EAAE,WAAW;MAEtBC,MAAM,EAAE,QAAQ;MAChBC,EAAE,EAAE,UAAU;MACdC,GAAG,EAAE,SAAS;MAEdC,WAAW,EAAE,aAAa;MAC1BC,SAAS,EAAE,WAAW;MAEtBC,aAAa,EAAE,gBAAgB;MAC/BC,WAAW,EAAE,cAAc;MAE3BC,WAAW,EAAE,cAAc;MAC3BC,IAAI,EAAE,MAAM;MACZC,UAAU,EAAE,aAAa;MACzBC,MAAM,EAAE,aAAa;MAErBC,KAAK,EAAE,oBAAoB;MAC3BC,MAAM,EAAE,SAAS;MAEjBC,WAAW,EAAE,YAAY;MACzBC,aAAa,EAAE,cAAc;MAC7BC,YAAY,EAAE,aAAa;MAC3BC,WAAW,EAAE,eAAe;MAE5BC,cAAc,EAAE,wBAAwB;MACxCC,YAAY,EAAE,eAAe;MAE7BC,UAAU,EAAE,YAAY;MAExBC,KAAK,EAAE,OAAO;MAEdC,MAAM,EAAE,SAAS;MACjBC,KAAK,EAAE,QAAQ;MAEfC,QAAQ,EAAE,UAAU;MACpBC,WAAW,EAAE,aAAa;MAC1BC,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE,MAAM;MACZC,MAAM,EAAE,QAAQ;MAChBC,KAAK,EAAE;IACX;EACJ,CAAC;EAED;EACAC,OAAO,EAAE,CAAC,CAAC;EAEX;EACAC,OAAO,EAAE,IAAI;EACbC,kBAAkB,EAAE,KAAK;EAEzBC,eAAe,EAAE;AACrB,CAAC;;AAED;AACAC,MAAM,CAACC,cAAc,CAAClD,MAAM,CAACC,SAAS,EAAE,gBAAgB,EAAE;EACtDkD,KAAK,EAAE;IACHC,IAAI,EAAE,IAAI;IAEVC,YAAY,EAAE,KAAK;IACnBC,cAAc,EAAE,KAAK;IACrBC,QAAQ,EAAE,KAAK;IACfC,eAAe,EAAE,KAAK;IACtBC,mBAAmB,EAAE,KAAK;IAC1BT,eAAe,EAAE,IAAI;IAErBU,MAAM,EAAE,YAAY;IACpBC,UAAU,EAAE,CAAC,CAAC;IACdC,QAAQ,EAAE,IAAI;IACdC,sBAAsB,EAAE,KAAK;IAC7BC,QAAQ,EAAE,KAAK;IACfC,kBAAkB,EAAE,KAAK;IACzBC,WAAW,EAAE,KAAK;IAClBC,YAAY,EAAE,EAAE;IAChBC,UAAU,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC;IACrDC,IAAI,EAAE,CACF,CAAC,UAAU,CAAC,EACZ,CAAC,MAAM,EAAE,MAAM,CAAC;IAAE;IAClB,CAAC,YAAY,CAAC,EACd,CAAC,QAAQ,EAAE,IAAI,EAAE,KAAK,CAAC,EACvB,CAAC,aAAa,EAAE,WAAW,CAAC,EAC5B,CAAC,MAAM,CAAC,EACR,CAAC,aAAa,CAAC,EACf,CAAC,aAAa,EAAE,eAAe,EAAE,cAAc,EAAE,aAAa,CAAC,EAC/D,CAAC,eAAe,EAAE,aAAa,CAAC,EAChC,CAAC,gBAAgB,CAAC,EAClB,CAAC,cAAc,CAAC,EAChB,CAAC,YAAY,CAAC,CACjB;IACD;IACAC,OAAO,EAAE,CAAC,CAAC;IACXC,wBAAwB,EAAE,KAAK;IAE/BC,sBAAsB,EAAE,4GAA4G;IAEpIC,aAAa,EAAE,EAAE;IAEjB;;IAEA1B,OAAO,EAAE,CAAC,CAAC;IAEX2B,WAAW,EAAE,KAAK;IAClBC,YAAY,EAAE,KAAK;IACnBC,WAAW,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC;IAEhC5B,OAAO,EAAE;EACb,CAAC;EACD6B,QAAQ,EAAE,KAAK;EACfC,UAAU,EAAE,IAAI;EAChBC,YAAY,EAAE;AAClB,CAAC,CAAC;AAEF,CAAC,UAAUC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,CAAC,EAAE;EACvC,YAAY;;EAEZ,IAAIC,aAAa,GAAG,YAAY;IAC5BC,YAAY,GAAG,WAAW;EAE9BF,CAAC,CAACG,EAAE,CAACnF,SAAS,GAAG,UAAUoF,OAAO,EAAEC,MAAM,EAAE;IACxC,IAAIC,iBAAiB,GAAG,WAAW;IACnC,IAAIF,OAAO,KAAKpC,MAAM,CAACoC,OAAO,CAAC,IAAI,CAACA,OAAO,EAAE;MACzC,OAAO,IAAI,CAACG,IAAI,CAAC,YAAY;QACzB,IAAI,CAACP,CAAC,CAAC,IAAI,CAAC,CAACQ,IAAI,CAACF,iBAAiB,CAAC,EAAE;UAClCN,CAAC,CAAC,IAAI,CAAC,CAACQ,IAAI,CAACF,iBAAiB,EAAE,IAAIG,SAAS,CAAC,IAAI,EAAEL,OAAO,CAAC,CAAC;QACjE;MACJ,CAAC,CAAC;IACN;IACA,IAAI,IAAI,CAACM,MAAM,KAAK,CAAC,EAAE;MACnB,IAAI;QACA,IAAIC,CAAC,GAAGX,CAAC,CAAC,IAAI,CAAC,CAACQ,IAAI,CAACF,iBAAiB,CAAC;QACvC,QAAQF,OAAO;UACX;UACA,KAAK,SAAS;YACV,OAAOO,CAAC,CAACC,OAAO,CAACP,MAAM,CAACQ,GAAG,EAAER,MAAM,CAACS,KAAK,EAAET,MAAM,CAACU,QAAQ,EAAEV,MAAM,CAACW,aAAa,CAAC;;UAErF;UACA,KAAK,WAAW;YACZ,OAAOL,CAAC,CAACM,SAAS,CAACZ,MAAM,CAAC7C,KAAK,EAAE6C,MAAM,CAACa,OAAO,CAAC;UACpD,KAAK,YAAY;YACb,OAAOP,CAAC,CAACQ,UAAU,CAAC,CAAC;UACzB,KAAK,iBAAiB;YAClB,OAAOR,CAAC,CAACS,eAAe,CAACf,MAAM,CAAC7C,KAAK,EAAE6C,MAAM,CAACgB,MAAM,EAAEhB,MAAM,CAACiB,QAAQ,CAAC;;UAE1E;UACA,KAAK,WAAW;YACZ,OAAOX,CAAC,CAACY,SAAS,CAAC,CAAC;UACxB,KAAK,UAAU;YACX,OAAOZ,CAAC,CAACa,KAAK;UAClB,KAAK,cAAc;YACf,OAAOb,CAAC,CAACc,YAAY,CAAC,CAAC;UAC3B,KAAK,cAAc;YACf,OAAOd,CAAC,CAACe,YAAY,CAAC,CAAC;;UAE3B;UACA,KAAK,QAAQ;YACT,OAAOf,CAAC,CAACgB,WAAW,CAAC,KAAK,CAAC;UAC/B,KAAK,SAAS;YACV,OAAOhB,CAAC,CAACgB,WAAW,CAAC,IAAI,CAAC;;UAE9B;UACA,KAAK,QAAQ;YACT,OAAOhB,CAAC,CAACiB,MAAM,CAAC,CAAC;;UAErB;UACA,KAAK,SAAS;YACV,OAAOjB,CAAC,CAACkB,OAAO,CAAC,CAAC;;UAEtB;UACA,KAAK,OAAO;YACR,OAAOlB,CAAC,CAACmB,KAAK,CAAC,CAAC;;UAEpB;UACA,KAAK,MAAM;YACP,OAAOnB,CAAC,CAACoB,IAAI,CAAC1B,MAAM,CAAC;QAC7B;MACJ,CAAC,CAAC,OAAO2B,CAAC,EAAE,CACZ;IACJ;IAEA,OAAO,KAAK;EAChB,CAAC;;EAED;EACA,IAAIvB,SAAS,GAAG,SAAAA,CAAUwB,UAAU,EAAE7B,OAAO,EAAE;IAC3C,IAAIO,CAAC,GAAG,IAAI;MACRuB,gBAAgB,GAAG,iBAAiB;MACpCC,UAAU,GAAGnC,CAAC,CAAChF,SAAS;;IAE5B;IACA;IACA2F,CAAC,CAACyB,GAAG,GAAGH,UAAU,CAACI,aAAa,IAAItC,QAAQ;;IAE5C;IACAY,CAAC,CAAC2B,GAAG,GAAGtC,CAAC,CAACiC,UAAU,CAAC,CAAC,CAAC;IACvBtB,CAAC,CAAC4B,EAAE,GAAGvC,CAAC,CAACiC,UAAU,CAAC,CAAC,CAAC;;IAEtB7B,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;;IAEvB;IACA,IAAIA,OAAO,CAACjC,IAAI,IAAI,IAAI,IAAIgE,UAAU,CAAClH,KAAK,CAACmF,OAAO,CAACjC,IAAI,CAAC,IAAI,IAAI,EAAE;MAChEwC,CAAC,CAACxC,IAAI,GAAG6B,CAAC,CAACwC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEL,UAAU,CAAClH,KAAK,CAACC,EAAE,EAAEiH,UAAU,CAAClH,KAAK,CAACmF,OAAO,CAACjC,IAAI,CAAC,CAAC;IACpF,CAAC,MAAM;MACHwC,CAAC,CAACxC,IAAI,GAAGgE,UAAU,CAAClH,KAAK,CAACC,EAAE;IAChC;IAEAyF,CAAC,CAAC5C,eAAe,GAAGoE,UAAU,CAACpE,eAAe,IAAI,IAAI,GAAGoE,UAAU,CAACpE,eAAe,GAAGqC,OAAO,CAACrC,eAAe;;IAE7G;IACA,IAAI0E,aAAa,GAAGN,UAAU,CAACtE,OAAO,IAAI,IAAI,GAAGsE,UAAU,CAACtE,OAAO,GAAGuC,OAAO,CAACvC,OAAO;IACrF8C,CAAC,CAAC+B,MAAM,GAAGD,aAAa,KAAK,KAAK;IAElC,IAAIA,aAAa,KAAK,KAAK,KAAKN,UAAU,CAACrE,kBAAkB,IAAIkC,CAAC,CAAC,GAAG,GAAGkC,gBAAgB,EAAEvB,CAAC,CAACyB,GAAG,CAAC,CAAC1B,MAAM,KAAK,CAAC,CAAC,EAAE;MAC7G,IAAI+B,aAAa,IAAI,IAAI,EAAE;QACvB;QACA,IAAIE,eAAe,GAAG3C,CAAC,CAAC,aAAa,CAAC;QACtC2C,eAAe,CAACpC,IAAI,CAAC,UAAUqC,CAAC,EAAEC,aAAa,EAAE;UAC7C,IAAIC,MAAM,GAAGD,aAAa,CAACE,GAAG;UAC9B,IAAIC,OAAO,GAAGF,MAAM,CAACG,KAAK,CAAC,uBAAuB,CAAC;UACnD,IAAID,OAAO,IAAI,IAAI,EAAE;YACjBP,aAAa,GAAGK,MAAM,CAACI,SAAS,CAAC,CAAC,EAAEJ,MAAM,CAACK,OAAO,CAACH,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,cAAc;UACpF;QACJ,CAAC,CAAC;MACN;;MAEA;MACA;MACA,IAAIP,aAAa,IAAI,IAAI,EAAE;QACvBW,OAAO,CAACC,IAAI,CAAC,gDAAgD,CAAC,CAAC,CAAC;MACpE,CAAC,MAAM,IAAI,CAAClB,UAAU,CAACrE,kBAAkB,EAAE;QACvC,IAAIwF,GAAG,GAAG3C,CAAC,CAACyB,GAAG,CAACmB,aAAa,CAAC,KAAK,CAAC;QACpCD,GAAG,CAACE,EAAE,GAAGtB,gBAAgB;QACzBvB,CAAC,CAACyB,GAAG,CAACqB,IAAI,CAACC,YAAY,CAACJ,GAAG,EAAE3C,CAAC,CAACyB,GAAG,CAACqB,IAAI,CAACE,UAAU,CAAC,CAAC,CAAC,CAAC;QACtDC,KAAK,CAACnB,aAAa,EAAE;UACjBoB,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACL,cAAc,EAAE;UACpB;QACJ,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;UAClBA,QAAQ,CAACvG,IAAI,CAAC,CAAC,CACVsG,IAAI,CAAEE,GAAG,IAAK;YACXX,GAAG,CAACY,SAAS,GAAGD,GAAG;UACvB,CAAC,CAAC;QACV,CAAC,CAAC;MACN;IACJ;IAEA,IAAIE,QAAQ,GAAG,CAAC,CAACxD,CAAC,CAACyB,GAAG,CAACgC,aAAa,CAAC,MAAM,CAAC,GAAGtE,MAAM,CAACuE,QAAQ,CAACC,IAAI,CAACC,OAAO,CAACzE,MAAM,CAACuE,QAAQ,CAACG,IAAI,EAAE,EAAE,CAAC,GAAG,EAAE;IAC1G7D,CAAC,CAAC9C,OAAO,GAAGsE,UAAU,CAACrE,kBAAkB,GAAG2E,aAAa,GAAG0B,QAAQ;;IAGpE;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACQ,IAAIM,CAAC,GAAG9D,CAAC,CAACxC,IAAI,CAACzC,MAAM;MAAE;MACnBgJ,eAAe,GAAG,SAAAA,CAAA,EAAY;QAC1B,OAAO,CAAC5E,MAAM,CAAC6E,MAAM,IAAK7E,MAAM,CAAC8E,IAAI,IAAIA,IAAI,CAACC,eAAgB,KAAK,KAAK,IAAI/E,MAAM;MACtF,CAAC;IACLa,CAAC,CAACxB,OAAO,GAAG;MACRhE,QAAQ,EAAE;QACNgF,EAAE,EAAE,QAAQ;QACZ2E,KAAK,EAAE;MACX,CAAC;MAED1J,IAAI,EAAE;QACF2J,WAAW,EAAEL,eAAe;QAC5BM,GAAG,EAAE;MACT,CAAC;MACD3J,IAAI,EAAE;QACF0J,WAAW,EAAEL,eAAe;QAC5BM,GAAG,EAAE;MACT,CAAC;MAEDzJ,CAAC,EAAE;QACC4E,EAAE,EAAE;MACR,CAAC;MACD3E,UAAU,EAAE;QACR2E,EAAE,EAAE;MACR,CAAC;MACD8E,EAAE,EAAE;QACA9E,EAAE,EAAE,aAAa;QACjB3C,KAAK,EAAEiH,CAAC,GAAG;MACf,CAAC;MACDS,EAAE,EAAE;QACA/E,EAAE,EAAE,aAAa;QACjB3C,KAAK,EAAEiH,CAAC,GAAG;MACf,CAAC;MACDU,EAAE,EAAE;QACAhF,EAAE,EAAE,aAAa;QACjB3C,KAAK,EAAEiH,CAAC,GAAG;MACf,CAAC;MACDW,EAAE,EAAE;QACAjF,EAAE,EAAE,aAAa;QACjB3C,KAAK,EAAEiH,CAAC,GAAG;MACf,CAAC;MACDY,EAAE,EAAE;QACAlF,EAAE,EAAE,aAAa;QACjB3C,KAAK,EAAEiH,CAAC,GAAG;MACf,CAAC;MACDa,EAAE,EAAE;QACAnF,EAAE,EAAE,aAAa;QACjB3C,KAAK,EAAEiH,CAAC,GAAG;MACf,CAAC;MACDtI,SAAS,EAAE;QACPoJ,GAAG,EAAE;MACT,CAAC;MACDrJ,WAAW,EAAE;QACTqJ,GAAG,EAAE;MACT,CAAC;MAED5J,IAAI,EAAE;QACFqJ,GAAG,EAAE,GAAG;QACRO,GAAG,EAAE;MACT,CAAC;MACD3J,MAAM,EAAE;QACJoJ,GAAG,EAAE,GAAG;QACRO,GAAG,EAAE;MACT,CAAC;MACDzJ,SAAS,EAAE;QACPyJ,GAAG,EAAE;MACT,CAAC;MACD1J,aAAa,EAAE;QACX0J,GAAG,EAAE;MACT,CAAC;MAEDxJ,MAAM,EAAE;QACJoE,EAAE,EAAE,MAAM;QACV6E,GAAG,EAAE;MACT,CAAC;MACDhJ,EAAE,EAAE;QACAmE,EAAE,EAAE,QAAQ;QACZ6E,GAAG,EAAE;MACT,CAAC;MACD/I,GAAG,EAAE;QACDkE,EAAE,EAAE;MACR,CAAC;MAED3D,UAAU,EAAE;QACRwI,GAAG,EAAE,GAAG;QACRO,GAAG,EAAE;MACT,CAAC;MACD9I,MAAM,EAAE,CAAC,CAAC;MAEVH,WAAW,EAAE,CAAC,CAAC;MAEfM,WAAW,EAAE;QACT2I,GAAG,EAAE,MAAM;QACXxE,QAAQ,EAAE;MACd,CAAC;MACDlE,aAAa,EAAE;QACX0I,GAAG,EAAE,QAAQ;QACbxE,QAAQ,EAAE;MACd,CAAC;MACDjE,YAAY,EAAE;QACVyI,GAAG,EAAE,OAAO;QACZxE,QAAQ,EAAE;MACd,CAAC;MACDhE,WAAW,EAAE;QACTwI,GAAG,EAAE,SAAS;QACdxE,QAAQ,EAAE;MACd,CAAC;MAED3E,aAAa,EAAE;QACX+D,EAAE,EAAE,qBAAqB;QACzBoF,GAAG,EAAE;MACT,CAAC;MACDlJ,WAAW,EAAE;QACT8D,EAAE,EAAE,mBAAmB;QACvBoF,GAAG,EAAE;MACT,CAAC;MAEDvI,cAAc,EAAE;QACZmD,EAAE,EAAE;MACR,CAAC;MAEDlD,YAAY,EAAE,CAAC,CAAC;MAEhBC,UAAU,EAAE;QACR4H,KAAK,EAAE;MACX,CAAC;MACD3H,KAAK,EAAE;QACHgD,EAAE,EAAE,SAAS;QACb2E,KAAK,EAAE;MACX,CAAC;MAED;MACAxJ,UAAU,EAAE;QACRkK,QAAQ,EAAE,CAAC,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;QACrDC,GAAG,EAAE;MACT,CAAC;MACDlJ,IAAI,EAAE;QACFiJ,QAAQ,EAAE,CAAC,YAAY,EAAE,QAAQ;MACrC;IACJ,CAAC;;IAED;IACA7E,CAAC,CAAC+E,CAAC,GAAG1F,CAAC,CAACwC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEL,UAAU,CAACwD,cAAc,EAAEvF,OAAO,CAAC;IAC5D,IAAI,CAACO,CAAC,CAAC+E,CAAC,CAACE,cAAc,CAAC,oBAAoB,CAAC,EAAE;MAC3CjF,CAAC,CAAC+E,CAAC,CAACG,kBAAkB,GAAGlF,CAAC,CAACmF,4BAA4B,CAAC,CAAC;IAC7D;IAEAnF,CAAC,CAACoF,SAAS,GAAGpF,CAAC,CAACqF,cAAc,CAAC,CAAC;IAEhCrF,CAAC,CAACsF,QAAQ,GAAGtF,CAAC,CAAC+E,CAAC,CAACO,QAAQ,IAAKhE,UAAU,CAACiE,QAAQ,KAAK,UAAU,IAAIjE,UAAU,CAACgE,QAAS;IAExF,IAAI7F,OAAO,CAAClB,IAAI,EAAE;MACdyB,CAAC,CAAC+E,CAAC,CAACxG,IAAI,GAAGkB,OAAO,CAAClB,IAAI;IAC3B,CAAC,MAAM,IAAI,CAACyB,CAAC,CAAC+E,CAAC,CAAC/G,QAAQ,EAAE;MACtBgC,CAAC,CAAC+E,CAAC,CAACxG,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,eAAe,CAAC;IAClE;IAEAc,CAAC,CAACO,IAAI,CAACI,CAAC,CAAC+E,CAAC,CAACvG,OAAO,EAAE,UAAUgH,OAAO,EAAEC,MAAM,EAAE;MAC3CzF,CAAC,CAAC0F,SAAS,CAACF,OAAO,EAAEC,MAAM,CAAC;IAChC,CAAC,CAAC;;IAEF;IACAzF,CAAC,CAAC2F,cAAc,GAAG,iBAAiB;;IAEpC;IACA3F,CAAC,CAAC4F,IAAI,GAAG,EAAE;;IAEX;IACA5F,CAAC,CAAC6F,WAAW,GAAG,CAAC,CAAC;IAClB7F,CAAC,CAAC8F,WAAW,GAAG,EAAE;;IAElB;IACA9F,CAAC,CAACrB,aAAa,GAAG,EAAE,CAACoH,MAAM,CAAC/F,CAAC,CAAC+E,CAAC,CAACpG,aAAa,CAAC;;IAE9C;IACAqB,CAAC,CAACgG,IAAI,GAAG9G,SAAS,CAAC+G,SAAS,CAACzD,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAItD,SAAS,CAACgH,UAAU,CAAC1D,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;;IAEtG;IACAxC,CAAC,CAACmG,KAAK,GAAGjH,SAAS,CAACkH,QAAQ,CAACC,WAAW,CAAC,CAAC,CAAC7D,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAEhExC,CAAC,CAACsG,IAAI,CAAC,CAAC;EACZ,CAAC;EAEDxG,SAAS,CAACyG,SAAS,GAAG;IAClBC,oBAAoB,EAAE;MAClB,GAAG,EAAE,QAAQ;MACb,GAAG,EAAE,IAAI;MACT,GAAG,EAAE,KAAK;MACV,QAAQ,EAAE,KAAK;MACf,KAAK,EAAE;IACX,CAAC;IAEDF,IAAI,EAAE,SAAAA,CAAA,EAAY;MACd,IAAItG,CAAC,GAAG,IAAI;MACZA,CAAC,CAACyG,MAAM,GAAGzG,CAAC,CAAC2B,GAAG,CAAC+E,WAAW,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;;MAErC1G,CAAC,CAAC2G,WAAW,CAAC,CAAC;MAEf,IAAI;QACA;QACA3G,CAAC,CAACyB,GAAG,CAACmF,WAAW,CAAC,sBAAsB,EAAE,KAAK,EAAE,KAAK,CAAC;QACvD5G,CAAC,CAACyB,GAAG,CAACmF,WAAW,CAAC,2BAA2B,EAAE,KAAK,EAAE,GAAG,CAAC;MAC9D,CAAC,CAAC,OAAOC,CAAC,EAAE,CACZ;MAEA7G,CAAC,CAAC8G,WAAW,CAAC,CAAC;MACf9G,CAAC,CAAC+G,YAAY,CAAC,CAAC;MAEhB/G,CAAC,CAACgH,kBAAkB,CAAC,CAAC;MAEtBhH,CAAC,CAACiH,YAAY,CAAC,CAAC;MAEhBC,UAAU,CAAC,YAAY;QACnB,IAAIlH,CAAC,CAACsF,QAAQ,EAAE;UACZtF,CAAC,CAACgB,WAAW,CAAC,IAAI,CAAC;QACvB;QACAhB,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,SAAS,CAAC;MAC3B,CAAC,CAAC;IACN,CAAC;IAEDzB,SAAS,EAAE,SAAAA,CAAUF,OAAO,EAAEC,MAAM,EAAE;MAClC,IAAI,CAACjH,OAAO,CAACgH,OAAO,CAAC,GAAGnG,CAAC,CAACwC,MAAM,CAAC4D,MAAM,EAAE,IAAI,CAACjH,OAAO,CAACgH,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IACzE,CAAC;IAEDH,cAAc,EAAE,SAAAA,CAAA,EAAY;MACxB,IAAI+B,QAAQ,GAAG,IAAI,CAACrC,CAAC,CAACnG,WAAW;MACjC,IAAI,CAACwI,QAAQ,EAAE;QACX;MACJ;MAEA,IAAI,OAAQA,QAAS,KAAK,QAAQ,EAAE;QAChC,OAAO,UAAU;MACrB;MACA,OAAOA,QAAQ,CAACxD,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,KAAK;IAC9C,CAAC;IAEDkD,WAAW,EAAE,SAAAA,CAAA,EAAY;MACrB,IAAI9G,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnBsD,IAAI,GAAG,EAAE;MAEbpB,CAAC,CAACqH,IAAI,GAAGhI,CAAC,CAAC,QAAQ,EAAE;QACjB8E,KAAK,EAAErG,MAAM,GAAG,MAAM,GAAGA,MAAM,GAAG,iBAAiB,GAAGA,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACvH,IAAI,GAAG;MAC9E,CAAC,CAAC;MAEFwC,CAAC,CAACsH,MAAM,GAAGjI,CAAC,CAAC,QAAQ,EAAE;QACnB8E,KAAK,EAAErG,MAAM,GAAG;MACpB,CAAC,CAAC;;MAEF;MACA;MACAkC,CAAC,CAACuH,UAAU,GAAGvH,CAAC,CAAC2B,GAAG,CAAC6F,EAAE,CAAC,UAAU,CAAC;MACnC,IAAIxH,CAAC,CAACuH,UAAU,EAAE;QACdnG,IAAI,GAAGpB,CAAC,CAAC2B,GAAG,CAAC8F,GAAG,CAAC,CAAC;QAClBzH,CAAC,CAAC0H,GAAG,GAAGrI,CAAC,CAAC,QAAQ,CAAC,CACdsI,QAAQ,CAAC3H,CAAC,CAACsH,MAAM,CAAC;QACvBtH,CAAC,CAACqH,IAAI,CACDO,WAAW,CAAC5H,CAAC,CAAC2B,GAAG,CAAC,CAClBkG,MAAM,CAAC7H,CAAC,CAACsH,MAAM,EAAEtH,CAAC,CAAC2B,GAAG,CAAC;MAChC,CAAC,MAAM;QACH3B,CAAC,CAAC0H,GAAG,GAAG1H,CAAC,CAAC2B,GAAG;QACbP,IAAI,GAAGpB,CAAC,CAAC0H,GAAG,CAACtG,IAAI,CAAC,CAAC;QAEnBpB,CAAC,CAAC2B,GAAG,GAAGtC,CAAC,CAAC,aAAa,EAAE;UACrByI,IAAI,EAAE9H,CAAC,CAAC2B,GAAG,CAACoG,IAAI,CAAC,IAAI,CAAC;UACtBtB,MAAM,EAAEzG,CAAC,CAACyG;QACd,CAAC,CAAC,CAACgB,GAAG,CAACrG,IAAI,CAAC;QAEZpB,CAAC,CAACqH,IAAI,CACDO,WAAW,CAAC5H,CAAC,CAAC0H,GAAG,CAAC,CAClBG,MAAM,CAAC7H,CAAC,CAAC2B,GAAG,EAAE3B,CAAC,CAACsH,MAAM,CAAC;QAC5BtH,CAAC,CAACsH,MAAM,CAACO,MAAM,CAAC7H,CAAC,CAAC0H,GAAG,CAAC;QACtB1H,CAAC,CAACgI,QAAQ,CAAC,CAAC;MAChB;MAEAhI,CAAC,CAAC2B,GAAG,CACAsG,QAAQ,CAACnK,MAAM,GAAG,UAAU,CAAC,CAC7BiK,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;MAGzB/H,CAAC,CAAC0H,GAAG,CACAO,QAAQ,CAACnK,MAAM,GAAG,QAAQ,CAAC,CAC3BiK,IAAI,CAAC;QACFG,eAAe,EAAE,IAAI;QACrBC,GAAG,EAAEnI,CAAC,CAACxC,IAAI,CAAC4K,IAAI,IAAI;MACxB,CAAC,CAAC,CACDhH,IAAI,CAACA,IAAI,CAAC;MAGf,IAAIpB,CAAC,CAAC+E,CAAC,CAACsD,QAAQ,EAAE;QACdrI,CAAC,CAAC0H,GAAG,CAACK,IAAI,CAAC,UAAU,EAAE/H,CAAC,CAAC+E,CAAC,CAACsD,QAAQ,CAAC;MACxC;MAEA,IAAIrI,CAAC,CAAC4B,EAAE,CAAC4F,EAAE,CAAC,eAAe,CAAC,EAAE;QAC1BxH,CAAC,CAAC0H,GAAG,CAACK,IAAI,CAAC,aAAa,EAAE/H,CAAC,CAAC4B,EAAE,CAACmG,IAAI,CAAC,aAAa,CAAC,CAAC;MACvD;MAEA,IAAI/H,CAAC,CAAC4B,EAAE,CAAC4F,EAAE,CAAC,cAAc,CAAC,EAAE;QACzBxH,CAAC,CAAC0H,GAAG,CAACK,IAAI,CAAC,YAAY,EAAE/H,CAAC,CAAC4B,EAAE,CAACmG,IAAI,CAAC,YAAY,CAAC,CAAC;MACrD;MAEA,IAAI/H,CAAC,CAAC+E,CAAC,CAAC7G,QAAQ,EAAE;QACd8B,CAAC,CAAC0H,GAAG,CAACO,QAAQ,CAACnK,MAAM,GAAG,WAAW,CAAC;MACxC;MAEAkC,CAAC,CAACsI,YAAY,CAAC,CAAC;MAEhB,IAAItI,CAAC,CAAC+E,CAAC,CAACnH,eAAe,EAAE;QACrBoC,CAAC,CAAC0H,GAAG,CAACO,QAAQ,CAACnK,MAAM,GAAG,mBAAmB,CAAC;MAChD;MAEA,IAAIyK,IAAI,GAAG,KAAK;QACZC,WAAW,GAAG,KAAK;QACnBC,wBAAwB;MAE5BzI,CAAC,CAAC0H,GAAG,CACAgB,EAAE,CAAC,UAAU,EAAE,KAAK,EAAE1I,CAAC,CAAC+E,CAAC,CAACG,kBAAkB,CAAC,CAC7CwD,EAAE,CAAC,SAAS,EAAE,UAAU7B,CAAC,EAAE;QACxB;QACA,IAAI8B,OAAO,GAAG9B,CAAC,CAAC+B,KAAK;QACrB,IAAID,OAAO,KAAK,CAAC,IAAIA,OAAO,KAAK,EAAE,IAAIA,OAAO,KAAK,EAAE,EAAE;UACnD3I,CAAC,CAAC6I,UAAU,CAAC,IAAI,CAAC;QACtB;QACA,IAAI,CAAChC,CAAC,CAACiC,OAAO,IAAIjC,CAAC,CAACkC,OAAO,KAAK,CAAClC,CAAC,CAACmC,MAAM,EAAE;UACvCT,IAAI,GAAG,IAAI;UACX,IAAIlE,GAAG,GAAGrE,CAAC,CAAC4F,IAAI,CAACqD,MAAM,CAACC,YAAY,CAACrC,CAAC,CAAC+B,KAAK,CAAC,CAACvC,WAAW,CAAC,CAAC,CAAC;UAE5D,IAAI;YACArG,CAAC,CAACC,OAAO,CAACoE,GAAG,CAAC7E,EAAE,EAAE6E,GAAG,CAAClE,KAAK,CAAC;YAC5B,OAAO,KAAK;UAChB,CAAC,CAAC,OAAOkB,CAAC,EAAE,CACZ;QACJ,CAAC,MAAM;UACH,IAAIrB,CAAC,CAAC+E,CAAC,CAAC3G,WAAW,IAAIyI,CAAC,CAACxC,GAAG,KAAK,KAAK,EAAE;YACpC,IAAI;cACA,IAAIwC,CAAC,CAACsC,QAAQ,EAAE;gBACZnJ,CAAC,CAACC,OAAO,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;cACpC,CAAC,MAAM;gBACHD,CAAC,CAACC,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC;cACnC;cACA,OAAO,KAAK;YAChB,CAAC,CAAC,OAAOoB,CAAC,EAAE,CACZ;UACJ;QACJ;MACJ,CAAC,CAAC,CACDqH,EAAE,CAAC,oCAAoC,EAAE,YAAY;QAClDF,WAAW,GAAG,IAAI;MACtB,CAAC,CAAC,CACDE,EAAE,CAAC,sBAAsB,EAAE,UAAU7B,CAAC,EAAE;QACrC,IAAIA,CAAC,CAACuC,IAAI,KAAK,gBAAgB,EAAE;UAC7BZ,WAAW,GAAG,KAAK;QACvB,CAAC,MAAM,IAAIA,WAAW,EAAE;UACpB;QACJ;QAEA,IAAIG,OAAO,GAAG9B,CAAC,CAAC+B,KAAK;QAErB,IAAID,OAAO,IAAI,EAAE,IAAIA,OAAO,IAAI,EAAE,EAAE;UAChC;QACJ;;QAEA;QACA,IAAIA,OAAO,KAAK,CAAC,IAAIA,OAAO,KAAK,EAAE,IAAIA,OAAO,KAAK,EAAE,EAAE;UACnD3I,CAAC,CAAC6I,UAAU,CAAC,CAAC;QAClB;QAEA,IAAI,CAAChC,CAAC,CAACiC,OAAO,IAAIjC,CAAC,CAACkC,OAAO,MAAMJ,OAAO,KAAK,EAAE,IAAIA,OAAO,KAAK,EAAE,CAAC,EAAE;UAChE3I,CAAC,CAACsI,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC;UAC3BtI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B,CAAC,MAAM,IAAI,CAACoB,IAAI,IAAII,OAAO,KAAK,EAAE,IAAIA,OAAO,KAAK,EAAE,EAAE;UAClD,IAAIU,gBAAgB,GAAGrJ,CAAC,CAACgG,IAAI,GAAGa,CAAC,CAACuC,IAAI,KAAK,gBAAgB,GAAG,IAAI;UAClEpJ,CAAC,CAACsI,YAAY,CAAC,KAAK,EAAEe,gBAAgB,IAAIV,OAAO,KAAK,EAAE,CAAC;UACzD3I,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B,CAAC,MAAM,IAAI,OAAON,CAAC,CAAC+B,KAAK,KAAK,WAAW,EAAE;UACvC5I,CAAC,CAACsI,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;QACtC;QAEApB,UAAU,CAAC,YAAY;UACnBqB,IAAI,GAAG,KAAK;QAChB,CAAC,EAAE,EAAE,CAAC;MACV,CAAC,CAAC,CACDG,EAAE,CAAC,OAAO,EAAE,UAAU7B,CAAC,EAAE;QACtB;QACA,IAAIyC,KAAK,GAAGzC,CAAC,CAAC0C,aAAa;QAC3B,IAAI,OAAOD,KAAK,KAAK,QAAQ,KAAKA,KAAK,CAACE,SAAS,KAAK,uBAAuB,IACxEF,KAAK,CAACE,SAAS,KAAK,YAAY,IAAIF,KAAK,CAACzJ,IAAI,KAAK,IAAK,CAAC,EAAE;UAC5DG,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B;MACJ,CAAC,CAAC,CACDuB,EAAE,CAAC,uBAAuB,EAAE,UAAU7B,CAAC,EAAE;QACtC,IAAK,CAACA,CAAC,CAACiC,OAAO,IAAI,CAACjC,CAAC,CAACkC,OAAO,IAAKlC,CAAC,CAACmC,MAAM,EAAE;UACxC9B,UAAU,CAAC,YAAY;YAAE;YACrBqB,IAAI,GAAG,KAAK;UAChB,CAAC,EAAE,EAAE,CAAC;QACV;QACAkB,YAAY,CAAChB,wBAAwB,CAAC;QACtCA,wBAAwB,GAAGvB,UAAU,CAAC,YAAY;UAC9ClH,CAAC,CAAC0J,sBAAsB,CAAC,CAAC;QAC9B,CAAC,EAAE,EAAE,CAAC;MACV,CAAC,CAAC,CACDhB,EAAE,CAAC,YAAY,EAAE,UAAU7B,CAAC,EAAE;QAC3B,IAAIA,CAAC,CAACuC,IAAI,KAAK,MAAM,EAAE;UACnBpJ,CAAC,CAAC2J,qBAAqB,CAAC,CAAC;QAC7B;QACA3J,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,KAAK,GAAGN,CAAC,CAACuC,IAAI,CAAC;QAC5B,IAAIpJ,CAAC,CAAC+E,CAAC,CAACnH,eAAe,EAAE;UACrB,IAAIoC,CAAC,CAAC4J,wBAAwB,EAAE;YAC5B;UACJ;UACA,IAAI/C,CAAC,CAACuC,IAAI,KAAK,OAAO,EAAE;YACpBpJ,CAAC,CAAC6J,yBAAyB,GAAG,IAAI;YAClC7J,CAAC,CAAC8J,qBAAqB,CAAC,CAAC;UAC7B,CAAC,MAAM,IAAI,CAAC9J,CAAC,CAAC+E,CAAC,CAACpH,QAAQ,EAAE;YACtBqC,CAAC,CAACsH,MAAM,CAACyC,GAAG,CAAC;cAACtD,MAAM,EAAEzG,CAAC,CAACsH,MAAM,CAACyC,GAAG,CAAC,YAAY;YAAC,CAAC,CAAC;YAClD/J,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;UAC7B;QACJ;MACJ,CAAC,CAAC,CACDuB,EAAE,CAAC,aAAa,EAAE,YAAY;QAC7B,IAAI,CAAC1I,CAAC,CAAC2B,GAAG,CAAC8F,GAAG,CAAC,CAAC,CAACnF,KAAK,CAAC,MAAM,CAAC,IAAI,CAACtC,CAAC,CAAC0H,GAAG,CAACtG,IAAI,CAAC,CAAC,CAACkB,KAAK,CAAC,MAAM,CAAC,EAAE;UACzD4E,UAAU,CAAC,YAAY;YACnB,IAAI8C,KAAK,GAAGhK,CAAC,CAACgG,IAAI,GAAG,KAAK,GAAG,GAAG;YAChChG,CAAC,CAACyB,GAAG,CAACmF,WAAW,CAAC,aAAa,EAAE,KAAK,EAAEoD,KAAK,CAAC;YAC9ChK,CAAC,CAACgI,QAAQ,CAAC,CAAC;UAChB,CAAC,EAAE,CAAC,CAAC;QACT;MACJ,CAAC,CAAC,CACDU,EAAE,CAAC,UAAU,EAAE,YAAY;QACxBxB,UAAU,CAAC,YAAY;UACnBlH,CAAC,CAACsI,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC;UAC3BtI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B,CAAC,EAAE,CAAC,CAAC;MACT,CAAC,CAAC,CACDuB,EAAE,CAAC,OAAO,EAAE,UAAU7B,CAAC,EAAE;QACtB,IAAI7G,CAAC,CAAC+E,CAAC,CAAC5G,kBAAkB,EAAE;UACxB0I,CAAC,CAACoD,cAAc,CAAC,CAAC;UAElB,IAAI9K,MAAM,CAAC+K,YAAY,IAAI/K,MAAM,CAAC+K,YAAY,CAAC,CAAC,CAACC,kBAAkB,EAAE;YACjEhL,MAAM,CAAC+K,YAAY,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC;UAC9C;UAEA,IAAI;YACA;YACA,IAAIrN,IAAI,GAAGqC,MAAM,CAACiL,aAAa,CAACC,OAAO,CAAC,MAAM,CAAC;YAE/C,IAAI;cACA;cACArK,CAAC,CAACyB,GAAG,CAAC6I,SAAS,CAACC,WAAW,CAAC,CAAC,CAACC,SAAS,CAAC1N,IAAI,CAAC;YACjD,CAAC,CAAC,OAAOuE,CAAC,EAAE;cACR;cACArB,CAAC,CAACyB,GAAG,CAACyI,YAAY,CAAC,CAAC,CAACO,UAAU,CAAC,CAAC,CAAC,CAACC,UAAU,CAAC1K,CAAC,CAACyB,GAAG,CAACkJ,cAAc,CAAC7N,IAAI,CAAC,CAAC;YAC7E;YACAkD,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,EAAEN,CAAC,CAAC;UAChC,CAAC,CAAC,OAAO+D,CAAC,EAAE;YACR;YACA5K,CAAC,CAACC,OAAO,CAAC,YAAY,EAAE,CAAC4G,CAAC,CAAC0C,aAAa,IAAI1C,CAAC,EAAEuD,aAAa,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC;UACvF;QACJ;;QAEA;QACAhL,CAAC,CAACO,IAAI,CAACI,CAAC,CAACrB,aAAa,EAAE,UAAUsD,CAAC,EAAE4I,YAAY,EAAE;UAC/CA,YAAY,CAAChE,CAAC,CAAC;QACnB,CAAC,CAAC;QAEFK,UAAU,CAAC,YAAY;UACnBlH,CAAC,CAACsI,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC;UAC3BtI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,UAAU,EAAEN,CAAC,CAAC;UAC3B7G,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B,CAAC,EAAE,CAAC,CAAC;MACT,CAAC,CAAC;MAENnH,CAAC,CAAC2B,GAAG,CACA+G,EAAE,CAAC,OAAO,EAAE,YAAY;QACrB1I,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;MAC7B,CAAC,CAAC,CACDuB,EAAE,CAAC,OAAO,EAAE,YAAY;QACrBxB,UAAU,CAAC,YAAY;UACnBlH,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B,CAAC,EAAE,CAAC,CAAC;MACT,CAAC,CAAC;MAEN9H,CAAC,CAACW,CAAC,CAACyB,GAAG,CAACqB,IAAI,CAAC,CAAC4F,EAAE,CAAC,UAAU,GAAG1I,CAAC,CAAC2F,cAAc,EAAE,UAAUkB,CAAC,EAAE;QACzD,IAAIA,CAAC,CAAC+B,KAAK,KAAK,EAAE,IAAIvJ,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,WAAW,CAAC,CAACiC,MAAM,IAAI,CAAC,EAAE;UAC7DC,CAAC,CAACQ,UAAU,CAAC,CAAC;UACd,OAAO,KAAK;QAChB;MACJ,CAAC,CAAC;IACN,CAAC;IAED;IACAsJ,qBAAqB,EAAE,SAAAA,CAAA,EAAY;MAC/B,IAAI9J,CAAC,GAAG,IAAI;MACZA,CAAC,CAAC0H,GAAG,CAACoD,WAAW,CAAC,mBAAmB,CAAC;MACtC,IAAIC,SAAS,GAAG/K,CAAC,CAAC0H,GAAG,CAAC,CAAC,CAAC,CAACsD,YAAY;MACrChL,CAAC,CAACsH,MAAM,CAACb,MAAM,CAAC,MAAM,CAAC;MACvB,IAAIwE,WAAW,GAAGjL,CAAC,CAAC0H,GAAG,CAAC,CAAC,CAAC,CAACwD,YAAY;MACvClL,CAAC,CAAC0H,GAAG,CAACO,QAAQ,CAAC,mBAAmB,CAAC;MACnC,IAAI8C,SAAS,KAAKE,WAAW,EAAE;QAC3BjL,CAAC,CAACsH,MAAM,CAACb,MAAM,CAACsE,SAAS,CAAC;QAC1B7D,UAAU,CAAC,YAAY;UACnBlH,CAAC,CAACsH,MAAM,CAACyC,GAAG,CAAC;YAACtD,MAAM,EAAEwE;UAAW,CAAC,CAAC;UACnCjL,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B,CAAC,EAAE,CAAC,CAAC;MACT;IACJ,CAAC;IAGD;IACAJ,YAAY,EAAE,SAAAA,CAAA,EAAY;MACtB,IAAI/G,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;MAEvB,IAAIqN,QAAQ,GAAGnL,CAAC,CAACmL,QAAQ,GAAG9L,CAAC,CAAC,QAAQ,EAAE;QACpC8E,KAAK,EAAErG,MAAM,GAAG;MACpB,CAAC,CAAC;MAEFuB,CAAC,CAACO,IAAI,CAACI,CAAC,CAAC+E,CAAC,CAACxG,IAAI,EAAE,UAAU0D,CAAC,EAAEmJ,MAAM,EAAE;QAClC,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,MAAM,CAAC,EAAE;UACxBA,MAAM,GAAG,CAACA,MAAM,CAAC;QACrB;QAEA,IAAIG,SAAS,GAAGlM,CAAC,CAAC,QAAQ,EAAE;UACxB8E,KAAK,EAAErG,MAAM,GAAG,eAAe,IAAKsN,MAAM,CAAC5I,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,GAAI1E,MAAM,GAAG,OAAO,GAAG,EAAE;QAClG,CAAC,CAAC;QACFuB,CAAC,CAACO,IAAI,CAACwL,MAAM,EAAE,UAAUnJ,CAAC,EAAEuJ,GAAG,EAAE;UAC7B,IAAI;YAAE;YACF,IAAIxL,CAAC,CAACyL,cAAc,CAACD,GAAG,CAAC,EAAE;cAAE;cACzBD,SAAS,CAAC1D,MAAM,CAAC7H,CAAC,CAAC0L,QAAQ,CAACF,GAAG,CAAC,CAAC;YACrC;UACJ,CAAC,CAAC,OAAOnK,CAAC,EAAE,CACZ;QACJ,CAAC,CAAC;QAEF,IAAIkK,SAAS,CAACnK,IAAI,CAAC,CAAC,CAACuK,IAAI,CAAC,CAAC,CAAC5L,MAAM,GAAG,CAAC,EAAE;UACpCoL,QAAQ,CAACtD,MAAM,CAAC0D,SAAS,CAAC;QAC9B;MACJ,CAAC,CAAC;MAEFvL,CAAC,CAACqH,IAAI,CAACuE,OAAO,CAACT,QAAQ,CAAC;IAC5B,CAAC;IAGD;IACAO,QAAQ,EAAE,SAAAA,CAAUlG,OAAO,EAAE;MAAE;MAC3B,IAAIxF,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnB0N,GAAG,GAAGxL,CAAC,CAACxB,OAAO,CAACgH,OAAO,CAAC;QACxBqG,UAAU,GAAGL,GAAG,CAAC3G,QAAQ;QACzBiH,OAAO,GAAGN,GAAG,CAACM,OAAO,IAAI,IAAI,GAAGN,GAAG,CAACM,OAAO,GAAG,IAAI;QAClDC,OAAO,GAAG/L,CAAC,CAACxC,IAAI,CAACgI,OAAO,CAAC,IAAIA,OAAO;QAEpCwG,IAAI,GAAG3M,CAAC,CAAC,WAAW,EAAE;UAClB+J,IAAI,EAAE,QAAQ;UACdjF,KAAK,EAAErG,MAAM,GAAG0H,OAAO,GAAG,UAAU,IAAIgG,GAAG,CAACrH,KAAK,IAAI,EAAE,CAAC,IAAI,CAAC2H,OAAO,GAAG,GAAG,GAAGhO,MAAM,GAAG,gBAAgB,GAAG,EAAE,CAAC;UAC5GsD,IAAI,EAAEpB,CAAC,CAAC+B,MAAM,IAAI+J,OAAO,GACrB,wBAAwB,GAAG9L,CAAC,CAAC9C,OAAO,GAAG,GAAG,GAAGY,MAAM,GAAG,CAAC0N,GAAG,CAAC1G,GAAG,IAAIU,OAAO,EAAE5B,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,CAACqI,WAAW,CAAC,CAAC,GAAG,WAAW,GAClIjM,CAAC,CAAC5C,eAAe,GAAG,EAAE,GAAIoO,GAAG,CAAC1O,IAAI,IAAI0O,GAAG,CAAC3O,KAAK,IAAImD,CAAC,CAACxC,IAAI,CAACgI,OAAO,CAAC,IAAIA,OAAQ;UAClF3I,KAAK,EAAE,CAAC2O,GAAG,CAAC3O,KAAK,IAAI2O,GAAG,CAAC1O,IAAI,IAAIiP,OAAO,KAAKP,GAAG,CAACnH,GAAG,GAAG,IAAI,IAAIrE,CAAC,CAACmG,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,GAAG,KAAK,GAAGqF,GAAG,CAACnH,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC;UACtHgE,QAAQ,EAAE,CAAC,CAAC;UACZ6D,SAAS,EAAE,SAAAA,CAAA,EAAY;YACnB,IAAI,CAACL,UAAU,IAAIxM,CAAC,CAAC,GAAG,GAAGmG,OAAO,GAAG,GAAG,GAAG1H,MAAM,GAAG,UAAU,EAAEkC,CAAC,CAACqH,IAAI,CAAC,CAACG,EAAE,CAAC,SAAS,CAAC,EAAE;cACnFnI,CAAC,CAAC,MAAM,EAAEW,CAAC,CAACyB,GAAG,CAAC,CAAC0F,OAAO,CAAC,WAAW,CAAC;YACzC;YAEA,IAAI,CAACnH,CAAC,CAACmL,QAAQ,CAACgB,QAAQ,CAACrO,MAAM,GAAG,SAAS,CAAC,IAAIkC,CAAC,CAACqH,IAAI,CAAC8E,QAAQ,CAACrO,MAAM,GAAG,UAAU,CAAC,KAChF,CAACuB,CAAC,CAAC,IAAI,CAAC,CAAC8M,QAAQ,CAACrO,MAAM,GAAG,QAAQ,CAAC,IACpC,CAACuB,CAAC,CAAC,IAAI,CAAC,CAAC8M,QAAQ,CAACrO,MAAM,GAAG,aAAa,CAAC,EAAE;cAC3C,OAAO,KAAK;YAChB;YAEAkC,CAAC,CAACC,OAAO,CAAC,CAAC4L,UAAU,GAAG,UAAU,GAAG,KAAK,KAAKL,GAAG,CAAChM,EAAE,IAAIgG,OAAO,EAAEgG,GAAG,CAACrL,KAAK,IAAIqF,OAAO,EAAEgG,GAAG,CAACpL,QAAQ,CAAC;YAErG,OAAO,KAAK;UAChB;QACJ,CAAC,CAAC;MAEN,IAAIyL,UAAU,EAAE;QACZG,IAAI,CAAC/D,QAAQ,CAACnK,MAAM,GAAG,eAAe,CAAC;QACvC,IAAIsO,cAAc,GAAGtO,MAAM,GAAG,UAAU;UACpCuO,eAAe,GAAG;YAAE;YAChBlI,KAAK,EAAEiI,cAAc,GAAG,GAAG,GAAG5G,OAAO,GAAG,GAAG,GAAG4G,cAAc,GAAG,GAAG,GAAGtO,MAAM,GAAG,YAAY,IAAI0N,GAAG,CAACc,aAAa,IAAI,EAAE;UACzH,CAAC;QACLD,eAAe,CAAC,OAAO,GAAGD,cAAc,CAAC,GAAG5G,OAAO;QACnD,IAAI+G,SAAS,GAAGlN,CAAC,CAAC,QAAQ,EAAEgN,eAAe,CAAC;QAC5ChN,CAAC,CAACO,IAAI,CAACiM,UAAU,EAAE,UAAU5J,CAAC,EAAEuK,GAAG,EAAE;UACjC,IAAIxM,CAAC,CAACxB,OAAO,CAACgO,GAAG,CAAC,IAAIxM,CAAC,CAACyL,cAAc,CAACe,GAAG,CAAC,EAAE;YACzCD,SAAS,CAAC1E,MAAM,CAAC7H,CAAC,CAACyM,WAAW,CAACD,GAAG,CAAC,CAAC;UACxC;QACJ,CAAC,CAAC;QACFxM,CAAC,CAACqH,IAAI,CAACQ,MAAM,CAAC0E,SAAS,CAACG,IAAI,CAAC,CAAC,CAAC;MACnC,CAAC,MAAM,IAAIlB,GAAG,CAACnH,GAAG,EAAE;QAChBrE,CAAC,CAAC4F,IAAI,CAAC4F,GAAG,CAACnH,GAAG,CAAC,GAAG;UACd7E,EAAE,EAAEgM,GAAG,CAAChM,EAAE,IAAIgG,OAAO;UACrBrF,KAAK,EAAEqL,GAAG,CAACrL,KAAK,IAAIqF;QACxB,CAAC;MACL;MAEA,IAAI,CAACqG,UAAU,EAAE;QACb7L,CAAC,CAAC6F,WAAW,CAAC,CAAC2F,GAAG,CAAC5G,GAAG,IAAIY,OAAO,EAAEyG,WAAW,CAAC,CAAC,CAAC,GAAGzG,OAAO;MAC/D;MAEA,OAAOwG,IAAI;IACf,CAAC;IACD;IACA;IACAS,WAAW,EAAE,SAAAA,CAAUjH,OAAO,EAAE;MAC5B,IAAIxF,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnB0N,GAAG,GAAGxL,CAAC,CAACxB,OAAO,CAACgH,OAAO,CAAC;QACxBsG,OAAO,GAAGN,GAAG,CAACM,OAAO,IAAI,IAAI,GAAGN,GAAG,CAACM,OAAO,GAAG,IAAI;MAEtD,IAAIN,GAAG,CAACnH,GAAG,EAAE;QACTrE,CAAC,CAAC4F,IAAI,CAAC4F,GAAG,CAACnH,GAAG,CAAC,GAAG;UACd7E,EAAE,EAAEgM,GAAG,CAAChM,EAAE,IAAIgG,OAAO;UACrBrF,KAAK,EAAEqL,GAAG,CAACrL,KAAK,IAAIqF;QACxB,CAAC;MACL;MAEAxF,CAAC,CAAC6F,WAAW,CAAC,CAAC2F,GAAG,CAAC5G,GAAG,IAAIY,OAAO,EAAEyG,WAAW,CAAC,CAAC,CAAC,GAAGzG,OAAO;MAE3D,OAAOnG,CAAC,CAAC,WAAW,EAAE;QAClB+J,IAAI,EAAE,QAAQ;QACdjF,KAAK,EAAErG,MAAM,GAAG0H,OAAO,GAAG,mBAAmB,IAAIgG,GAAG,CAACrH,KAAK,IAAI,EAAE,CAAC,IAAIqH,GAAG,CAAC1G,GAAG,GAAG,GAAG,GAAGhH,MAAM,GAAG0N,GAAG,CAAC1G,GAAG,GAAG,SAAS,GAAG,EAAE,CAAC;QACvH1D,IAAI,EAAEpB,CAAC,CAAC+B,MAAM,IAAI+J,OAAO,GACrB,wBAAwB,GAAG9L,CAAC,CAAC9C,OAAO,GAAG,GAAG,GAAGY,MAAM,GAAG,CAAC0N,GAAG,CAAC1G,GAAG,IAAIU,OAAO,EAAE5B,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,CAACqI,WAAW,CAAC,CAAC,GAAG,WAAW,IAAIT,GAAG,CAAC1O,IAAI,IAAI0O,GAAG,CAAC3O,KAAK,IAAImD,CAAC,CAACxC,IAAI,CAACgI,OAAO,CAAC,IAAIA,OAAO,CAAC,GACzLgG,GAAG,CAAC1O,IAAI,IAAI0O,GAAG,CAAC3O,KAAK,IAAImD,CAAC,CAACxC,IAAI,CAACgI,OAAO,CAAC,IAAIA,OAAQ;QACzD3I,KAAK,EAAG2O,GAAG,CAACnH,GAAG,GAAG,GAAG,IAAIrE,CAAC,CAACmG,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,GAAG,KAAK,GAAGqF,GAAG,CAACnH,GAAG,GAAG,GAAG,GAAG,IAAK;QAClFsI,KAAK,EAAEnB,GAAG,CAACmB,KAAK,IAAI,IAAI;QACxBT,SAAS,EAAE,SAAAA,CAAA,EAAY;UACnB7M,CAAC,CAAC,MAAM,EAAEW,CAAC,CAACyB,GAAG,CAAC,CAAC0F,OAAO,CAAC,WAAW,CAAC;UAErCnH,CAAC,CAACC,OAAO,CAACuL,GAAG,CAAChM,EAAE,IAAIgG,OAAO,EAAEgG,GAAG,CAACrL,KAAK,IAAIqF,OAAO,EAAEgG,GAAG,CAACpL,QAAQ,CAAC;UAEhE,OAAO,KAAK;QAChB;MACJ,CAAC,CAAC;IACN,CAAC;IACD;IACAqL,cAAc,EAAE,SAAAA,CAAUjG,OAAO,EAAE;MAC/B,IAAI;QACA,OAAO,IAAI,CAAChH,OAAO,CAACgH,OAAO,CAAC,CAACpB,WAAW,CAAC,CAAC;MAC9C,CAAC,CAAC,OAAOyC,CAAC,EAAE,CACZ;MACA,OAAO,IAAI;IACf,CAAC;IAED;IACAI,YAAY,EAAE,SAAAA,CAAA,EAAY;MACtB,IAAIjH,CAAC,GAAG,IAAI;MACZA,CAAC,CAAC4M,QAAQ,GAAGvN,CAAC,CAAC,QAAQ,EAAE;QACrB8E,KAAK,EAAEnE,CAAC,CAAC+E,CAAC,CAACjH,MAAM,GAAG;MACxB,CAAC,CAAC,CAAC6J,QAAQ,CAAC3H,CAAC,CAACqH,IAAI,CAAC;MACnB,OAAOrH,CAAC,CAAC4M,QAAQ;IACrB,CAAC;IACDC,WAAW,EAAE,SAAAA,CAAA,EAAY;MACrB,IAAI7M,CAAC,GAAG,IAAI;MACZX,CAAC,CAACF,MAAM,CAAC,CAACgI,OAAO,CAAC,QAAQ,CAAC;MAC3BnH,CAAC,CAAC4M,QAAQ,CAACE,MAAM,CAAC,GAAG,CAAC;MACtB9M,CAAC,CAACqH,IAAI,CAACY,QAAQ,CAACjI,CAAC,CAAC+E,CAAC,CAACjH,MAAM,GAAG,UAAU,CAAC;IAC5C,CAAC;IACDiP,WAAW,EAAE,SAAAA,CAAA,EAAY;MACrB,IAAI/M,CAAC,GAAG,IAAI;MACZA,CAAC,CAAC4M,QAAQ,CAACI,OAAO,CAAC,EAAE,CAAC;MACtBhN,CAAC,CAACqH,IAAI,CAACyD,WAAW,CAAC9K,CAAC,CAAC+E,CAAC,CAACjH,MAAM,GAAG,UAAU,CAAC;IAC/C,CAAC;IAED;IACAkJ,kBAAkB,EAAE,SAAAA,CAAA,EAAY;MAC5B,IAAIhH,CAAC,GAAG,IAAI;QACRtC,cAAc,GAAGsC,CAAC,CAAC+E,CAAC,CAACrH,cAAc;QACnC2J,IAAI,GAAGrH,CAAC,CAACqH,IAAI;MAEjB,IAAI,CAACrH,CAAC,CAAC+E,CAAC,CAACtH,YAAY,EAAE;QACnB;MACJ;MAEAuC,CAAC,CAACiN,OAAO,GAAG,KAAK;MAEjB5N,CAAC,CAACF,MAAM,CAAC,CACJuJ,EAAE,CAAC,SAAS,GAAG1I,CAAC,CAAC2F,cAAc,GAAG,UAAU,GAAG3F,CAAC,CAAC2F,cAAc,EAAE,YAAY;QAC1E,IAAI,CAAC0B,IAAI,EAAE;UACP;QACJ;QAEArH,CAAC,CAACgI,QAAQ,CAAC,CAAC;QAEZ,IAAIkF,SAAS,GAAG7N,CAAC,CAACF,MAAM,CAAC,CAAC+N,SAAS,CAAC,CAAC;UACjCC,MAAM,GAAG9F,IAAI,CAAC8F,MAAM,CAAC,CAAC,CAACC,GAAG,GAAG,CAAC;UAC9BC,WAAW,GAAGrN,CAAC,CAACmL,QAAQ;UACxBmC,qBAAqB,GAAGD,WAAW,CAAC3G,WAAW,CAAC,CAAC,GAAG,CAAC;QAEzD,IAAKwG,SAAS,GAAGC,MAAM,GAAG,CAAC,IAAOD,SAAS,GAAGC,MAAM,GAAGnN,CAAC,CAACyG,MAAM,GAAI,CAAE,EAAE;UACnE,IAAI,CAACzG,CAAC,CAACiN,OAAO,EAAE;YACZjN,CAAC,CAACiN,OAAO,GAAG,IAAI;YAChBI,WAAW,CAACtD,GAAG,CAAC;cACZwD,QAAQ,EAAE,OAAO;cACjBH,GAAG,EAAE,CAAC;cACNI,IAAI,EAAE9P,cAAc,GAAG,CAAC,GAAG,MAAM;cACjC+P,MAAM,EAAE;YACZ,CAAC,CAAC;YACFzN,CAAC,CAACqH,IAAI,CAAC0C,GAAG,CAAC;cAAC2D,UAAU,EAAEL,WAAW,CAAC5G,MAAM,CAAC;YAAC,CAAC,CAAC;UAClD;UACA4G,WAAW,CAACtD,GAAG,CAAC;YACZ/M,KAAK,EAAEU,cAAc,GAAG,MAAM,GAAK2J,IAAI,CAACrK,KAAK,CAAC,CAAC,GAAG;UACtD,CAAC,CAAC;UAEFqC,CAAC,CAAC,GAAG,GAAGW,CAAC,CAAC+E,CAAC,CAACjH,MAAM,GAAG,WAAW,EAAEuJ,IAAI,CAAC,CAAC0C,GAAG,CAAC;YACxCwD,QAAQ,EAAE7P,cAAc,GAAG,OAAO,GAAG,UAAU;YAC/C0P,GAAG,EAAE1P,cAAc,GAAG4P,qBAAqB,GAAGA,qBAAqB,IAAIJ,SAAS,GAAGC,MAAM,CAAC;YAC1FM,MAAM,EAAE;UACZ,CAAC,CAAC;QACN,CAAC,MAAM,IAAIzN,CAAC,CAACiN,OAAO,EAAE;UAClBjN,CAAC,CAACiN,OAAO,GAAG,KAAK;UACjBI,WAAW,CAACM,UAAU,CAAC,OAAO,CAAC;UAC/B3N,CAAC,CAACqH,IAAI,CAAC0C,GAAG,CAAC;YAAC2D,UAAU,EAAE;UAAC,CAAC,CAAC;UAC3BrO,CAAC,CAAC,GAAG,GAAGW,CAAC,CAAC+E,CAAC,CAACjH,MAAM,GAAG,WAAW,EAAEuJ,IAAI,CAAC,CAAC0C,GAAG,CAAC;YACxCwD,QAAQ,EAAE,UAAU;YACpBH,GAAG,EAAEE;UACT,CAAC,CAAC;QACN;MACJ,CAAC,CAAC;IACV,CAAC;IAED;IACAtM,WAAW,EAAE,SAAAA,CAAU4M,OAAO,EAAE;MAC5B,IAAI5N,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;MAEvBkC,CAAC,CAACsF,QAAQ,GAAGsI,OAAO;MAEpB,IAAIA,OAAO,EAAE;QACT5N,CAAC,CAAC2B,GAAG,CAACoG,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC;MAChC,CAAC,MAAM;QACH/H,CAAC,CAAC2B,GAAG,CAACgM,UAAU,CAAC,UAAU,CAAC;MAChC;MACA3N,CAAC,CAACqH,IAAI,CAACwG,WAAW,CAAC/P,MAAM,GAAG,UAAU,EAAE8P,OAAO,CAAC;MAChD5N,CAAC,CAAC0H,GAAG,CAACK,IAAI,CAAC,iBAAiB,EAAE,CAAC6F,OAAO,CAAC;IAC3C,CAAC;IAED;IACA1M,OAAO,EAAE,SAAAA,CAAA,EAAY;MACjB,IAAIlB,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;MAEvB,IAAIkC,CAAC,CAACuH,UAAU,EAAE;QACdvH,CAAC,CAACqH,IAAI,CAACyG,KAAK,CACR9N,CAAC,CAAC2B,GAAG,CACAoI,GAAG,CAAC;UAACtD,MAAM,EAAE;QAAE,CAAC,CAAC,CACjBgB,GAAG,CAACzH,CAAC,CAACoB,IAAI,CAAC,CAAC,CAAC,CACb0J,WAAW,CAAChN,MAAM,GAAG,UAAU,CAAC,CAChCiQ,IAAI,CAAC,CACd,CAAC;MACL,CAAC,MAAM;QACH/N,CAAC,CAACqH,IAAI,CAACyG,KAAK,CACR9N,CAAC,CAACsH,MAAM,CACHyC,GAAG,CAAC;UAACtD,MAAM,EAAE;QAAE,CAAC,CAAC,CACjBqE,WAAW,CAAChN,MAAM,GAAG,QAAQ,CAAC,CAC9B6P,UAAU,CAAC,iBAAiB,CAAC,CAC7BA,UAAU,CAAC,KAAK,CAAC,CACjBvM,IAAI,CAACpB,CAAC,CAACoB,IAAI,CAAC,CAAC,CAAC,CACd2M,IAAI,CAAC,CACd,CAAC;MACL;MAEA/N,CAAC,CAAC0H,GAAG,CAACsG,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC;MAE5BhO,CAAC,CAACiO,cAAc,CAAC,CAAC;MAElBjO,CAAC,CAACqH,IAAI,CAAC6G,MAAM,CAAC,CAAC;MACflO,CAAC,CAAC4B,EAAE,CAACuM,UAAU,CAAC,WAAW,CAAC;MAC5B9O,CAAC,CAAC,MAAM,CAAC,CAACyL,WAAW,CAAChN,MAAM,GAAG,iBAAiB,CAAC;MACjDkC,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,UAAU,CAAC;MACxB9H,CAAC,CAACF,MAAM,CAAC,CAAC6O,GAAG,CAAC,SAAS,GAAGhO,CAAC,CAAC2F,cAAc,GAAG,UAAU,GAAG3F,CAAC,CAAC2F,cAAc,CAAC;MAC3EtG,CAAC,CAACW,CAAC,CAACyB,GAAG,CAACqB,IAAI,CAAC,CAACkL,GAAG,CAAC,UAAU,GAAGhO,CAAC,CAAC2F,cAAc,CAAC;IACpD,CAAC;IAGD;IACAxE,KAAK,EAAE,SAAAA,CAAA,EAAY;MACf,IAAI,CAACM,GAAG,CAACmF,WAAW,CAAC,YAAY,EAAE,KAAK,EAAE,EAAE,CAAC;MAC7C,IAAI,CAACjF,GAAG,CAAC8F,GAAG,CAAC,EAAE,CAAC;MAChB,IAAI,CAACO,QAAQ,CAAC,IAAI,CAAC;IACvB,CAAC;IAGD;IACA/G,MAAM,EAAE,SAAAA,CAAA,EAAY;MAChB,IAAIjB,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;MAEvB,IAAIkC,CAAC,CAAC+E,CAAC,CAACnH,eAAe,EAAE;QACrBoC,CAAC,CAAC4J,wBAAwB,GAAG,CAAC5J,CAAC,CAACqH,IAAI,CAAC8E,QAAQ,CAACrO,MAAM,GAAG,eAAe,CAAC;MAC3E;MAEAkC,CAAC,CAACsI,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC;MAC3BtI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;MAEzBD,UAAU,CAAC,YAAY;QACnBlH,CAAC,CAACyB,GAAG,CAAC2M,aAAa,CAACC,IAAI,CAAC,CAAC;QAC1BrO,CAAC,CAACqH,IAAI,CAACwG,WAAW,CAAC/P,MAAM,GAAG,gBAAgB,GAAGA,MAAM,GAAG,gBAAgB,CAAC;QACzEkC,CAAC,CAACmL,QAAQ,CAAC0C,WAAW,CAAC/P,MAAM,GAAG,SAAS,CAAC;QAC1CuB,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,iBAAiB,EAAEkC,CAAC,CAACmL,QAAQ,CAAC,CAAC0C,WAAW,CAAC/P,MAAM,GAAG,QAAQ,CAAC;QAC9E,IAAIkC,CAAC,CAACqH,IAAI,CAAC8E,QAAQ,CAACrO,MAAM,GAAG,gBAAgB,CAAC,EAAE;UAC5CkC,CAAC,CAAC2B,GAAG,CAACoG,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;QAC9B,CAAC,MAAM;UACH/H,CAAC,CAAC2B,GAAG,CAACgM,UAAU,CAAC,UAAU,CAAC;QAChC;QAEA,IAAI3N,CAAC,CAAC+E,CAAC,CAACnH,eAAe,IAAI,CAACoC,CAAC,CAAC4J,wBAAwB,EAAE;UACpD5J,CAAC,CAAC8J,qBAAqB,CAAC,CAAC;QAC7B;MACJ,CAAC,EAAE,CAAC,CAAC;IACT,CAAC;IAED;IACAjB,UAAU,EAAE,SAAAA,CAAUyF,OAAO,EAAE;MAC3B,IAAItO,CAAC,GAAG,IAAI;MACZA,CAAC,CAAC0H,GAAG,CAAC6G,IAAI,CAAC,MAAM,CAAC,CAAC3O,IAAI,CAAC,YAAY;QAChC,IAAI0O,OAAO,KAAK,IAAI,EAAE;UAClBjP,CAAC,CAAC,IAAI,CAAC,CAAC0I,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC;QACvC,CAAC,MAAM;UACH,IAAI1I,CAAC,CAAC,IAAI,CAAC,CAAC0I,IAAI,CAAC,eAAe,CAAC,EAAE;YAC/B1I,CAAC,CAAC,IAAI,CAAC,CAACsO,UAAU,CAAC,eAAe,CAAC;UACvC,CAAC,MAAM;YACHtO,CAAC,CAAC,IAAI,CAAC,CAACmP,QAAQ,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;UAC/B;QACJ;MACJ,CAAC,CAAC;IACN,CAAC;IAED;IACA5J,QAAQ,EAAE,SAAAA,CAAUiD,IAAI,EAAE;MACtB,IAAI9H,CAAC,GAAG,IAAI;QACR0O,KAAK,GAAGrP,CAAC,CAAC,MAAM,EAAEW,CAAC,CAACyB,GAAG,CAAC;QACxB3D,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnByO,SAAS,GAAGlN,CAAC,CAAC,QAAQ,GAAGvB,MAAM,GAAG,WAAW,GAAGgK,IAAI,GAAG,GAAG,EAAE9H,CAAC,CAACqH,IAAI,CAAC;QACnE2E,IAAI,GAAG3M,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAGgK,IAAI,GAAG,SAAS,EAAE9H,CAAC,CAACmL,QAAQ,CAAC;QACrD4C,IAAI,GAAGxB,SAAS,CAAC/E,EAAE,CAAC,SAAS,CAAC;MAElCkH,KAAK,CAACvH,OAAO,CAAC,WAAW,CAAC;MAE1B,IAAI4G,IAAI,EAAE;QACN,IAAIY,aAAa,GAAG3C,IAAI,CAACmB,MAAM,CAAC,CAAC,CAACK,IAAI;QACtCxB,IAAI,CAAC/D,QAAQ,CAACnK,MAAM,GAAG,QAAQ,CAAC;QAEhCyO,SAAS,CAACxC,GAAG,CAAC;UACVwD,QAAQ,EAAE,UAAU;UACpBH,GAAG,EAAEpB,IAAI,CAACmB,MAAM,CAAC,CAAC,CAACC,GAAG,GAAGpN,CAAC,CAACmL,QAAQ,CAACgC,MAAM,CAAC,CAAC,CAACC,GAAG,GAAGpB,IAAI,CAACtF,WAAW,CAAC,CAAC;UACrE8G,IAAI,EAAGxN,CAAC,CAAC+E,CAAC,CAACrH,cAAc,IAAIsC,CAAC,CAACiN,OAAO,GAAI0B,aAAa,GAAIA,aAAa,GAAG3O,CAAC,CAACmL,QAAQ,CAACgC,MAAM,CAAC,CAAC,CAACK;QACnG,CAAC,CAAC,CAACO,IAAI,CAAC,CAAC;QAET1O,CAAC,CAACF,MAAM,CAAC,CAACgI,OAAO,CAAC,QAAQ,CAAC;QAE3BuH,KAAK,CAAChG,EAAE,CAAC,YAAY,GAAG1I,CAAC,CAAC2F,cAAc,EAAE,UAAUkB,CAAC,EAAE;UACnD,IAAI,CAAC0F,SAAS,CAAC/E,EAAE,CAACX,CAAC,CAAC9J,MAAM,CAAC,EAAE;YACzBsC,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,UAAU,EAAEkC,CAAC,CAACqH,IAAI,CAAC,CAACqF,IAAI,CAAC,CAAC;YAC3CrN,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,QAAQ,EAAEkC,CAAC,CAACmL,QAAQ,CAAC,CAACL,WAAW,CAAChN,MAAM,GAAG,QAAQ,CAAC;YACrE4Q,KAAK,CAACV,GAAG,CAAC,YAAY,GAAGhO,CAAC,CAAC2F,cAAc,CAAC;UAC9C;QACJ,CAAC,CAAC;MACN;IACJ,CAAC;IAGD;IACAvE,IAAI,EAAE,SAAAA,CAAUA,IAAI,EAAE;MAClB,IAAIpB,CAAC,GAAG,IAAI;MAEZ,IAAIoB,IAAI,IAAI,IAAI,EAAE;QACdpB,CAAC,CAAC2B,GAAG,CAAC8F,GAAG,CAACrG,IAAI,CAAC;QACfpB,CAAC,CAACgI,QAAQ,CAAC,IAAI,CAAC;QAChBhI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QACzB,OAAOnH,CAAC;MACZ;MAEA,OAAOA,CAAC,CAAC2B,GAAG,CAAC8F,GAAG,CAAC,CAAC;IACtB,CAAC;IACDmH,YAAY,EAAE,SAAAA,CAAA,EAAY;MACtB,IAAI5O,CAAC,GAAG,IAAI;MACZA,CAAC,CAAC2B,GAAG,CAAC8F,GAAG,CAACzH,CAAC,CAAC0H,GAAG,CAAC5K,IAAI,CAAC,CAAC,CAAC6O,IAAI,CAAC,CAAC,CAAC5L,MAAM,GAAG,CAAC,IAAIC,CAAC,CAAC0H,GAAG,CAAC6G,IAAI,CAACvO,CAAC,CAAC+E,CAAC,CAACzG,UAAU,CAACuQ,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC9O,MAAM,GAAG,CAAC,GAAGC,CAAC,CAAC0H,GAAG,CAACtG,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;IACpH,CAAC;IACD4G,QAAQ,EAAE,SAAAA,CAAU8G,KAAK,EAAE;MACvB,IAAI9O,CAAC,GAAG,IAAI;MACZ,IAAI,CAAC8O,KAAK,IAAI9O,CAAC,CAAC0H,GAAG,CAACF,EAAE,CAAC,UAAU,CAAC,EAAE;QAChCxH,CAAC,CAAC4O,YAAY,CAAC,CAAC;MACpB,CAAC,MAAM;QACH;QACA,IAAIxN,IAAI,GAAG/B,CAAC,CAAC,OAAO,CAAC,CAAC+B,IAAI,CAACpB,CAAC,CAAC2B,GAAG,CAAC8F,GAAG,CAAC,CAAC,CAAC;QACvC;QACA,IAAIsH,IAAI,GAAG1P,CAAC,CAAC,OAAO,CAAC,CAACwI,MAAM,CAACzG,IAAI,CAAC;QAClC/B,CAAC,CAACW,CAAC,CAAC+E,CAAC,CAAC1G,YAAY,CAACwQ,IAAI,CAAC,GAAG,CAAC,EAAEE,IAAI,CAAC,CAACb,MAAM,CAAC,CAAC;QAC5ClO,CAAC,CAAC0H,GAAG,CAACtG,IAAI,CAAC2N,IAAI,CAACP,QAAQ,CAAC,CAAC,CAACpN,IAAI,CAAC,CAAC,CAAC;MACtC;MAEA,IAAIpB,CAAC,CAAC+E,CAAC,CAACpH,QAAQ,EAAE;QACdqC,CAAC,CAACyG,MAAM,GAAGzG,CAAC,CAACsH,MAAM,CAACb,MAAM,CAAC,CAAC;QAC5B,IAAIzG,CAAC,CAACyG,MAAM,KAAKzG,CAAC,CAAC2B,GAAG,CAACoI,GAAG,CAAC,QAAQ,CAAC,EAAE;UAClC/J,CAAC,CAAC2B,GAAG,CAACoI,GAAG,CAAC;YAACtD,MAAM,EAAEzG,CAAC,CAACyG;UAAM,CAAC,CAAC;UAC7BzG,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B;MACJ;MACA,IAAInH,CAAC,CAAC+E,CAAC,CAACnH,eAAe,EAAE;QACrBoC,CAAC,CAACsH,MAAM,CAACb,MAAM,CAAC,MAAM,CAAC;QACvB,IAAIwE,WAAW,GAAGjL,CAAC,CAAC6J,yBAAyB,GAAG7J,CAAC,CAACsH,MAAM,CAAC,CAAC,CAAC,CAAC4D,YAAY,GAAGlL,CAAC,CAACsH,MAAM,CAACyC,GAAG,CAAC,YAAY,CAAC;QACrG,IAAIkB,WAAW,KAAKjL,CAAC,CAAC2B,GAAG,CAACoI,GAAG,CAAC,QAAQ,CAAC,EAAE;UACrC/J,CAAC,CAACsH,MAAM,CAACyC,GAAG,CAAC;YAACtD,MAAM,EAAEwE;UAAW,CAAC,CAAC;UACnCjL,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B;MACJ;IACJ,CAAC;IAED;IACA;IACA;IACA;IACAmB,YAAY,EAAE,SAAAA,CAAUwG,KAAK,EAAEE,IAAI,EAAEC,SAAS,EAAE;MAC5C,IAAIjP,CAAC,GAAG,IAAI;MACZA,CAAC,CAACY,SAAS,CAAC,CAAC;MACbZ,CAAC,CAACgI,QAAQ,CAAC8G,KAAK,CAAC;MAEjB,IAAI/N,YAAY,GAAG,IAAI;MACvB,IAAIf,CAAC,CAACa,KAAK,IAAIb,CAAC,CAACa,KAAK,CAACqO,SAAS,EAAE;QAC9BnO,YAAY,GAAG,KAAK;MACxB;MAEA,IAAIf,CAAC,CAAC+E,CAAC,CAAC/G,QAAQ,EAAE;QACdgC,CAAC,CAACmP,WAAW,CAAC,GAAG,EAAEnP,CAAC,CAAC+E,CAAC,CAAC9G,sBAAsB,CAAC;QAC9C+B,CAAC,CAACmP,WAAW,CAAC,GAAG,EAAEnP,CAAC,CAAC+E,CAAC,CAAC9G,sBAAsB,CAAC;QAC9C+B,CAAC,CAACmP,WAAW,CAAC,GAAG,EAAEnP,CAAC,CAAC+E,CAAC,CAAC9G,sBAAsB,CAAC;QAC9C+B,CAAC,CAACmP,WAAW,CAAC,QAAQ,EAAEnP,CAAC,CAAC+E,CAAC,CAAC9G,sBAAsB,CAAC;QAEnD,IAAI+Q,IAAI,EAAE;UACN,IAAItQ,sBAAsB,GAAGsB,CAAC,CAAC+E,CAAC,CAACrG,sBAAsB;YACnD0Q,qBAAqB,GAAG,OAAO,GAAG1Q,sBAAsB,GAAG,GAAG;;UAElE;UACAsB,CAAC,CAAC0H,GAAG,CAAC8G,QAAQ,CAAC,CAAC,CAACa,MAAM,CAAC,YAAY;YAChC,OAAO,IAAI,CAACC,QAAQ,KAAK,CAAC,IAAI,IAAI,CAACC,SAAS,CAAC5D,IAAI,CAAC,CAAC,CAAC5L,MAAM,GAAG,CAAC;UAClE,CAAC,CAAC,CAACyP,IAAI,CAAC,kBAAkB,CAAC;;UAE3B;UACA,IAAIC,2BAA2B,GAAG,SAAAA,CAAUC,KAAK,EAAE;YAC/C,IAAIA,KAAK,CAAC3P,MAAM,KAAK,CAAC,EAAE;cACpB,IAAI4P,eAAe,GAAGD,KAAK,CAACE,SAAS,CAACR,qBAAqB,CAAC,CAACS,OAAO,CAAC,CAAC,CAACC,OAAO,CAAC,MAAM,CAAC,CAACC,MAAM,CAAC,CAAC;gBAC3FC,YAAY,GAAGL,eAAe,CAACM,OAAO,CAACvR,sBAAsB,CAAC,CAACwR,KAAK,CAAC,CAAC;cAC1EP,eAAe,CAACQ,IAAI,CAAC,IAAI,CAAC,CAACjC,MAAM,CAAC,CAAC;cACnCuB,2BAA2B,CAACO,YAAY,CAAC;YAC7C;UACJ,CAAC;UACDP,2BAA2B,CAACzP,CAAC,CAAC0H,GAAG,CAAC0I,QAAQ,CAAC1R,sBAAsB,CAAC,CAACwR,KAAK,CAAC,CAAC,CAAC;UAE3ElQ,CAAC,CAACmP,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC;;UAE1B;UACA9P,CAAC,CAAC,YAAY,EAAEW,CAAC,CAAC0H,GAAG,CAAC,CAAC8G,QAAQ,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;;UAE1C;UACAzO,CAAC,CAAC0H,GAAG,CAAC6G,IAAI,CAAC,SAAS,CAAC,CAACL,MAAM,CAAC,CAAC;QAClC;QAEA,IAAI,CAACe,SAAS,IAAIlO,YAAY,EAAE;UAC5Bf,CAAC,CAACe,YAAY,CAAC,CAAC;QACpB;QAEAf,CAAC,CAAC4O,YAAY,CAAC,CAAC;MACpB;IACJ,CAAC;IAEDO,WAAW,EAAE,SAAAA,CAAUkB,MAAM,EAAEC,cAAc,EAAEC,MAAM,EAAE;MACnD,IAAIC,MAAM;QAAExQ,CAAC,GAAG,IAAI;MACpB,IAAIyQ,MAAM,GAAGJ,MAAM;MAEnB,IAAI,IAAI,CAACtL,CAAC,CAAC/G,QAAQ,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC+G,CAAC,CAAC/G,QAAQ,KAAK,QAAQ,IAAI,IAAI,CAAC+G,CAAC,CAAC/G,QAAQ,CAACiH,cAAc,CAACoL,MAAM,CAAC,EAAE;QAC1GG,MAAM,GAAG,IAAI,CAACzL,CAAC,CAAC/G,QAAQ,CAACqS,MAAM,CAAC;MACpC,CAAC,MAAM,IAAI,IAAI,CAACtL,CAAC,CAAC/G,QAAQ,KAAK,IAAI,IAAI,IAAI,CAACwI,oBAAoB,CAACvB,cAAc,CAACoL,MAAM,CAAC,EAAE;QACrFG,MAAM,GAAG,IAAI,CAAChK,oBAAoB,CAAC6J,MAAM,CAAC;MAC9C,CAAC,MAAM;QACH;MACJ;MAEA,IAAGE,MAAM,EAAE;QACPF,MAAM,GAAGG,MAAM;QACfA,MAAM,GAAGC,MAAM;MACnB;MAEApR,CAAC,CAACgR,MAAM,EAAE,IAAI,CAAC3I,GAAG,CAAC,CAAC9H,IAAI,CAAC,YAAY;QACjC,IAAI8Q,UAAU,GAAG,KAAK;QACtB,IAAIC,OAAO,GAAGtR,CAAC,CAAC,IAAI,CAAC;QACrB,IAAIsR,OAAO,CAACnC,QAAQ,CAAC,CAAC,CAACzO,MAAM,KAAK,CAAC,EAAE;UACjC,OAAO,KAAK;QAChB;QAEA,IAAIC,CAAC,CAACa,KAAK,IAAIb,CAAC,CAACa,KAAK,CAAC+P,cAAc,CAACC,UAAU,KAAK,IAAI,EAAE;UACvDH,UAAU,GAAG,IAAI;QACrB;QACA,IAAII,OAAO,GAAGzR,CAAC,CAAC,GAAG,GAAGmR,MAAM,GAAG,IAAI,CAAC;QACpCM,OAAO,CAAC/N,YAAY,CAAC4N,OAAO,CAAC;QAC7B,IAAIL,cAAc,EAAE;UAChBjR,CAAC,CAACO,IAAI,CAAC+Q,OAAO,CAACI,IAAI,CAAC,YAAY,CAAC,EAAE,YAAY;YAC3CD,OAAO,CAAC/I,IAAI,CAAC,IAAI,CAACD,IAAI,EAAE,IAAI,CAACvK,KAAK,CAAC;UACvC,CAAC,CAAC;QACN;QACAuT,OAAO,CAAC1P,IAAI,CAACuP,OAAO,CAACvP,IAAI,CAAC,CAAC,CAAC;QAC5BuP,OAAO,CAACzC,MAAM,CAAC,CAAC;QAChB,IAAGwC,UAAU,KAAK,IAAI,EAAE;UACpB1Q,CAAC,CAACa,KAAK,CAACmQ,kBAAkB,CAACF,OAAO,CAACG,GAAG,CAAC,CAAC,CAAC,CAAC;UAC1CjR,CAAC,CAACa,KAAK,CAACqQ,QAAQ,CAAC,KAAK,CAAC;QAC3B;MACJ,CAAC,CAAC;IACN,CAAC;IAED;IACArV,UAAU,EAAE,SAAAA,CAAA,EAAY;MACpB,IAAImE,CAAC,GAAG,IAAI;QACRmR,iBAAiB,GAAGnR,CAAC,CAACyB,GAAG,CAACyI,YAAY,CAAC,CAAC;QACxCkH,aAAa,GAAGD,iBAAiB,CAAC1G,UAAU,CAAC,CAAC,CAAC;QAC/C4G,IAAI,GAAGF,iBAAiB,CAACG,SAAS;QAClCxU,IAAI,GAAG,IAAIyU,aAAa,CAAC,CAAC,CAACC,iBAAiB,CAACJ,aAAa,CAACK,aAAa,CAAC,CAAC,CAAC,IAAIL,aAAa,GAAG,EAAE;QACjGM,GAAG;QACH7U,KAAK;QACLE,MAAM;QACN4U,iBAAiB,GAAG3R,CAAC,CAAC+E,CAAC,CAACjG,WAAW,CAAC,CAAC,CAAC;MAE1C,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC0D,OAAO,CAAC6O,IAAI,CAAC9L,QAAQ,CAAC,GAAG,CAAC,EAAE;QAC5C8L,IAAI,GAAGA,IAAI,CAACR,UAAU;MAC1B;MAEA,IAAIQ,IAAI,IAAIA,IAAI,CAAC9L,QAAQ,KAAK,GAAG,EAAE;QAC/B,IAAIqM,EAAE,GAAGvS,CAAC,CAACgS,IAAI,CAAC;QAChBvU,IAAI,GAAG8U,EAAE,CAAC9U,IAAI,CAAC,CAAC;QAChB4U,GAAG,GAAGE,EAAE,CAAC7J,IAAI,CAAC,MAAM,CAAC;QACrB,IAAI,CAAC/H,CAAC,CAAC+E,CAAC,CAAClG,YAAY,EAAE;UACnBhC,KAAK,GAAG+U,EAAE,CAAC7J,IAAI,CAAC,OAAO,CAAC;UACxBhL,MAAM,GAAG6U,EAAE,CAAC7J,IAAI,CAAC,QAAQ,CAAC,IAAI4J,iBAAiB;QACnD;QACA,IAAI9Q,KAAK,GAAGb,CAAC,CAACyB,GAAG,CAAC8I,WAAW,CAAC,CAAC;QAC/B1J,KAAK,CAACgR,UAAU,CAACR,IAAI,CAAC;QACtBF,iBAAiB,CAACW,eAAe,CAAC,CAAC;QACnCX,iBAAiB,CAACY,QAAQ,CAAClR,KAAK,CAAC;MACrC;MAEAb,CAAC,CAACY,SAAS,CAAC,CAAC;MAEb,IAAInB,OAAO,GAAG;QACViS,GAAG,EAAE;UACDM,KAAK,EAAEhS,CAAC,CAACxC,IAAI,CAACyU,OAAO,IAAI,KAAK;UAC9BtV,QAAQ,EAAE,IAAI;UACdY,KAAK,EAAEmU;QACX,CAAC;QACD5U,IAAI,EAAE;UACFkV,KAAK,EAAEhS,CAAC,CAACxC,IAAI,CAACV,IAAI;UAClBS,KAAK,EAAET;QACX;MACJ,CAAC;MACD,IAAI,CAACkD,CAAC,CAAC+E,CAAC,CAAClG,YAAY,EAAE;QACnB,IAAIqT,aAAa,GAAGlS,CAAC,CAAC+E,CAAC,CAACjG,WAAW,CAACqT,MAAM,CAAC,UAAU1S,OAAO,EAAE2S,WAAW,EAAE;UACvE3S,OAAO,CAAC2S,WAAW,CAAC,GAAGpS,CAAC,CAACxC,IAAI,CAAC4U,WAAW,CAAC;UAE1C,OAAO3S,OAAO;QAClB,CAAC,EAAE,CAAC,CAAC,CAAC;QAENJ,CAAC,CAACwC,MAAM,CAACpC,OAAO,EAAE;UACd5C,KAAK,EAAE;YACHmV,KAAK,EAAEhS,CAAC,CAACxC,IAAI,CAACX,KAAK;YACnBU,KAAK,EAAEV;UACX,CAAC;UACDE,MAAM,EAAE;YACJiV,KAAK,EAAEhS,CAAC,CAACxC,IAAI,CAACT,MAAM;YACpBQ,KAAK,EAAER,MAAM;YACb0C,OAAO,EAAEyS;UACb;QACJ,CAAC,CAAC;MACN;MAEAlS,CAAC,CAACS,eAAe,CAACT,CAAC,CAACxC,IAAI,CAAC3B,UAAU,EAAE4D,OAAO,EAAE,UAAU4S,CAAC,EAAE;QAAE;QACzD,IAAIX,GAAG,GAAG1R,CAAC,CAACsS,gBAAgB,CAACD,CAAC,CAACX,GAAG,CAAC;QACnC,IAAI,CAACA,GAAG,CAAC3R,MAAM,EAAE;UACb,OAAO,KAAK;QAChB;QAEA,IAAInE,IAAI,GAAGyD,CAAC,CAAC,CAAC,WAAW,EAAEqS,GAAG,EAAE,IAAI,EAAEW,CAAC,CAACvV,IAAI,IAAIuV,CAAC,CAACX,GAAG,EAAE,MAAM,CAAC,CAAC7C,IAAI,CAAC,EAAE,CAAC,CAAC;QAExE,IAAIwD,CAAC,CAACxV,KAAK,EAAE;UACTjB,IAAI,CAACmM,IAAI,CAAC,OAAO,EAAEsK,CAAC,CAACxV,KAAK,CAAC;QAC/B;QACA,IAAIwV,CAAC,CAACtV,MAAM,IAAI4U,iBAAiB,EAAE;UAC/B/V,IAAI,CAACmM,IAAI,CAAC,QAAQ,EAAEsK,CAAC,CAACtV,MAAM,IAAI4U,iBAAiB,CAAC;QACtD;QACA3R,CAAC,CAACa,KAAK,CAAC0R,cAAc,CAAC,CAAC;QACxBvS,CAAC,CAACa,KAAK,CAAC6J,UAAU,CAAC9O,IAAI,CAAC,CAAC,CAAC,CAAC;QAC3BoE,CAAC,CAACgI,QAAQ,CAAC,CAAC;QACZhI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QACzB,OAAO,IAAI;MACf,CAAC,CAAC;IACN,CAAC;IACDmL,gBAAgB,EAAE,SAAAA,CAAUZ,GAAG,EAAE;MAC7B,IAAI1R,CAAC,GAAG,IAAI;MACZ,IAAI,CAACA,CAAC,CAACoF,SAAS,EAAE;QACd,OAAOsM,GAAG;MACd;MAEA,IAAIc,iBAAiB,GAAG,6BAA6B;MACrD,IAAIA,iBAAiB,CAACC,IAAI,CAACf,GAAG,CAAC,EAAE;QAC7B,OAAOA,GAAG;MACd;MAEA,IAAIgB,kBAAkB,GAAG,4BAA4B;MACrD,IAAIA,kBAAkB,CAACD,IAAI,CAACf,GAAG,CAAC,EAAE;QAC9B,OAAO,SAAS,GAAGA,GAAG;MAC1B;MAEA,OAAO1R,CAAC,CAACoF,SAAS,GAAGsM,GAAG;IAC5B,CAAC;IACD5V,MAAM,EAAE,SAAAA,CAAA,EAAY;MAChB,IAAIkE,CAAC,GAAG,IAAI;QACRmR,iBAAiB,GAAGnR,CAAC,CAACyB,GAAG,CAACyI,YAAY,CAAC,CAAC;QACxCmH,IAAI,GAAGF,iBAAiB,CAACG,SAAS;MAEtC,IAAIH,iBAAiB,CAACwB,WAAW,EAAE;QAC/B,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAACnQ,OAAO,CAAC6O,IAAI,CAAC9L,QAAQ,CAAC,GAAG,CAAC,EAAE;UAC5C8L,IAAI,GAAGA,IAAI,CAACR,UAAU;QAC1B;QAEA,IAAIQ,IAAI,IAAIA,IAAI,CAAC9L,QAAQ,KAAK,GAAG,EAAE;UAC/B,IAAI1E,KAAK,GAAGb,CAAC,CAACyB,GAAG,CAAC8I,WAAW,CAAC,CAAC;UAC/B1J,KAAK,CAACgR,UAAU,CAACR,IAAI,CAAC;UACtBF,iBAAiB,CAACW,eAAe,CAAC,CAAC;UACnCX,iBAAiB,CAACY,QAAQ,CAAClR,KAAK,CAAC;QACrC;MACJ;MACAb,CAAC,CAACC,OAAO,CAAC,QAAQ,EAAE2S,SAAS,EAAEA,SAAS,EAAE,IAAI,CAAC;IACnD,CAAC;IACDjX,WAAW,EAAE,SAAAA,CAAA,EAAY;MACrB,IAAIqE,CAAC,GAAG,IAAI;MACZA,CAAC,CAACY,SAAS,CAAC,CAAC;MAEb,IAAInB,OAAO,GAAG;QACViS,GAAG,EAAE;UACDM,KAAK,EAAE,KAAK;UACZrV,QAAQ,EAAE;QACd,CAAC;QACDkW,GAAG,EAAE;UACDb,KAAK,EAAEhS,CAAC,CAACxC,IAAI,CAACZ,WAAW;UACzBW,KAAK,EAAEyC,CAAC,CAACc,YAAY,CAAC;QAC1B;MACJ,CAAC;MAED,IAAId,CAAC,CAAC+E,CAAC,CAAClH,mBAAmB,EAAE;QACzB4B,OAAO,CAACzC,KAAK,GAAG,CAAC,CAAC;MACtB;MAEAgD,CAAC,CAACS,eAAe,CAACT,CAAC,CAACxC,IAAI,CAAC7B,WAAW,EAAE8D,OAAO,EAAE,UAAU4S,CAAC,EAAE;QAAE;QAC1DrS,CAAC,CAACC,OAAO,CAAC,aAAa,EAAEoS,CAAC,CAACX,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC;QAC5C,IAAIoB,IAAI,GAAGzT,CAAC,CAAC,WAAW,GAAGgT,CAAC,CAACX,GAAG,GAAG,eAAe,EAAE1R,CAAC,CAACqH,IAAI,CAAC;QAC3DyL,IAAI,CAAC/K,IAAI,CAAC,KAAK,EAAEsK,CAAC,CAACQ,GAAG,CAAC;QAEvB,IAAI7S,CAAC,CAAC+E,CAAC,CAAClH,mBAAmB,EAAE;UACzBiV,IAAI,CAAC/K,IAAI,CAAC;YACN/K,KAAK,EAAEqV,CAAC,CAACrV;UACb,CAAC,CAAC;QACN;QAEAgD,CAAC,CAACgI,QAAQ,CAAC,CAAC;QACZhI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAEzB,OAAO,IAAI;MACf,CAAC,CAAC;IACN,CAAC;IACD5K,UAAU,EAAE,SAAAA,CAAA,EAAY;MACpB,IAAIyD,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnBiV,kBAAkB,GAAGjV,MAAM,GAAG,YAAY;QAC1CkV,0BAA0B,GAAGD,kBAAkB,GAAG,cAAc;QAChEE,YAAY;QACZC,YAAY,GAAGlT,CAAC,CAACqH,IAAI,CAACX,WAAW,CAAC,CAAC;MAEvC1G,CAAC,CAACqH,IAAI,CAACwG,WAAW,CAACkF,kBAAkB,CAAC;MACtCE,YAAY,GAAGjT,CAAC,CAACqH,IAAI,CAAC8E,QAAQ,CAAC4G,kBAAkB,CAAC;MAElD,IAAIE,YAAY,EAAE;QACdjT,CAAC,CAACqH,IAAI,CAAC8L,MAAM,CACT9T,CAAC,CAAC,QAAQ,EAAE;UACR8E,KAAK,EAAE6O;QACX,CAAC,CAAC,CAACjJ,GAAG,CAAC;UACHtD,MAAM,EAAEyM;QACZ,CAAC,CACL,CAAC;MACL,CAAC,MAAM;QACH7T,CAAC,CAAC,GAAG,GAAG2T,0BAA0B,CAAC,CAAC9E,MAAM,CAAC,CAAC;MAChD;MAEA7O,CAAC,CAAC,MAAM,CAAC,CAACwO,WAAW,CAAC/P,MAAM,GAAG,iBAAiB,EAAEmV,YAAY,CAAC;MAC/D5T,CAAC,CAACF,MAAM,CAAC,CAACgI,OAAO,CAAC,QAAQ,CAAC;MAC3BnH,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,KAAK,IAAI8L,YAAY,GAAG,MAAM,GAAG,OAAO,CAAC,GAAG,YAAY,CAAC;IAC1E,CAAC;IAGD;AACR;AACA;AACA;AACA;IACQhT,OAAO,EAAE,SAAAA,CAAUC,GAAG,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,aAAa,EAAE;MACpD,IAAIL,CAAC,GAAG,IAAI;MACZK,aAAa,GAAG,CAAC,CAACA,aAAa,IAAI,EAAE;MAErC,IAAIH,GAAG,KAAK,UAAU,EAAE;QACpBF,CAAC,CAAC0H,GAAG,CAAC0L,KAAK,CAAC,CAAC;MACjB;MAEA,IAAGlT,GAAG,KAAK,eAAe,IAAIF,CAAC,CAAC+E,CAAC,CAAC/G,QAAQ,EAAE;QACxCgC,CAAC,CAACmP,WAAW,CAAC,QAAQ,EAAEnP,CAAC,CAAC+E,CAAC,CAAC9G,sBAAsB,EAAE,IAAI,CAAC,CAAC,CAAC;MAC/D;MAEA,IAAI;QACA+B,CAAC,CAACyB,GAAG,CAACmF,WAAW,CAAC,cAAc,EAAE,KAAK,EAAExG,QAAQ,IAAI,KAAK,CAAC;MAC/D,CAAC,CAAC,OAAOiB,CAAC,EAAE,CACZ;MAEA,IAAI;QACArB,CAAC,CAACE,GAAG,GAAGG,aAAa,CAAC,CAACF,KAAK,CAAC;MACjC,CAAC,CAAC,OAAOkB,CAAC,EAAE;QACR,IAAI;UACAnB,GAAG,CAACC,KAAK,CAAC;QACd,CAAC,CAAC,OAAOkT,EAAE,EAAE;UACT,IAAInT,GAAG,KAAK,sBAAsB,EAAE;YAChCC,KAAK,GAAGyS,SAAS;UACrB,CAAC,MAAM,IAAI1S,GAAG,KAAK,aAAa,IAAIF,CAAC,CAACgG,IAAI,EAAE;YACxC7F,KAAK,GAAG,GAAG,GAAGA,KAAK,GAAG,GAAG;UAC7B;UAEAH,CAAC,CAACyB,GAAG,CAACmF,WAAW,CAAC1G,GAAG,EAAE,KAAK,EAAEC,KAAK,CAAC;UAEpCH,CAAC,CAACgI,QAAQ,CAAC,CAAC;UACZhI,CAAC,CAACsI,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC;UAC3B,IAAI;YACA,IAAIgL,MAAM,GAAGnU,MAAM,CAAC+K,YAAY,CAAC,CAAC,CAACoH,SAAS;YAC5C,IAAG,CAACjS,CAAC,CAACF,MAAM,CAAC+K,YAAY,CAAC,CAAC,CAACoH,SAAS,CAACT,UAAU,CAAC,CAAC1E,QAAQ,CAAC,kBAAkB,CAAC,EAAC;cAC3EmH,MAAM,GAAGnU,MAAM,CAAC+K,YAAY,CAAC,CAAC,CAACoH,SAAS,CAACT,UAAU;YACvD;YACA,IAAI0C,OAAO,GAAGvT,CAAC,CAAC+E,CAAC,CAAChH,UAAU,CAACoC,KAAK,CAAC;YACnC,IAAIoT,OAAO,EAAE;cACTlU,CAAC,CAACiU,MAAM,CAAC,CAACrL,QAAQ,CAACsL,OAAO,CAAC;YAC/B;UACJ,CAAC,CAAC,OAAO1M,CAAC,EAAE,CAEZ;QAEJ;QAEA,IAAI3G,GAAG,KAAK,UAAU,EAAE;UACpBF,CAAC,CAAC0J,sBAAsB,CAAC,CAAC;UAC1B1J,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;QAC7B;MACJ;IACJ,CAAC;IAGD;IACA7G,SAAS,EAAE,SAAAA,CAAUzD,KAAK,EAAE0D,OAAO,EAAEiT,SAAS,EAAE;MAC5C,IAAIxT,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;MAEvB0V,SAAS,GAAGA,SAAS,KAAK,KAAK;;MAE/B;MACA,IAAInU,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,WAAW,EAAEkC,CAAC,CAACqH,IAAI,CAAC,CAACtH,MAAM,GAAG,CAAC,EAAE;QAClD,OAAO,KAAK;MAChB;MACA,IAAIC,CAAC,CAAC+E,CAAC,CAACnH,eAAe,EAAE;QACrBoC,CAAC,CAAC4J,wBAAwB,GAAG,IAAI;MACrC;MAEA5J,CAAC,CAACY,SAAS,CAAC,CAAC;MACbZ,CAAC,CAAC6M,WAAW,CAAC,CAAC;;MAEf;MACA7M,CAAC,CAACmL,QAAQ,CAAClD,QAAQ,CAACnK,MAAM,GAAG,SAAS,CAAC;;MAEvC;MACA,IAAI2V,MAAM,GAAGpU,CAAC,CAAC,QAAQ,EAAE;QACrB8E,KAAK,EAAErG,MAAM,GAAG,QAAQ,GAAGA,MAAM,GAAG;MACxC,CAAC,CAAC,CAACiM,GAAG,CAAC;QACHqD,GAAG,EAAEpN,CAAC,CAACqH,IAAI,CAAC8F,MAAM,CAAC,CAAC,CAACC,GAAG,GAAGpN,CAAC,CAACmL,QAAQ,CAAC1E,MAAM,CAAC,CAAC;QAC9CgH,MAAM,EAAE;MACZ,CAAC,CAAC,CAAC9F,QAAQ,CAACtI,CAAC,CAACW,CAAC,CAACyB,GAAG,CAACqB,IAAI,CAAC,CAAC;MAE1B,IAAI4Q,SAAS,GAAG5V,MAAM,GAAG,MAAM;MAC/B,IAAIkC,CAAC,CAAC4B,EAAE,CAAC+R,OAAO,CAAC,GAAG,GAAGD,SAAS,CAAC,CAAC3T,MAAM,KAAK,CAAC,EAAE;QAC5C0T,MAAM,CAACxL,QAAQ,CAACyL,SAAS,CAAC;MAC9B;;MAEA;MACA1T,CAAC,CAAC4M,QAAQ,CAACgH,GAAG,CAAC,OAAO,EAAE,YAAY;QAChCH,MAAM,CAACtM,OAAO,CAAC5H,YAAY,CAAC;QAC5B,OAAO,KAAK;MAChB,CAAC,CAAC;;MAEF;MACA,IAAIsU,aAAa;MACjB,IAAIL,SAAS,EAAE;QACXK,aAAa,GAAGxU,CAAC,CAAC,SAAS,EAAE;UACzByU,MAAM,EAAE,EAAE;UACV1S,IAAI,EAAEb;QACV,CAAC,CAAC,CACGmI,EAAE,CAAC,QAAQ,EAAE,YAAY;UACtB+K,MAAM,CAACtM,OAAO,CAAC7H,aAAa,CAAC;UAC7B,OAAO,KAAK;QAChB,CAAC,CAAC,CACDoJ,EAAE,CAAC,OAAO,EAAE,YAAY;UACrB+K,MAAM,CAACtM,OAAO,CAAC5H,YAAY,CAAC;UAC5B,OAAO,KAAK;QAChB,CAAC,CAAC,CACDmJ,EAAE,CAAC,cAAc,EAAE,YAAY;UAC5B,IAAI1I,CAAC,CAAC+E,CAAC,CAACnH,eAAe,EAAE;YACrBoC,CAAC,CAAC4J,wBAAwB,GAAG,KAAK;UACtC;QACJ,CAAC,CAAC;MACV,CAAC,MAAM;QACHiK,aAAa,GAAGtT,OAAO;MAC3B;;MAGA;MACA,IAAI8G,IAAI,GAAGhI,CAAC,CAAC,QAAQ,EAAE;QACnB8E,KAAK,EAAErG,MAAM,GAAG,WAAW;QAC3BsD,IAAI,EAAEyS;MACV,CAAC,CAAC,CACG9J,GAAG,CAAC;QACDqD,GAAG,EAAE,GAAG,GAAGpN,CAAC,CAACmL,QAAQ,CAACzE,WAAW,CAAC,CAAC;QACnCqN,OAAO,EAAE,CAAC;QACVC,aAAa,EAAER,SAAS,GAAG,IAAI,GAAG;MACtC,CAAC,CAAC,CACD7L,QAAQ,CAAC8L,MAAM,CAAC,CAChBQ,OAAO,CAAC;QACL7G,GAAG,EAAE,CAAC;QACN2G,OAAO,EAAE;MACb,CAAC,EAAE,GAAG,CAAC;;MAGX;MACA,IAAIlX,KAAK,EAAE;QACPwC,CAAC,CAAC,SAAS,EAAE;UACTvC,IAAI,EAAED,KAAK;UACXsH,KAAK,EAAErG,MAAM,GAAG;QACpB,CAAC,CAAC,CAACoW,SAAS,CAAC7M,IAAI,CAAC;MACtB;MAEA,IAAImM,SAAS,EAAE;QACX;QACAnU,CAAC,CAAC,cAAc,EAAEgI,IAAI,CAAC,CAAC+L,KAAK,CAAC,CAAC;;QAE/B;QACApT,CAAC,CAACmU,aAAa,CAAC,QAAQ,EAAE9M,IAAI,CAAC;QAC/BrH,CAAC,CAACmU,aAAa,CAAC,OAAO,EAAE9M,IAAI,CAAC;QAE9BoM,MAAM,CAAChN,MAAM,CAACY,IAAI,CAACX,WAAW,CAAC,CAAC,GAAG,EAAE,CAAC;MAC1C;MAEArH,CAAC,CAACF,MAAM,CAAC,CAACgI,OAAO,CAAC,QAAQ,CAAC;MAC3BnH,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,cAAc,CAAC;MAE5B,OAAOsM,MAAM;IACjB,CAAC;IACD;IACAU,aAAa,EAAE,SAAAA,CAAUC,CAAC,EAAEX,MAAM,EAAE;MAChC,IAAIzT,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;MAEvB,OAAOuB,CAAC,CAAC,WAAW,EAAE;QAClB8E,KAAK,EAAErG,MAAM,GAAG,eAAe,GAAGA,MAAM,GAAG,QAAQ,GAAGsW,CAAC;QACvDhL,IAAI,EAAEgL,CAAC;QACPtX,IAAI,EAAEkD,CAAC,CAACxC,IAAI,CAAC4W,CAAC,CAAC,IAAIA;MACvB,CAAC,CAAC,CAACzM,QAAQ,CAACtI,CAAC,CAAC,MAAM,EAAEoU,MAAM,CAAC,CAAC;IAClC,CAAC;IACD;IACAjT,UAAU,EAAE,SAAAA,CAAA,EAAY;MACpB,IAAIR,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;MAEvBkC,CAAC,CAACmL,QAAQ,CAACL,WAAW,CAAChN,MAAM,GAAG,SAAS,CAAC;MAC1CkC,CAAC,CAAC4M,QAAQ,CAACoB,GAAG,CAAC,CAAC;;MAEhB;MACA,IAAIqG,SAAS,GAAGhV,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,WAAW,EAAEuB,CAAC,CAACW,CAAC,CAACyB,GAAG,CAACqB,IAAI,CAAC,CAAC;MAE5DuR,SAAS,CAACJ,OAAO,CAAC;QACd7G,GAAG,EAAE,GAAG,GAAGiH,SAAS,CAAC5N,MAAM,CAAC;MAChC,CAAC,EAAE,GAAG,EAAE,YAAY;QAChB4N,SAAS,CAACtE,MAAM,CAAC,CAAC,CAAC7B,MAAM,CAAC,CAAC;QAC3BlO,CAAC,CAAC+M,WAAW,CAAC,CAAC;QACf/M,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,eAAe,CAAC;MACjC,CAAC,CAAC;MAEFnH,CAAC,CAACe,YAAY,CAAC,CAAC;IACpB,CAAC;IACD;IACAN,eAAe,EAAE,SAAAA,CAAU5D,KAAK,EAAE6D,MAAM,EAAER,GAAG,EAAE;MAC3C,IAAIF,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnBwW,EAAE,GAAGtU,CAAC,CAACxC,IAAI;QACX4D,IAAI,GAAG,EAAE;QACTmT,QAAQ,GAAGzW,MAAM,GAAG,OAAO,GAAG0W,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG;MAElDpV,CAAC,CAACO,IAAI,CAACc,MAAM,EAAE,UAAUgU,SAAS,EAAEC,KAAK,EAAE;QACvC,IAAIC,CAAC,GAAGD,KAAK,CAAC3C,KAAK,IAAI0C,SAAS;UAC5BN,CAAC,GAAGO,KAAK,CAAC7M,IAAI,IAAI4M,SAAS;UAC3BG,CAAC,GAAGF,KAAK,CAACG,UAAU,IAAI,CAAC,CAAC;UAC1BC,OAAO,GAAGR,QAAQ,GAAGG,SAAS;QAElC,IAAI3M,IAAI,GAAG1K,MAAM,CAACuI,IAAI,CAACiP,CAAC,CAAC,CAACG,GAAG,CAAC,UAAUjE,IAAI,EAAE;UAC1C,OAAOA,IAAI,GAAG,IAAI,GAAG8D,CAAC,CAAC9D,IAAI,CAAC,GAAG,GAAG;QACtC,CAAC,CAAC,CAAClC,IAAI,CAAC,GAAG,CAAC;QAEZ,IAAI,OAAO8F,KAAK,CAACvL,IAAI,KAAK,UAAU,EAAE;UACpC,IAAI,CAACuL,KAAK,CAAC7M,IAAI,EAAE;YACf6M,KAAK,CAAC7M,IAAI,GAAGsM,CAAC;UAChB;UAEAhT,IAAI,IAAIuT,KAAK,CAACvL,IAAI,CAACuL,KAAK,EAAEI,OAAO,EAAEjX,MAAM,EAAEwW,EAAE,CAAC;UAE9C;QACF;QAEAlT,IAAI,IAAI,cAAc,GAAGtD,MAAM,GAAG,aAAa;QAC/CsD,IAAI,IAAI,cAAc,GAAGtD,MAAM,GAAG,2BAA2B,GAAGiX,OAAO,GAAG,UAAU,IAAIT,EAAE,CAACM,CAAC,CAAC,GAAGN,EAAE,CAACM,CAAC,CAAC,GAAGA,CAAC,CAAC,GAAG,uBAAuB;QACpIxT,IAAI,IAAI,cAAc,GAAGtD,MAAM,GAAG,cAAc;QAEhD,IAAIuB,CAAC,CAAC4V,aAAa,CAACN,KAAK,CAAClV,OAAO,CAAC,EAAE;UAChC2B,IAAI,IAAI,wBAAwB;UAChCA,IAAI,IAAI/D,MAAM,CAACuI,IAAI,CAAC+O,KAAK,CAAClV,OAAO,CAAC,CAACuV,GAAG,CAAE5C,WAAW,IAAK;YACpD,OAAO,iBAAiB,GAAGA,WAAW,GAAG,IAAI,IAAIA,WAAW,KAAKuC,KAAK,CAACpX,KAAK,GAAG,UAAU,GAAG,EAAE,CAAC,GAAG,GAAG,GAAGoX,KAAK,CAAClV,OAAO,CAAC2S,WAAW,CAAC,GAAG,WAAW;UACpJ,CAAC,CAAC,CAACvD,IAAI,CAAC,EAAE,CAAC;UACXzN,IAAI,IAAI,WAAW;QACvB,CAAC,MAAM;UACHA,IAAI,IAAI,aAAa,GAAG2T,OAAO,GAAG,UAAU,IAAIJ,KAAK,CAACvL,IAAI,IAAI,MAAM,CAAC,GAAG,UAAU,GAAGgL,CAAC,GAAG,IAAI,GAAGrM,IAAI;UACpG3G,IAAI,IAAI,CAACuT,KAAK,CAACvL,IAAI,KAAK,UAAU,IAAIuL,KAAK,CAACpX,KAAK,GAAG,oBAAoB,GAAG,EAAE,IAAI,UAAU,GAAG,CAACoX,KAAK,CAACpX,KAAK,IAAI,EAAE,EAAEqG,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,IAAI;QACpJ;QAEAxC,IAAI,IAAI,cAAc;MAC1B,CAAC,CAAC;MAEF,OAAOpB,CAAC,CAACM,SAAS,CAACzD,KAAK,EAAEuE,IAAI,CAAC,CAC1BsH,EAAE,CAACpJ,aAAa,EAAE,YAAY;QAC3B,IAAI4V,KAAK,GAAG7V,CAAC,CAAC,MAAM,EAAEA,CAAC,CAAC,IAAI,CAAC,CAAC;UAC1B8V,KAAK,GAAG,IAAI;UACZC,MAAM,GAAG,CAAC,CAAC;QAEf/V,CAAC,CAACO,IAAI,CAACc,MAAM,EAAE,UAAUgU,SAAS,EAAEC,KAAK,EAAE;UACvC,IAAIP,CAAC,GAAGO,KAAK,CAAC7M,IAAI,IAAI4M,SAAS;UAE/B,IAAIW,MAAM,GAAGhW,CAAC,CAAC,eAAe,GAAG+U,CAAC,GAAG,IAAI,EAAEc,KAAK,CAAC;YAC7C1L,SAAS,GAAG6L,MAAM,CAAC,CAAC,CAAC,CAACjM,IAAI;UAE9B,QAAQI,SAAS,CAACyC,WAAW,CAAC,CAAC;YAC3B,KAAK,UAAU;cACXmJ,MAAM,CAAChB,CAAC,CAAC,GAAGiB,MAAM,CAAC7N,EAAE,CAAC,UAAU,CAAC;cACjC;YACJ,KAAK,OAAO;cACR4N,MAAM,CAAChB,CAAC,CAAC,GAAGiB,MAAM,CAAChG,MAAM,CAAC,UAAU,CAAC,CAAC5H,GAAG,CAAC,CAAC;cAC3C;YACJ;cACI2N,MAAM,CAAChB,CAAC,CAAC,GAAGiB,MAAM,CAAC5N,GAAG,CAAC,CAAC,CAACkE,IAAI,CAAC,CAAC;cAC/B;UACR;UACA;UACA,IAAIgJ,KAAK,CAAChY,QAAQ,IAAIyY,MAAM,CAAChB,CAAC,CAAC,KAAK,EAAE,EAAE;YACpCe,KAAK,GAAG,KAAK;YACbnV,CAAC,CAACsV,oBAAoB,CAACD,MAAM,EAAErV,CAAC,CAACxC,IAAI,CAACb,QAAQ,CAAC;UACnD,CAAC,MAAM,IAAIgY,KAAK,CAACY,OAAO,IAAI,CAACZ,KAAK,CAACY,OAAO,CAAC9C,IAAI,CAAC2C,MAAM,CAAChB,CAAC,CAAC,CAAC,EAAE;YACxDe,KAAK,GAAG,KAAK;YACbnV,CAAC,CAACsV,oBAAoB,CAACD,MAAM,EAAEV,KAAK,CAACa,YAAY,CAAC;UACtD;QACJ,CAAC,CAAC;QAEF,IAAIL,KAAK,EAAE;UACPnV,CAAC,CAACe,YAAY,CAAC,CAAC;UAEhB,IAAIb,GAAG,CAACkV,MAAM,EAAE1U,MAAM,CAAC,EAAE;YACrBV,CAAC,CAACgI,QAAQ,CAAC,CAAC;YACZhI,CAAC,CAAC4B,EAAE,CAACuF,OAAO,CAAC,WAAW,CAAC;YACzBnH,CAAC,CAACQ,UAAU,CAAC,CAAC;YACdnB,CAAC,CAAC,IAAI,CAAC,CAAC2O,GAAG,CAAC1O,aAAa,CAAC;UAC9B;QACJ;MACJ,CAAC,CAAC,CACDsU,GAAG,CAACrU,YAAY,EAAE,YAAY;QAC3BF,CAAC,CAAC,IAAI,CAAC,CAAC2O,GAAG,CAAC1O,aAAa,CAAC;QAC1BU,CAAC,CAACQ,UAAU,CAAC,CAAC;MAClB,CAAC,CAAC;IACV,CAAC;IACD8U,oBAAoB,EAAE,SAAAA,CAAUD,MAAM,EAAEI,GAAG,EAAE;MACzC,IAAI3X,MAAM,GAAG,IAAI,CAACiH,CAAC,CAACjH,MAAM;QACtB4X,cAAc,GAAG5X,MAAM,GAAG,WAAW;QACrC6X,IAAI,GAAGN,MAAM,CAACO,OAAO,CAAC,GAAG,GAAG9X,MAAM,GAAG,WAAW,CAAC;MAErDuX,MAAM,CACDzB,GAAG,CAAC,cAAc,EAAE,YAAY;QAC7B+B,IAAI,CAAC7K,WAAW,CAAChN,MAAM,GAAG,aAAa,CAAC;MAC5C,CAAC,CAAC;MAEN6X,IAAI,CAACpH,IAAI,CAAC,GAAG,GAAGmH,cAAc,CAAC,CAACxH,MAAM,CAAC,CAAC;MACxCyH,IAAI,CACC1N,QAAQ,CAACnK,MAAM,GAAG,aAAa,CAAC,CAChCyQ,IAAI,CAAC,GAAG,GAAGzQ,MAAM,GAAG,mBAAmB,CAAC,CACxC+J,MAAM,CACHxI,CAAC,CAAC,SAAS,EAAE;QACT8E,KAAK,EAAEuR,cAAc;QACrB5Y,IAAI,EAAE2Y;MACV,CAAC,CACL,CAAC;IACT,CAAC;IAEDtQ,4BAA4B,EAAE,SAAAA,CAAA,EAAY;MACtC,IAAInF,CAAC,GAAG,IAAI;MAEZ,OAAO,YAAY;QACf,IAAI8S,IAAI,GAAGzT,CAAC,CAAC,IAAI,CAAC;UACd+C,GAAG,GAAG0Q,IAAI,CAAC/K,IAAI,CAAC,KAAK,CAAC;UACtB8N,MAAM,GAAG,UAAU;QAEvB,IAAIzT,GAAG,CAACI,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE;UACjCJ,GAAG,GAAGyT,MAAM;QAChB;QAEA,IAAIpW,OAAO,GAAG;UACViS,GAAG,EAAE;YACDM,KAAK,EAAE,KAAK;YACZzU,KAAK,EAAE6E,GAAG;YACVzF,QAAQ,EAAE;UACd,CAAC;UACDkW,GAAG,EAAE;YACDb,KAAK,EAAEhS,CAAC,CAACxC,IAAI,CAACZ,WAAW;YACzBW,KAAK,EAAEuV,IAAI,CAAC/K,IAAI,CAAC,KAAK;UAC1B;QACJ,CAAC;QAED,IAAI/H,CAAC,CAAC+E,CAAC,CAAClH,mBAAmB,EAAE;UACzB4B,OAAO,CAACzC,KAAK,GAAG;YACZO,KAAK,EAAEuV,IAAI,CAAC/K,IAAI,CAAC,OAAO,CAAC,GAAG+K,IAAI,CAAC/K,IAAI,CAAC,OAAO,CAAC,GAAG;UACrD,CAAC;QACL;QAEA/H,CAAC,CAACS,eAAe,CAACT,CAAC,CAACxC,IAAI,CAAC7B,WAAW,EAAE8D,OAAO,EAAE,UAAU4S,CAAC,EAAE;UACxD,IAAIA,CAAC,CAACX,GAAG,KAAKmE,MAAM,EAAE;YAClB/C,IAAI,CAAC/K,IAAI,CAAC;cACN3F,GAAG,EAAEiQ,CAAC,CAACX;YACX,CAAC,CAAC;UACN;UACAoB,IAAI,CAAC/K,IAAI,CAAC;YACN8K,GAAG,EAAER,CAAC,CAACQ;UACX,CAAC,CAAC;UAEF,IAAI7S,CAAC,CAAC+E,CAAC,CAAClH,mBAAmB,EAAE;YACzB,IAAIiY,QAAQ,CAACzD,CAAC,CAACrV,KAAK,CAAC,GAAG,CAAC,EAAE;cACvB8V,IAAI,CAAC/K,IAAI,CAAC;gBACN/K,KAAK,EAAEqV,CAAC,CAACrV;cACb,CAAC,CAAC;YACN,CAAC,MAAM;cACH8V,IAAI,CAACnF,UAAU,CAAC,OAAO,CAAC;YAC5B;UACJ;UAEA,OAAO,IAAI;QACf,CAAC,CAAC;QACF,OAAO,KAAK;MAChB,CAAC;IACL,CAAC;IAED;IACA/M,SAAS,EAAE,SAAAA,CAAA,EAAY;MACnB,IAAIZ,CAAC,GAAG,IAAI;QACRmR,iBAAiB,GAAGnR,CAAC,CAACyB,GAAG,CAACyI,YAAY,CAAC,CAAC;MAE5ClK,CAAC,CAACa,KAAK,GAAG,IAAI;MAEd,IAAI,CAACsQ,iBAAiB,IAAI,CAACA,iBAAiB,CAAC4E,UAAU,EAAE;QACrD;MACJ;MAEA,IAAIC,UAAU,GAAGhW,CAAC,CAACa,KAAK,GAAGsQ,iBAAiB,CAAC1G,UAAU,CAAC,CAAC,CAAC;QACtD5J,KAAK,GAAGb,CAAC,CAACyB,GAAG,CAAC8I,WAAW,CAAC,CAAC;QAC3B0L,UAAU;MACdpV,KAAK,CAACmQ,kBAAkB,CAAChR,CAAC,CAAC0H,GAAG,CAAC,CAAC,CAAC,CAAC;MAClC7G,KAAK,CAACqV,MAAM,CAACF,UAAU,CAACpF,cAAc,EAAEoF,UAAU,CAACG,WAAW,CAAC;MAC/DF,UAAU,GAAG,CAACpV,KAAK,GAAG,EAAE,EAAEd,MAAM;MAChCC,CAAC,CAACoW,SAAS,GAAG;QACVC,KAAK,EAAEJ,UAAU;QACjBK,GAAG,EAAEL,UAAU,GAAG,CAACD,UAAU,GAAG,EAAE,EAAEjW;MACxC,CAAC;IACL,CAAC;IACDgB,YAAY,EAAE,SAAAA,CAAA,EAAY;MACtB,IAAIf,CAAC,GAAG,IAAI;QACRoW,SAAS,GAAGpW,CAAC,CAACoW,SAAS;QACvBJ,UAAU,GAAGhW,CAAC,CAACa,KAAK;QACpBsQ,iBAAiB,GAAGnR,CAAC,CAACyB,GAAG,CAACyI,YAAY,CAAC,CAAC;QACxCrJ,KAAK;MAET,IAAI,CAACmV,UAAU,EAAE;QACb;MACJ;MAEA,IAAII,SAAS,IAAIA,SAAS,CAACC,KAAK,KAAKD,SAAS,CAACE,GAAG,EAAE;QAAE;QAClD,IAAIC,SAAS,GAAG,CAAC;UACbC,SAAS,GAAG,CAACxW,CAAC,CAAC0H,GAAG,CAAC,CAAC,CAAC,CAAC;UACtB2J,IAAI;UACJoF,UAAU,GAAG,KAAK;UAClBC,IAAI,GAAG,KAAK;QAEhB7V,KAAK,GAAGb,CAAC,CAACyB,GAAG,CAAC8I,WAAW,CAAC,CAAC;QAE3B,OAAO,CAACmM,IAAI,KAAKrF,IAAI,GAAGmF,SAAS,CAACG,GAAG,CAAC,CAAC,CAAC,EAAE;UACtC,IAAItF,IAAI,CAAC/B,QAAQ,KAAK,CAAC,EAAE;YACrB,IAAIsH,aAAa,GAAGL,SAAS,GAAGlF,IAAI,CAACtR,MAAM;YAC3C,IAAI,CAAC0W,UAAU,IAAIL,SAAS,CAACC,KAAK,IAAIE,SAAS,IAAIH,SAAS,CAACC,KAAK,IAAIO,aAAa,EAAE;cACjF/V,KAAK,CAACgW,QAAQ,CAACxF,IAAI,EAAE+E,SAAS,CAACC,KAAK,GAAGE,SAAS,CAAC;cACjDE,UAAU,GAAG,IAAI;YACrB;YACA,IAAIA,UAAU,IAAIL,SAAS,CAACE,GAAG,IAAIC,SAAS,IAAIH,SAAS,CAACE,GAAG,IAAIM,aAAa,EAAE;cAC5E/V,KAAK,CAACqV,MAAM,CAAC7E,IAAI,EAAE+E,SAAS,CAACE,GAAG,GAAGC,SAAS,CAAC;cAC7CG,IAAI,GAAG,IAAI;YACf;YACAH,SAAS,GAAGK,aAAa;UAC7B,CAAC,MAAM;YACH,IAAIE,EAAE,GAAGzF,IAAI,CAACrO,UAAU;cACpBf,CAAC,GAAG6U,EAAE,CAAC/W,MAAM;YAEjB,OAAOkC,CAAC,GAAG,CAAC,EAAE;cACVA,CAAC,IAAI,CAAC;cACNuU,SAAS,CAACO,IAAI,CAACD,EAAE,CAAC7U,CAAC,CAAC,CAAC;YACzB;UACJ;QACJ;MACJ;;MAEA;MACA;MACA,IAAI;QACAkP,iBAAiB,CAACW,eAAe,CAAC,CAAC;MACvC,CAAC,CAAC,OAAOjL,CAAC,EAAE,CACZ;MAEAsK,iBAAiB,CAACY,QAAQ,CAAClR,KAAK,IAAImV,UAAU,CAAC;IACnD,CAAC;IACDlV,YAAY,EAAE,SAAAA,CAAA,EAAY;MACtB,OAAO,IAAI,CAACD,KAAK,GAAG,EAAE;IAC1B,CAAC;IAED8I,qBAAqB,EAAE,SAAAA,CAAA,EAAY;MAC/B,IAAI3J,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnBkZ,aAAa,GAAGlZ,MAAM,GAAG,gBAAgB,GAAGA,MAAM,GAAG,QAAQ;QAC7DmZ,iBAAiB,GAAGnZ,MAAM,GAAG,eAAe;;MAEhD;MACAuB,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,eAAe,EAAEkC,CAAC,CAACmL,QAAQ,CAAC,CAACL,WAAW,CAACkM,aAAa,CAAC;MACxE3X,CAAC,CAAC,GAAG,GAAG4X,iBAAiB,EAAEjX,CAAC,CAACmL,QAAQ,CAAC,CAACvL,IAAI,CAAC,YAAY;QACpDP,CAAC,CAAC,IAAI,CAAC,CAACkP,IAAI,CAAC,SAAS,CAAC,CAACxG,IAAI,CAAC,YAAY,EAAE1I,CAAC,CAAC,IAAI,CAAC,CAACQ,IAAI,CAACoX,iBAAiB,CAAC,CAAC;MAC/E,CAAC,CAAC;IACN,CAAC;IACDvN,sBAAsB,EAAE,SAAAA,CAAA,EAAY;MAChC,IAAI1J,CAAC,GAAG,IAAI;QACRlC,MAAM,GAAGkC,CAAC,CAAC+E,CAAC,CAACjH,MAAM;QACnBkZ,aAAa,GAAGlZ,MAAM,GAAG,gBAAgB,GAAGA,MAAM,GAAG,QAAQ;QAC7DmZ,iBAAiB,GAAGnZ,MAAM,GAAG,eAAe;QAC5CoZ,IAAI,GAAGlX,CAAC,CAACmX,gBAAgB,CAACnX,CAAC,CAACyB,GAAG,CAACyI,YAAY,CAAC,CAAC,CAACkN,UAAU,CAAC;MAE9DpX,CAAC,CAAC2J,qBAAqB,CAAC,CAAC;MAEzBtK,CAAC,CAACO,IAAI,CAACsX,IAAI,EAAE,UAAUjV,CAAC,EAAE2C,GAAG,EAAE;QAC3B,IAAIY,OAAO,GAAGxF,CAAC,CAAC6F,WAAW,CAACjB,GAAG,CAACqH,WAAW,CAAC,CAAC,CAAC;UAC1CD,IAAI,GAAG3M,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG0H,OAAO,GAAG,SAAS,EAAExF,CAAC,CAACmL,QAAQ,CAAC;QAE5D,IAAIa,IAAI,CAACjM,MAAM,GAAG,CAAC,EAAE;UACjBiM,IAAI,CAAC/D,QAAQ,CAAC+O,aAAa,CAAC;QAChC,CAAC,MAAM;UACH,IAAI;YACAhL,IAAI,GAAG3M,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAG,YAAY,GAAGA,MAAM,GAAG0H,OAAO,GAAG,kBAAkB,EAAExF,CAAC,CAACqH,IAAI,CAAC;YACrF,IAAIgQ,UAAU,GAAGrL,IAAI,CAACuC,IAAI,CAAC,SAAS,CAAC;cACjC+I,eAAe,GAAGtL,IAAI,CAAC+D,MAAM,CAAC,CAAC,CAAClQ,IAAI,CAAC/B,MAAM,GAAG,UAAU,CAAC;cACzDyZ,YAAY,GAAGlY,CAAC,CAAC,GAAG,GAAGvB,MAAM,GAAGwZ,eAAe,GAAG,SAAS,EAAEtX,CAAC,CAACqH,IAAI,CAAC;cACpEmQ,kBAAkB,GAAGD,YAAY,CAAChJ,IAAI,CAAC,SAAS,CAAC;;YAErD;YACAgJ,YAAY,CAACtP,QAAQ,CAAC+O,aAAa,CAAC;;YAEpC;YACA,IAAIhX,CAAC,CAAC+E,CAAC,CAACtG,wBAAwB,IAAI4Y,UAAU,CAACtX,MAAM,GAAG,CAAC,EAAE;cACvD;cACAwX,YAAY,CACPtP,QAAQ,CAACgP,iBAAiB,CAAC,CAC3BpX,IAAI,CAACoX,iBAAiB,EAAEO,kBAAkB,CAACzP,IAAI,CAAC,YAAY,CAAC,CAAC;;cAEnE;cACAyP,kBAAkB,CACbzP,IAAI,CAAC,YAAY,EAAEsP,UAAU,CAACtP,IAAI,CAAC,YAAY,CAAC,CAAC;YAC1D;UACJ,CAAC,CAAC,OAAOlB,CAAC,EAAE,CACZ;QACJ;MACJ,CAAC,CAAC;IACN,CAAC;IACDsQ,gBAAgB,EAAE,SAAAA,CAAUM,OAAO,EAAEP,IAAI,EAAE;MACvC,IAAIlX,CAAC,GAAG,IAAI;MACZkX,IAAI,GAAGA,IAAI,KAAKO,OAAO,IAAIA,OAAO,CAACC,OAAO,GAAG,CAACD,OAAO,CAACC,OAAO,CAAC,GAAG,EAAE,CAAC;MAEpE,IAAID,OAAO,IAAIA,OAAO,CAAC5G,UAAU,EAAE;QAC/B,IAAI4G,OAAO,CAACnI,QAAQ,KAAKqI,IAAI,CAACC,YAAY,EAAE;UACxCH,OAAO,GAAGA,OAAO,CAAC5G,UAAU;QAChC;MACJ,CAAC,MAAM;QACH,OAAOqG,IAAI;MACf;MAEA,IAAItS,GAAG,GAAG6S,OAAO,CAACC,OAAO;MACzB,IAAI9S,GAAG,KAAK,KAAK,EAAE;QACf,OAAOsS,IAAI;MACf;MACA,IAAItS,GAAG,KAAK,GAAG,IAAI6S,OAAO,CAAC9K,KAAK,CAACkL,SAAS,KAAK,EAAE,EAAE;QAC/CX,IAAI,CAACH,IAAI,CAACU,OAAO,CAAC9K,KAAK,CAACkL,SAAS,CAAC;MACtC;MAEAxY,CAAC,CAACO,IAAI,CAACI,CAAC,CAAC8F,WAAW,EAAE,UAAU7D,CAAC,EAAE6V,UAAU,EAAE;QAC3CZ,IAAI,GAAGA,IAAI,CAACnR,MAAM,CAAC+R,UAAU,CAACL,OAAO,EAAEzX,CAAC,CAAC,CAAC;MAC9C,CAAC,CAAC;MAEFkX,IAAI,CAACH,IAAI,CAACnS,GAAG,CAAC;MAEd,OAAO5E,CAAC,CAACmX,gBAAgB,CAACM,OAAO,CAAC5G,UAAU,EAAEqG,IAAI,CAAC,CAAC7H,MAAM,CAAC,UAAUzK,GAAG,EAAE;QACtE,OAAOA,GAAG,IAAI,IAAI;MACtB,CAAC,CAAC;IACN,CAAC;IAED;IACA+B,WAAW,EAAE,SAAAA,CAAA,EAAY;MACrB,IAAI3G,CAAC,GAAG,IAAI;MACZA,CAAC,CAAC+X,aAAa,GAAG,EAAE;MACpB1Y,CAAC,CAACO,IAAI,CAACP,CAAC,CAAChF,SAAS,CAAC4C,OAAO,EAAE,UAAU6K,IAAI,EAAEkQ,MAAM,EAAE;QAChD,IAAI,CAACA,MAAM,CAACC,UAAU,IAAID,MAAM,CAACC,UAAU,CAACjY,CAAC,CAAC,EAAE;UAC5CgY,MAAM,CAAC1R,IAAI,CAACtG,CAAC,CAAC;UACd,IAAIgY,MAAM,CAACF,UAAU,EAAE;YACnB9X,CAAC,CAAC8F,WAAW,CAACiR,IAAI,CAACiB,MAAM,CAACF,UAAU,CAAC;UACzC;UACA9X,CAAC,CAAC+X,aAAa,CAAChB,IAAI,CAACiB,MAAM,CAAC;QAChC;MACJ,CAAC,CAAC;IACN,CAAC;IACD/J,cAAc,EAAE,SAAAA,CAAA,EAAY;MACxB,IAAIjO,CAAC,GAAG,IAAI;MACZX,CAAC,CAACO,IAAI,CAAC,IAAI,CAACmY,aAAa,EAAE,UAAU9V,CAAC,EAAE+V,MAAM,EAAE;QAC5C,IAAIA,MAAM,CAAC9W,OAAO,EAAE;UAChB8W,MAAM,CAAC9W,OAAO,CAAClB,CAAC,CAAC;QACrB;MACJ,CAAC,CAAC;IACN;EACJ,CAAC;AACL,CAAC,EAAEd,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEhF,MAAM,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}